<html><head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.0, mkdocs-material-8.2.16" name="generator"/>
<title>Lista Programação Concorrente e distribuída</title>
<link href="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/assets/stylesheets/main.1c3799f8.min.css" rel="stylesheet"/>
<link href="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/assets/stylesheets/palette.cc9b2e1e.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<style>@charset "UTF-8";
:root {
  string-set: author 'Samuel Cavalcanti', copyright 'Copyright © 2022 Samuel Cavalcanti', title 'Lista Programação Concorrente e distribuída'; }

h1, h2, h3 {
  string-set: chapter content(); }
@page {
  size: a4 portrait;
  margin: 25mm 10mm 25mm 10mm;
  counter-increment: page;
  white-space: pre;
  color: grey;
  @top-right {
    font-size: 7pt;
    content: string(chapter); }
  @bottom-center {
    font-size: 8pt;
    content: "- " counter(page) "/" counter(pages) " -"; }
  @bottom-right {
    font-size: 6pt;
    content: string(copyright); } }

@media print {
  body {
    background: none;
    background-color: #fff; } }

article,
section + section {
  page-break-before: always;
  min-height: 100vh;
  /* Defining all page breaks */ }
  article,
  article h1,
  article h2,
  article h3,
  article h4,
  article h5,
  article h6,
  article div.tabbed-content--wrap > .tabbed-content,
  section + section,
  section + section h1,
  section + section h2,
  section + section h3,
  section + section h4,
  section + section h5,
  section + section h6,
  section + section div.tabbed-content--wrap > .tabbed-content {
    clear: both; }
  article h1,
  article h2,
  article h3,
  article h4,
  article h5,
  article h6,
  article img,
  section + section h1,
  section + section h2,
  section + section h3,
  section + section h4,
  section + section h5,
  section + section h6,
  section + section img {
    page-break-after: avoid;
    page-break-inside: avoid; }
  article a,
  article blockquote,
  article table,
  article ul,
  article ol,
  section + section a,
  section + section blockquote,
  section + section table,
  section + section ul,
  section + section ol {
    page-break-before: avoid;
    page-break-inside: avoid; }
  article pre,
  article dt + dd,
  section + section pre,
  section + section dt + dd {
    page-break-before: avoid; }
  article h1 + ul,
  article h2 + ul,
  article h3 + ul,
  article h4 + ul,
  article h5 + ul,
  article h6 + ul,
  article h1 + ol,
  article h2 + ol,
  article h3 + ol,
  article h4 + ol,
  article h5 + ol,
  article h6 + ol,
  section + section h1 + ul,
  section + section h2 + ul,
  section + section h3 + ul,
  section + section h4 + ul,
  section + section h5 + ul,
  section + section h6 + ul,
  section + section h1 + ol,
  section + section h2 + ol,
  section + section h3 + ol,
  section + section h4 + ol,
  section + section h5 + ol,
  section + section h6 + ol {
    page-break-inside: auto; }
  article div.admonition,
  section + section div.admonition {
    page-break-inside: avoid; }
  article div.tabbed-content--wrap,
  section + section div.tabbed-content--wrap {
    page-break-inside: avoid; }
  article * + div.highlight,
  article * + div.tabbed-set,
  section + section * + div.highlight,
  section + section * + div.tabbed-set {
    page-break-before: avoid; }

section.two-columns {
  columns: 2;
  column-gap: 1cm; }

article h1 {
  border-bottom: 2px solid #f00; }

article h2 {
  border-bottom: 1px solid #f99; }

article h3 {
  border-bottom: 0.5px solid #eee; }

article h1 > .pdf-order,
article h2 > .pdf-order,
article h3 > .pdf-order {
  padding-left: 6px; }

article#doc-toc {
  margin: 0 .8rem 1.2rem;
  padding-top: .6rem;
  font-size: 12pt;
  line-height: 1.6; }
  article#doc-toc > h1 {
    margin: 0 0 2rem;
    color: rgba(0, 0, 0, 0.54);
    font-size: 1.2rem;
    font-weight: 300;
    letter-spacing: -.01em;
    page-break-after: auto;
    page-break-inside: auto;
    bookmark-level: none; }
    article#doc-toc > h1::before {
      display: block;
      margin-top: -9px;
      padding-top: 9px;
      content: ""; }
  article#doc-toc ul {
    list-style: none;
    padding-left: 0;
    margin-left: 1em;
    font-size: 8pt;
    page-break-inside: auto !important; }
  article#doc-toc li {
    list-style: none; }
    article#doc-toc li > a {
      color: inherit;
      text-decoration: none;
      padding-top: 0.4rem;
      border-bottom: 1px dotted #ddd;
      display: inline-block;
      width: 100%; }
      article#doc-toc li > a > .pdf-order {
        padding-right: 0.5em; }
      article#doc-toc li > a::after {
        float: right;
        content: target-counter(attr(href), page); }

@media print {
  html {
    font-size: 95%;
    font-family: 'Kelmscott Roman NF', 'Noto Serif JP', serif; }
  body {
    font-size: 10.5pt;
    font-family: 'Classico URW T OT', 'Noto Serif JP', serif; }
  article {
    font-size: 0.8rem;
    line-height: 1.6; }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  label {
    font-family: 'Gentium Book Basic', 'Helvetica Neue', Helvetica, Arial, 'Noto Sans JP', 'Roboto', sans-serif; }
  pre,
  code,
  var,
  samp,
  kbd,
  tt {
    font-family: 'Noto Sans Mono CJK JP', 'Courier New', monospace, serif;
    font-size: 0.8em; }
  pre code,
  pre var,
  pre samp,
  pre kbd,
  pre tt {
    font-size: 100%; } }
@page :first {
  @top-right {
    content: normal; }
  @bottom-center {
    content: normal; }
  @bottom-right {
    content: normal; } }

article#doc-cover {
  display: flex;
  flex-direction: column;
  height: 100vh; }
  article#doc-cover > .wrapper {
    flex: 1 0 auto;
    text-align: center;
    padding: 0 3rem; }
    article#doc-cover > .wrapper.upper {
      flex: 1 1 auto;
      max-height: 30vh; }
      article#doc-cover > .wrapper.upper > .logo {
        width: 100%;
        height: 100%;
        background-position: center bottom;
        background-repeat: no-repeat;
        background-size: contain; }
    article#doc-cover > .wrapper h1 {
      font-size: 36pt;
      line-height: 1.4; }
    article#doc-cover > .wrapper h2 {
      border: none;
      bookmark-level: none; }
  article#doc-cover > .properties {
    flex: 0 0 auto;
    text-align: right;
    padding: 0 2rem; }
    article#doc-cover > .properties p#copyright {
      font-size: 80%; }

article#doc-back_cover {
  page: back_cover;
  height: 100vh;
  display: flex;
  flex-direction: column;
  text-align: center; }
  article#doc-back_cover .wrapper {
    flex: 1 0 auto;
    display: inline-block;
    background: #eee; }
  article#doc-back_cover .qrcode {
    display: inline-block;
    flex: 0 0 auto;
    background: #eee; }
    article#doc-back_cover .qrcode > a {
      display: inline-block;
      padding: 0.5em 2em;
      border-radius: 1em;
      background-color: #fff; }
      article#doc-back_cover .qrcode > a img {
        width: 100%;
        height: auto; }

@page back_cover {
  background-color: #eee;
  @top-right {
    content: normal; }
  @bottom-center {
    content: normal; }
  @bottom-left {
    font-size: 8pt;
    content: string(title); }
  @bottom-right {
    font-size: 8pt;
    content: string(copyright); } }
</style><style>@media print {
  .md-typeset .tabbed-set {
    display: block; }
    .md-typeset .tabbed-set .tabbed-content--wrap {
      display: inline-block;
      width: 100%;
      margin-bottom: 0.25rem; }
      .md-typeset .tabbed-set .tabbed-content--wrap > input {
        display: none; }
      .md-typeset .tabbed-set .tabbed-content--wrap > label {
        background-color: rgba(170, 170, 170, 0.2);
        padding: 0.2rem 2rem;
        margin: 0;
        font-weight: 600;
        color: #666;
        border-radius: 3px 3px 0 0;
        border-bottom-color: transparent; }
      .md-typeset .tabbed-set .tabbed-content--wrap > .tabbed-content {
        display: block;
        box-shadow: none; }
  .md-typeset .admonition-title + .tabbed-set:last-child,
  .md-typeset summary + .tabbed-set:last-child {
    margin-top: 0.5rem; }
  .md-typeset > details summary::after {
    display: none; }
  .md-typeset > div, .md-typeset > div.admonition, .md-typeset > details, .md-typeset > div.tabbed-set, .md-typeset > blockquote, .md-typeset > mark, .md-typeset > table, .md-typeset > p {
    margin-left: 0.7rem; }
  .md-typeset > table.highlighttable {
    margin: 0 0 0 0.7rem; }
  .md-typeset table.highlighttable,
  .md-typeset table.highlighttable > tbody {
    width: 100%; }
  .md-typeset table.highlighttable {
    padding-bottom: 0.5em; }
    .md-typeset table.highlighttable .linenos {
      padding-bottom: 0; }
  .md-typeset > ul {
    margin-left: 1.5rem; }
  .md-typeset h4,
  .md-typeset h5,
  .md-typeset h6 {
    margin-left: 0.25rem; }
  .md-typeset *:not(h3) + h4 {
    margin-top: 1.5rem; }
  .md-typeset hr {
    border-bottom: 1px dotted #999; }
  .md-typeset .footnote {
    line-height: 1.1; }
  .md-typeset table:not([class]) th, .md-typeset table:not([class]) td {
    padding: 0.5em 1.25rem 0.4em; }
  .md-typeset table:not([class]) td {
    border-bottom: 1px solid #eee; }
  .md-typeset span.twemoji {
    vertical-align: middle;
    height: 1.125rem;
    display: inline-block; }
    .md-typeset span.twemoji > img {
      height: 1.125rem;
      vertical-align: middle;
      display: inline-block; } }
.md-typeset kbd {
  vertical-align: middle;
  border-color: #b8b8b8;
  border-style: outset;
  border-width: .05rem .075rem .1rem .075rem;
  border-radius: .25rem;
  box-shadow: none; }

:root {
  --print-md-admonition-icon--note: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23448aff"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>');
  --print-md-admonition-icon--abstract: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2300b0ff"><path d="M4 5h16v2H4V5m0 4h16v2H4V9m0 4h16v2H4v-2m0 4h10v2H4v-2z"/></svg>');
  --print-md-admonition-icon--info: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2300b8d4"><path d="M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"/></svg>');
  --print-md-admonition-icon--tip: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2300bfa5"><path d="M17.66 11.2c-.23-.3-.51-.56-.77-.82-.67-.6-1.43-1.03-2.07-1.66C13.33 7.26 13 4.85 13.95 3c-.95.23-1.78.75-2.49 1.32-2.59 2.08-3.61 5.75-2.39 8.9.04.1.08.2.08.33 0 .22-.15.42-.35.5-.23.1-.47.04-.66-.12a.58.58 0 01-.14-.17c-1.13-1.43-1.31-3.48-.55-5.12C5.78 10 4.87 12.3 5 14.47c.06.5.12 1 .29 1.5.14.6.41 1.2.71 1.73 1.08 1.73 2.95 2.97 4.96 3.22 2.14.27 4.43-.12 6.07-1.6 1.83-1.66 2.47-4.32 1.53-6.6l-.13-.26c-.21-.46-.77-1.26-.77-1.26m-3.16 6.3c-.28.24-.74.5-1.1.6-1.12.4-2.24-.16-2.9-.82 1.19-.28 1.9-1.16 2.11-2.05.17-.8-.15-1.46-.28-2.23-.12-.74-.1-1.37.17-2.06.19.38.39.76.63 1.06.77 1 1.98 1.44 2.24 2.8.04.14.06.28.06.43.03.82-.33 1.72-.93 2.27z"/></svg>');
  --print-md-admonition-icon--success: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2300c853"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --print-md-admonition-icon--question: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2364dd17"><path d="M15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 00-2-2 2 2 0 00-2 2H8a4 4 0 014-4 4 4 0 014 4 3.2 3.2 0 01-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10c0-5.53-4.5-10-10-10z"/></svg>');
  --print-md-admonition-icon--warning: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff9100"><path d="M13 14h-2V9h2m0 9h-2v-2h2M1 21h22L12 2 1 21z"/></svg>');
  --print-md-admonition-icon--failure: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff5252"><path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41 15.59 7z"/></svg>');
  --print-md-admonition-icon--danger: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff1744"><path d="M11.5 20l4.86-9.73H13V4l-5 9.73h3.5V20M12 2c2.75 0 5.1 1 7.05 2.95C21 6.9 22 9.25 22 12s-1 5.1-2.95 7.05C17.1 21 14.75 22 12 22s-5.1-1-7.05-2.95C3 17.1 2 14.75 2 12s1-5.1 2.95-7.05C6.9 3 9.25 2 12 2z"/></svg>');
  --print-md-admonition-icon--bug: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23f50057"><path d="M14 12h-4v-2h4m0 6h-4v-2h4m6-6h-2.81a5.985 5.985 0 00-1.82-1.96L17 4.41 15.59 3l-2.17 2.17a6.002 6.002 0 00-2.83 0L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8z"/></svg>');
  --print-md-admonition-icon--example: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23651fff"><path d="M7 13v-2h14v2H7m0 6v-2h14v2H7M7 7V5h14v2H7M3 8V5H2V4h2v4H3m-1 9v-1h3v4H2v-1h2v-.5H3v-1h1V17H2m2.25-7a.75.75 0 01.75.75c0 .2-.08.39-.21.52L3.12 13H5v1H2v-.92L4 11H2v-1h2.25z"/></svg>');
  --print-md-admonition-icon--quote: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%239e9e9e"><path d="M14 17h3l2-4V7h-6v6h3M6 17h3l2-4V7H5v6h3l-2 4z"/></svg>'); }

@media print {
  .md-typeset .admonition-title {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .admonition-title::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--note); }
  .md-typeset .note > .admonition-title, .md-typeset .note > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .note > .admonition-title::before, .md-typeset .note > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--note); }
  .md-typeset .abstract > .admonition-title, .md-typeset .tldr > .admonition-title, .md-typeset .summary > .admonition-title, .md-typeset .abstract > summary, .md-typeset .tldr > summary, .md-typeset .summary > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .abstract > .admonition-title::before, .md-typeset .tldr > .admonition-title::before, .md-typeset .summary > .admonition-title::before, .md-typeset .abstract > summary::before, .md-typeset .tldr > summary::before, .md-typeset .summary > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--abstract); }
  .md-typeset .info > .admonition-title, .md-typeset .todo > .admonition-title, .md-typeset .info > summary, .md-typeset .todo > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .info > .admonition-title::before, .md-typeset .todo > .admonition-title::before, .md-typeset .info > summary::before, .md-typeset .todo > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--info); }
  .md-typeset .tip > .admonition-title, .md-typeset .important > .admonition-title, .md-typeset .hint > .admonition-title, .md-typeset .tip > summary, .md-typeset .important > summary, .md-typeset .hint > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .tip > .admonition-title::before, .md-typeset .important > .admonition-title::before, .md-typeset .hint > .admonition-title::before, .md-typeset .tip > summary::before, .md-typeset .important > summary::before, .md-typeset .hint > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--tip); }
  .md-typeset .success > .admonition-title, .md-typeset .done > .admonition-title, .md-typeset .check > .admonition-title, .md-typeset .success > summary, .md-typeset .done > summary, .md-typeset .check > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .success > .admonition-title::before, .md-typeset .done > .admonition-title::before, .md-typeset .check > .admonition-title::before, .md-typeset .success > summary::before, .md-typeset .done > summary::before, .md-typeset .check > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--success); }
  .md-typeset .question > .admonition-title, .md-typeset .faq > .admonition-title, .md-typeset .help > .admonition-title, .md-typeset .question > summary, .md-typeset .faq > summary, .md-typeset .help > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .question > .admonition-title::before, .md-typeset .faq > .admonition-title::before, .md-typeset .help > .admonition-title::before, .md-typeset .question > summary::before, .md-typeset .faq > summary::before, .md-typeset .help > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--question); }
  .md-typeset .warning > .admonition-title, .md-typeset .attention > .admonition-title, .md-typeset .caution > .admonition-title, .md-typeset .warning > summary, .md-typeset .attention > summary, .md-typeset .caution > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .warning > .admonition-title::before, .md-typeset .attention > .admonition-title::before, .md-typeset .caution > .admonition-title::before, .md-typeset .warning > summary::before, .md-typeset .attention > summary::before, .md-typeset .caution > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--warning); }
  .md-typeset .failure > .admonition-title, .md-typeset .missing > .admonition-title, .md-typeset .fail > .admonition-title, .md-typeset .failure > summary, .md-typeset .missing > summary, .md-typeset .fail > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .failure > .admonition-title::before, .md-typeset .missing > .admonition-title::before, .md-typeset .fail > .admonition-title::before, .md-typeset .failure > summary::before, .md-typeset .missing > summary::before, .md-typeset .fail > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--failure); }
  .md-typeset .danger > .admonition-title, .md-typeset .error > .admonition-title, .md-typeset .danger > summary, .md-typeset .error > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .danger > .admonition-title::before, .md-typeset .error > .admonition-title::before, .md-typeset .danger > summary::before, .md-typeset .error > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--danger); }
  .md-typeset .bug > .admonition-title, .md-typeset .bug > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .bug > .admonition-title::before, .md-typeset .bug > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--bug); }
  .md-typeset .example > .admonition-title, .md-typeset .example > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .example > .admonition-title::before, .md-typeset .example > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--example); }
  .md-typeset .quote > .admonition-title, .md-typeset .cite > .admonition-title, .md-typeset .quote > summary, .md-typeset .cite > summary {
    padding: .6rem .6rem .4rem 2.2rem; }
  .md-typeset .quote > .admonition-title::before, .md-typeset .cite > .admonition-title::before, .md-typeset .quote > summary::before, .md-typeset .cite > summary::before {
    margin-top: -0.15rem;
    background-color: transparent;
    background-image: var(--print-md-admonition-icon--quote); } }

:root {
  --print-md-footnotes-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23000000de"><path d="M19 7v4H5.83l3.58-3.59L8 6l-6 6 6 6 1.41-1.42L5.83 13H21V7h-2z"/></svg>'); }

@media print {
  .md-typeset .footnote-backref::before {
    background-color: transparent;
    background-image: var(--print-md-footnotes-icon); } }

:root {
  --print-md-details-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="hsla(0, 0%, 0%, 0.87)"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>'); }

@media print {
  .md-typeset summary::after {
    background-color: transparent;
    background-image: var(--print-md-details-icon);
    -webkit-mask-image: none;
    mask-image: none; } }

:root {
  --print-md-tasklist-icon: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ddd"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>');
  --print-md-tasklist-icon--checked: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%2300e676"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2m-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>'); }

@media print {
  .md-typeset .task-list-control .task-list-indicator::before {
    background-color: transparent;
    background-image: var(--print-md-tasklist-icon); }
  .md-typeset .task-list-control [type=checkbox]:checked + .task-list-indicator::before {
    background-color: transparent;
    background-image: var(--print-md-tasklist-icon--checked); } }

/*# sourceMappingURL=material-polyfills.css.map*/
</style></head><body><article id="doc-cover">
<div class="wrapper upper">
<div class="logo" style="background-image: url();"></div>
</div>
<div class="wrapper">
<h1>Lista Programação Concorrente e distribuída</h1>
<h2>Resolução feita por Samuel Cavalcanti</h2>
</div>
<div class="properties">
<address>
<p id="author">Samuel Cavalcanti</p>
<p id="copyright">Copyright © 2022 Samuel Cavalcanti</p>
</address>
</div>
</article><article id="doc-toc"><h1>Table of contents</h1><ul><li><a href="#.:lista-de-execicios-de-programacao-concorrente-e-distribuida"><span class="pdf-order">1. </span>Lista de Execícios de Programação Concorrente e distribuída</a></li><li><a href="#INUGC4DUMVZCAMI/"><span class="pdf-order">2. </span>Chapter 1</a><ul><li><a href="#chapter_1/Readme/:capitulo-1"><span class="pdf-order">2.1 </span>Capítulo 1</a></li><li><a href="#INUGC4DUMVZCAMI/KF2WK43UNFXW4IBR/"><span class="pdf-order">2.2 </span>Question 1</a></li><li><a href="#INUGC4DUMVZCAMI/KF2WK43UNFXW4IBS/"><span class="pdf-order">2.3 </span>Question 2</a></li><li><a href="#INUGC4DUMVZCAMI/KF2WK43UNFXW4IBT/"><span class="pdf-order">2.4 </span>Question 3</a></li><li><a href="#INUGC4DUMVZCAMI/KF2WK43UNFXW4IBU/"><span class="pdf-order">2.5 </span>Question 4</a></li><li><a href="#INUGC4DUMVZCAMI/KF2WK43UNFXW4IBV/"><span class="pdf-order">2.6 </span>Question 5</a></li><li><a href="#INUGC4DUMVZCAMI/KF2WK43UNFXW4IBW/"><span class="pdf-order">2.7 </span>Question 6</a></li><li><a href="#INUGC4DUMVZCAMI/KF2WK43UNFXW4IBZ/"><span class="pdf-order">2.8 </span>Question 9</a></li></ul></li><li><a href="#INUGC4DUMVZCAMQ/"><span class="pdf-order">3. </span>Chapter 2</a><ul><li><a href="#chapter_2/Readme/:capitulo-2"><span class="pdf-order">3.1 </span>Capítulo 2</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGE/"><span class="pdf-order">3.2 </span>Question 01</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGI/"><span class="pdf-order">3.3 </span>Question 02</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGM/"><span class="pdf-order">3.4 </span>Question 03</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGU/"><span class="pdf-order">3.5 </span>Question 05</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQG4/"><span class="pdf-order">3.6 </span>Question 07</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGA/"><span class="pdf-order">3.7 </span>Question 10</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGU/"><span class="pdf-order">3.8 </span>Question 15</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGY/"><span class="pdf-order">3.9 </span>Question 16</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRG4/"><span class="pdf-order">3.10 </span>Question 17</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRHE/"><span class="pdf-order">3.11 </span>Question 19</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGA/"><span class="pdf-order">3.12 </span>Question 20</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGE/"><span class="pdf-order">3.13 </span>Question 21</a></li><li><a href="#INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGQ/"><span class="pdf-order">3.14 </span>Question 24</a></li></ul></li><li><a href="#INUGC4DUMVZCAMY/"><span class="pdf-order">4. </span>Chapter 3</a><ul><li><a href="#chapter_3/Readme/:capitulo-3"><span class="pdf-order">4.1 </span>Capítulo 3</a></li><li><a href="#INUGC4DUMVZCAMY/KF2WK43UNFXW4IBQGI/"><span class="pdf-order">4.2 </span>Question 02</a></li></ul></li></ul></article><article class="md-content__inner md-typeset" data-url="/." id=".:">
<h1 id=".:lista-de-execicios-de-programacao-concorrente-e-distribuida"><span class="pdf-order">1. </span>Lista de Execícios de Programação Concorrente e distribuída</h1>
<ul class="task-list">
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> <a href="#chapter_1/Readme/:">Capítulo 1</a> (7 questões)</li>
<li class="task-list-item"><label class="task-list-control"><input checked="" disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> <a href="#chapter_2/Readme/:">Capítulo 2</a> (13 questões)</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> <a href="#chapter_3/Readme/:">Capítulo 3</a> (16 questões)</li>
<li class="task-list-item"><label class="task-list-control"><input disabled="" type="checkbox"><span class="task-list-indicator"></span></input></label> Capítulo 5  (12 questões)</li>
</ul>
</article><article class="md-content__inner md-typeset" data-url="/INUGC4DUMVZCAMI/" id="INUGC4DUMVZCAMI/:"><h1 id="INUGC4DUMVZCAMI/"><span class="pdf-order">2. </span>Chapter 1</h1><section class="md-typeset" data-url="/chapter_1/Readme/" id="chapter_1/Readme/:">
<h2 id="chapter_1/Readme/:capitulo-1"><span class="pdf-order">2.1 </span>Capítulo 1</h2>
<p>Capítulo 1: 1-6, 9; (7 questões)</p>
<ol>
<li>
<p>Devise formulas for the functions that calculate <strong><em>my_first_i</em></strong> and <strong><em>my_last_i</em></strong> in the global sum example. Remember that each core should be assigned roughly the same number of elements of computations in the loop. Hint: First consider the case when <strong><em>n</em></strong> is evenly divisible by <strong><em>p</em></strong></p>
<ul>
<li><a href="#chapter_1/question_1/Readme/:">Resposta Questão 1</a> </li>
</ul>
</li>
<li>
<p>We’ve implicitly assumed that each call to <strong><em>Compute_next_value</em></strong> requires roughly the same amount of work as the other calls. How would you change your answer to the preceding question if call <em>i</em> = <em>k</em> requires <em>k</em> + 1 times as much work as the call with <em>i</em> = 0? So if the first call (<em>i</em> = 0) requires 2 milliseconds, the second call (<em>i</em> = 1) requires 4, the third (<em>i</em> = 2) requires 6, and so on.</p>
<ul>
<li><a href="#chapter_1/question_2/Readme/:">Resposta Questão 2</a></li>
</ul>
</li>
<li>
<p>Try to write pseudo-code for the tree-structured global sum illustrated in
Figure 1.1. Assume the number of cores is a power of two (1, 2, 4, 8, . . . ).</p>
<ul>
<li><a href="#chapter_1/question_3/Readme/:">Resposta Questão 3</a></li>
</ul>
</li>
<li>
<p>As an alternative to the approach outlined in the preceding problem we can use C’s bitwise operators to implement the tree-structured global sum. In order to see how this works, it helps to write down the binary (base 2) representation of each of the core ranks, and note the pairings during each stage</p>
<ul>
<li><a href="#chapter_1/question_4/Readme/:">Resposta Questão 4</a> </li>
</ul>
</li>
<li>
<p>What happens if your pseudo-code in Exercise 1.3 or Exercise 1.4 is run when the number of cores is not a power of two (e.g., 3, 5, 6, 7) ? Can you modify the
pseudo-code so that it will work correctly regardless of the number of cores ?</p>
<ul>
<li><a href="#chapter_1/question_5/Readme/:">Resposta Questão 5</a></li>
</ul>
</li>
<li>
<p>Derive formulas for the number of receives and additions that core 0 carries out using:<br/>
   a. the original pseudo-code for a global sum<br/>
   b. the tree-structured global sum.<br/>
Make a table showing the numbers of receives and additions carried out by core
0 when the two sums are used with 2, 4, 8, . . . , 1024 cores.</p>
<ul>
<li><a href="#chapter_1/question_6/Readme/:">Resposta Questão 6</a></li>
</ul>
</li>
<li></li>
<li></li>
<li>
<p>Write an essay describing a research problem in your major that would benefit from the use of parallel computing. Provide a rough outline of how parallelism would be used. Would you use task- or data-parallelism ?</p>
<ul>
<li><a href="#chapter_1/question_9/Readme/:">Resposta Questão 9</a></li>
</ul>
</li>
</ol>
</section><section class="md-typeset" data-url="/INUGC4DUMVZCAMI/KF2WK43UNFXW4IBR/" id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBR/:"><h2 id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBR/"><span class="pdf-order">2.2 </span>Question 1</h2><section class="md-typeset" data-url="/chapter_1/question_1/Readme/" id="chapter_1/question_1/Readme/:">
<h3 id="chapter_1/question_1/Readme/:questao-1"><span class="pdf-order">2.2.1 </span>Questão 1</h3>
<p>Devise formulas for the functions that calculate <strong><em>my_first_i</em></strong> and <strong><em>my_last_i</em></strong> in the global sum example. Remember that each core should be assigned roughly the same number of elements of computations in the loop. Hint: First consider the case when <strong><em>n</em></strong> is evenly divisible by <strong><em>p</em></strong></p>
<p><div class="highlight"><pre><span></span><code><a href="#chapter_1/question_1/Readme/:__codelineno-0-1" id="chapter_1/question_1/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-2" id="chapter_1/question_1/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-3" id="chapter_1/question_1/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-4" id="chapter_1/question_1/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">last</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-5" id="chapter_1/question_1/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a><span class="p">};</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-6" id="chapter_1/question_1/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">new_range</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">thread_index</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-7" id="chapter_1/question_1/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-8" id="chapter_1/question_1/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-9" id="chapter_1/question_1/Readme/:__codelineno-0-9" name="__codelineno-0-9"></a>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-10" id="chapter_1/question_1/Readme/:__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-11" id="chapter_1/question_1/Readme/:__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-12" id="chapter_1/question_1/Readme/:__codelineno-0-12" name="__codelineno-0-12"></a>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-13" id="chapter_1/question_1/Readme/:__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">rest</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-14" id="chapter_1/question_1/Readme/:__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-15" id="chapter_1/question_1/Readme/:__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">division</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-16" id="chapter_1/question_1/Readme/:__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">thread_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">division</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-17" id="chapter_1/question_1/Readme/:__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-18" id="chapter_1/question_1/Readme/:__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">    </span><span class="k">else</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-19" id="chapter_1/question_1/Readme/:__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-20" id="chapter_1/question_1/Readme/:__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-21" id="chapter_1/question_1/Readme/:__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">thread_index</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-22" id="chapter_1/question_1/Readme/:__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-23" id="chapter_1/question_1/Readme/:__codelineno-0-23" name="__codelineno-0-23"></a>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-24" id="chapter_1/question_1/Readme/:__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-25" id="chapter_1/question_1/Readme/:__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-26" id="chapter_1/question_1/Readme/:__codelineno-0-26" name="__codelineno-0-26"></a>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-27" id="chapter_1/question_1/Readme/:__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-28" id="chapter_1/question_1/Readme/:__codelineno-0-28" name="__codelineno-0-28"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-29" id="chapter_1/question_1/Readme/:__codelineno-0-29" name="__codelineno-0-29"></a>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-30" id="chapter_1/question_1/Readme/:__codelineno-0-30" name="__codelineno-0-30"></a><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">new_range_2</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">thread_index</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-31" id="chapter_1/question_1/Readme/:__codelineno-0-31" name="__codelineno-0-31"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-32" id="chapter_1/question_1/Readme/:__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-33" id="chapter_1/question_1/Readme/:__codelineno-0-33" name="__codelineno-0-33"></a>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-34" id="chapter_1/question_1/Readme/:__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-35" id="chapter_1/question_1/Readme/:__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-36" id="chapter_1/question_1/Readme/:__codelineno-0-36" name="__codelineno-0-36"></a>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-37" id="chapter_1/question_1/Readme/:__codelineno-0-37" name="__codelineno-0-37"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">thread_index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-38" id="chapter_1/question_1/Readme/:__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-39" id="chapter_1/question_1/Readme/:__codelineno-0-39" name="__codelineno-0-39"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-40" id="chapter_1/question_1/Readme/:__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-41" id="chapter_1/question_1/Readme/:__codelineno-0-41" name="__codelineno-0-41"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-42" id="chapter_1/question_1/Readme/:__codelineno-0-42" name="__codelineno-0-42"></a><span class="w">    </span><span class="k">else</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-43" id="chapter_1/question_1/Readme/:__codelineno-0-43" name="__codelineno-0-43"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-44" id="chapter_1/question_1/Readme/:__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-45" id="chapter_1/question_1/Readme/:__codelineno-0-45" name="__codelineno-0-45"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">division</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-46" id="chapter_1/question_1/Readme/:__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-47" id="chapter_1/question_1/Readme/:__codelineno-0-47" name="__codelineno-0-47"></a>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-48" id="chapter_1/question_1/Readme/:__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_1/Readme/:__codelineno-0-49" id="chapter_1/question_1/Readme/:__codelineno-0-49" name="__codelineno-0-49"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
Saída:
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_1/Readme/:__codelineno-1-1" id="chapter_1/question_1/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a>First  0 Last  20 m Last - First: 20
<a href="#chapter_1/question_1/Readme/:__codelineno-1-2" id="chapter_1/question_1/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a>First  20 Last  40 m Last - First: 20
<a href="#chapter_1/question_1/Readme/:__codelineno-1-3" id="chapter_1/question_1/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a>First  40 Last  60 m Last - First: 20
<a href="#chapter_1/question_1/Readme/:__codelineno-1-4" id="chapter_1/question_1/Readme/:__codelineno-1-4" name="__codelineno-1-4"></a>First  60 Last  80 m Last - First: 20
<a href="#chapter_1/question_1/Readme/:__codelineno-1-5" id="chapter_1/question_1/Readme/:__codelineno-1-5" name="__codelineno-1-5"></a>First  80 Last  100 m Last - First: 20
<a href="#chapter_1/question_1/Readme/:__codelineno-1-6" id="chapter_1/question_1/Readme/:__codelineno-1-6" name="__codelineno-1-6"></a>First  0 Last  25 m Last - First: 25
<a href="#chapter_1/question_1/Readme/:__codelineno-1-7" id="chapter_1/question_1/Readme/:__codelineno-1-7" name="__codelineno-1-7"></a>First  25 Last  50 m Last - First: 25
<a href="#chapter_1/question_1/Readme/:__codelineno-1-8" id="chapter_1/question_1/Readme/:__codelineno-1-8" name="__codelineno-1-8"></a>First  50 Last  75 m Last - First: 25
<a href="#chapter_1/question_1/Readme/:__codelineno-1-9" id="chapter_1/question_1/Readme/:__codelineno-1-9" name="__codelineno-1-9"></a>First  75 Last  99 m Last - First: 24
<a href="#chapter_1/question_1/Readme/:__codelineno-1-10" id="chapter_1/question_1/Readme/:__codelineno-1-10" name="__codelineno-1-10"></a>First  99 Last  123 m Last - First: 24
<a href="#chapter_1/question_1/Readme/:__codelineno-1-11" id="chapter_1/question_1/Readme/:__codelineno-1-11" name="__codelineno-1-11"></a>Test question 1 success
<a href="#chapter_1/question_1/Readme/:__codelineno-1-12" id="chapter_1/question_1/Readme/:__codelineno-1-12" name="__codelineno-1-12"></a>OLD new range
<a href="#chapter_1/question_1/Readme/:__codelineno-1-13" id="chapter_1/question_1/Readme/:__codelineno-1-13" name="__codelineno-1-13"></a>First  0 Last  27 m Last - First: 27
<a href="#chapter_1/question_1/Readme/:__codelineno-1-14" id="chapter_1/question_1/Readme/:__codelineno-1-14" name="__codelineno-1-14"></a>First  27 Last  51 m Last - First: 24
<a href="#chapter_1/question_1/Readme/:__codelineno-1-15" id="chapter_1/question_1/Readme/:__codelineno-1-15" name="__codelineno-1-15"></a>First  51 Last  75 m Last - First: 24
<a href="#chapter_1/question_1/Readme/:__codelineno-1-16" id="chapter_1/question_1/Readme/:__codelineno-1-16" name="__codelineno-1-16"></a>First  75 Last  99 m Last - First: 24
<a href="#chapter_1/question_1/Readme/:__codelineno-1-17" id="chapter_1/question_1/Readme/:__codelineno-1-17" name="__codelineno-1-17"></a>First  99 Last  123 m Last - First: 24
</code></pre></div></p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMI/KF2WK43UNFXW4IBS/" id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBS/:"><h2 id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBS/"><span class="pdf-order">2.3 </span>Question 2</h2><section class="md-typeset" data-url="/chapter_1/question_2/Readme/" id="chapter_1/question_2/Readme/:">
<h3 id="chapter_1/question_2/Readme/:questao-2"><span class="pdf-order">2.3.1 </span>Questão 2</h3>
<p>We’ve implicitly assumed that each call to <strong><em>Compute_next_value</em></strong> requires roughly the same amount of work as the other calls. How would you change your answer to the preceding question if call <em>i</em> = <em>k</em> requires <em>k</em> + 1 times as much work as the call with <em>i</em> = 0? So if the first call (<em>i</em> = 0) requires 2 milliseconds, the second call (<em>i</em> = 1) requires 4, the third (<em>i</em> = 2) requires 6, and so on.</p>
<h4 id="chapter_1/question_2/Readme/:somatorio-de-gauss">Somatório de Gauss</h4>
<p><img alt="Somatório de Gauss" src="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/chapter_1/question_2/gauss_summation.png" style=""/></p>
<p>Exemplo,  Supondo que k = 10, temos o seguinte vetor de índice:<br/>
indices = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]<br/>
utilizando a lógica da somatório de gauss e organizando os indicies temos um array normalizado:<br/>
normalized_array =   [ [0, 9], [1, 8], [2, 7], [3, 6], [4, 5] ]<br/>
onde o custo  de cada índice do normalized_array é igual, por tanto
podemos usar o algoritmo da questão 1 aplicado ao normalized_array
resultando:</p>
<table>
<thead>
<tr>
<th>Thread</th>
<th>normalized_array</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0,1</td>
</tr>
<tr>
<td>2</td>
<td>2,3</td>
</tr>
<tr>
<td>3</td>
<td>4</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Thread</th>
<th>Compute_next_value</th>
<th>cost</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>0, 9,1, 8</td>
<td>44</td>
</tr>
<tr>
<td>2</td>
<td>2, 7,3, 6</td>
<td>44</td>
</tr>
<tr>
<td>3</td>
<td>4, 5</td>
<td>22</td>
</tr>
</tbody>
</table>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMI/KF2WK43UNFXW4IBT/" id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBT/:"><h2 id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBT/"><span class="pdf-order">2.4 </span>Question 3</h2><section class="md-typeset" data-url="/chapter_1/question_3/Readme/" id="chapter_1/question_3/Readme/:">
<h3 id="chapter_1/question_3/Readme/:questao-3"><span class="pdf-order">2.4.1 </span>Questão 3</h3>
<p>Try to write pseudo-code for the tree-structured global sum illustrated in
Figure 1.1. Assume the number of cores is a power of two (1, 2, 4, 8, . . . ).</p>
<p>Para criar a árvore, foi considerado que o vetor principal já foi igualmente espaçado entre as <em>p</em> threads, usando o algoritmo da questão 1.</p>
<h4 id="chapter_1/question_3/Readme/:representacao-de-um-no">Representação de um Nó</h4>
<p>Neste caso foi representado o nó, como uma estrutura que possui um vetor de vizinhos e outro ponteiro para um vetor de inteiros, na prática,
o ponteiro para um vetor de inteiros, seria usando o design pattern chamado <strong>Future</strong>, ou um <strong>Option\&lt;Future&gt;</strong>. </p>
<p>Também foi criado dois construtores um construtor que representa,
a inicialização do Nó por meio dos seus vizinhos a esquerda e direita,
usando na criação de nós intermediários  da árvore, e a inicialização
do Nó por meio do seu dado, os nós inicializados por meio dos dados
abstrai os <strong>núcleos</strong> ou as <strong>threads</strong> que estão sendo usadas para
executar o algoritmo de alto custo computacional. </p>
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_3/Readme/:__codelineno-0-1" id="chapter_1/question_3/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Node</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-2" id="chapter_1/question_3/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-3" id="chapter_1/question_3/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">public</span><span class="o">:</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-4" id="chapter_1/question_3/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">neighborhoods</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-5" id="chapter_1/question_3/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-6" id="chapter_1/question_3/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="n">Node</span><span class="p">(</span><span class="n">Node</span><span class="w"> </span><span class="o">*</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="o">*</span><span class="n">right</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-7" id="chapter_1/question_3/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-8" id="chapter_1/question_3/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">        </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">neighborhoods</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">left</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-9" id="chapter_1/question_3/Readme/:__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">        </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">neighborhoods</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">right</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-10" id="chapter_1/question_3/Readme/:__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">        </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">nullptr</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-11" id="chapter_1/question_3/Readme/:__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-12" id="chapter_1/question_3/Readme/:__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="n">Node</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-13" id="chapter_1/question_3/Readme/:__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-14" id="chapter_1/question_3/Readme/:__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">        </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-15" id="chapter_1/question_3/Readme/:__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-16" id="chapter_1/question_3/Readme/:__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">    </span><span class="o">~</span><span class="n">Node</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-17" id="chapter_1/question_3/Readme/:__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-18" id="chapter_1/question_3/Readme/:__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">        </span><span class="k">delete</span><span class="w"> </span><span class="k">this</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-19" id="chapter_1/question_3/Readme/:__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-0-20" id="chapter_1/question_3/Readme/:__codelineno-0-20" name="__codelineno-0-20"></a><span class="p">};</span><span class="w"></span>
</code></pre></div>
<h4 id="chapter_1/question_3/Readme/:funcao-que-cria-a-arvore">Função que cria a Árvore</h4>
<p>Para criar a Árvore foi feita uma função recursiva que
a partir do nível mais baixo da árvore cria a raiz, ou seja,
a partir um vetor com <em>p</em> Nós ,a função vai sendo chamada recursivamente,
onde a cada chamada vai-se criando um nível acima da árvore, até
que se atinja a raiz, onde a cada nível o número de nós é dividido
por 2. <strong>Caso o número de nós inicial não for divisível pro 2, o algoritmo não funciona</strong></p>
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_3/Readme/:__codelineno-1-1" id="chapter_1/question_3/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">create_tree_from_core_nodes</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">nodes</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-2" id="chapter_1/question_3/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-3" id="chapter_1/question_3/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-4" id="chapter_1/question_3/Readme/:__codelineno-1-4" name="__codelineno-1-4"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-5" id="chapter_1/question_3/Readme/:__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-6" id="chapter_1/question_3/Readme/:__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-7" id="chapter_1/question_3/Readme/:__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-8" id="chapter_1/question_3/Readme/:__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-9" id="chapter_1/question_3/Readme/:__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w">  </span><span class="c1">// Left receive value from right</span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-10" id="chapter_1/question_3/Readme/:__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">left</span><span class="p">};</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-11" id="chapter_1/question_3/Readme/:__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-12" id="chapter_1/question_3/Readme/:__codelineno-1-12" name="__codelineno-1-12"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-13" id="chapter_1/question_3/Readme/:__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">new_nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="p">{};</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-14" id="chapter_1/question_3/Readme/:__codelineno-1-14" name="__codelineno-1-14"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-15" id="chapter_1/question_3/Readme/:__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-16" id="chapter_1/question_3/Readme/:__codelineno-1-16" name="__codelineno-1-16"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-17" id="chapter_1/question_3/Readme/:__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"> </span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-18" id="chapter_1/question_3/Readme/:__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-19" id="chapter_1/question_3/Readme/:__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"> </span><span class="c1">// Left receive value from right</span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-20" id="chapter_1/question_3/Readme/:__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">        </span><span class="n">new_nodes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">left</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-21" id="chapter_1/question_3/Readme/:__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-22" id="chapter_1/question_3/Readme/:__codelineno-1-22" name="__codelineno-1-22"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-23" id="chapter_1/question_3/Readme/:__codelineno-1-23" name="__codelineno-1-23"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">create_tree_from_core_nodes</span><span class="p">(</span><span class="n">new_nodes</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-24" id="chapter_1/question_3/Readme/:__codelineno-1-24" name="__codelineno-1-24"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-25" id="chapter_1/question_3/Readme/:__codelineno-1-25" name="__codelineno-1-25"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-26" id="chapter_1/question_3/Readme/:__codelineno-1-26" name="__codelineno-1-26"></a><span class="n">Node</span><span class="w"> </span><span class="o">*</span><span class="n">create_new_tree</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">nodes</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-27" id="chapter_1/question_3/Readme/:__codelineno-1-27" name="__codelineno-1-27"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-28" id="chapter_1/question_3/Readme/:__codelineno-1-28" name="__codelineno-1-28"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">create_tree_from_core_nodes</span><span class="p">(</span><span class="n">nodes</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-1-29" id="chapter_1/question_3/Readme/:__codelineno-1-29" name="__codelineno-1-29"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Após criar a árvore basta percorrer-lá recursivamente, lembrando que na prática
<strong><em>compute_data</em></strong>, seria um <em>join</em>, ou um <em>await</em>, de uma thread.</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_3/Readme/:__codelineno-2-1" id="chapter_1/question_3/Readme/:__codelineno-2-1" name="__codelineno-2-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">compute_data</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-2" id="chapter_1/question_3/Readme/:__codelineno-2-2" name="__codelineno-2-2"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-3" id="chapter_1/question_3/Readme/:__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-4" id="chapter_1/question_3/Readme/:__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-5" id="chapter_1/question_3/Readme/:__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-6" id="chapter_1/question_3/Readme/:__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-7" id="chapter_1/question_3/Readme/:__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">        </span><span class="n">total</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">data</span><span class="o">-&gt;</span><span class="n">at</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-8" id="chapter_1/question_3/Readme/:__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-9" id="chapter_1/question_3/Readme/:__codelineno-2-9" name="__codelineno-2-9"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-10" id="chapter_1/question_3/Readme/:__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">total</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-11" id="chapter_1/question_3/Readme/:__codelineno-2-11" name="__codelineno-2-11"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-12" id="chapter_1/question_3/Readme/:__codelineno-2-12" name="__codelineno-2-12"></a><span class="kt">int</span><span class="w"> </span><span class="nf">compute_node</span><span class="p">(</span><span class="n">Node</span><span class="w"> </span><span class="o">&amp;</span><span class="n">node</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-13" id="chapter_1/question_3/Readme/:__codelineno-2-13" name="__codelineno-2-13"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-14" id="chapter_1/question_3/Readme/:__codelineno-2-14" name="__codelineno-2-14"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-15" id="chapter_1/question_3/Readme/:__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">result_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">nullptr</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">compute_data</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">data</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-16" id="chapter_1/question_3/Readme/:__codelineno-2-16" name="__codelineno-2-16"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-17" id="chapter_1/question_3/Readme/:__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">neighborhood</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">neighborhoods</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-18" id="chapter_1/question_3/Readme/:__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">        </span><span class="n">result_data</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">compute_node</span><span class="p">(</span><span class="o">*</span><span class="n">neighborhood</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-19" id="chapter_1/question_3/Readme/:__codelineno-2-19" name="__codelineno-2-19"></a>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-20" id="chapter_1/question_3/Readme/:__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result_data</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_3/Readme/:__codelineno-2-21" id="chapter_1/question_3/Readme/:__codelineno-2-21" name="__codelineno-2-21"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMI/KF2WK43UNFXW4IBU/" id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBU/:"><h2 id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBU/"><span class="pdf-order">2.5 </span>Question 4</h2><section class="md-typeset" data-url="/chapter_1/question_4/Readme/" id="chapter_1/question_4/Readme/:">
<h3 id="chapter_1/question_4/Readme/:questao-4"><span class="pdf-order">2.5.1 </span>Questão 4</h3>
<p>As an alternative to the approach outlined in the preceding problem we can use C’s bitwise operators to implement the tree-structured global sum. In order to see how this works, it helps to write down the binary (base 2) representation of each of the core ranks, and note the pairings during each stage</p>
<p>Semelhante ao questão 3 sendo a diferença utilizar o bitwise <strong>&lt;&lt;</strong> para dividir
o tamanho atual da função recursiva:</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_4/Readme/:__codelineno-0-1" id="chapter_1/question_4/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">create_new_tree_bitwise</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">nodes</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-2" id="chapter_1/question_4/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-3" id="chapter_1/question_4/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-4" id="chapter_1/question_4/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-5" id="chapter_1/question_4/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-6" id="chapter_1/question_4/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// alteração.</span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-7" id="chapter_1/question_4/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-8" id="chapter_1/question_4/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-9" id="chapter_1/question_4/Readme/:__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-10" id="chapter_1/question_4/Readme/:__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-11" id="chapter_1/question_4/Readme/:__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">left</span><span class="p">};</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-12" id="chapter_1/question_4/Readme/:__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-13" id="chapter_1/question_4/Readme/:__codelineno-0-13" name="__codelineno-0-13"></a>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-14" id="chapter_1/question_4/Readme/:__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">new_nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="p">{};</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-15" id="chapter_1/question_4/Readme/:__codelineno-0-15" name="__codelineno-0-15"></a>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-16" id="chapter_1/question_4/Readme/:__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-17" id="chapter_1/question_4/Readme/:__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-18" id="chapter_1/question_4/Readme/:__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"> </span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-19" id="chapter_1/question_4/Readme/:__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-20" id="chapter_1/question_4/Readme/:__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"> </span><span class="c1">// Left receive value from right</span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-21" id="chapter_1/question_4/Readme/:__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">        </span><span class="n">new_nodes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">left</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-22" id="chapter_1/question_4/Readme/:__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-23" id="chapter_1/question_4/Readme/:__codelineno-0-23" name="__codelineno-0-23"></a>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-24" id="chapter_1/question_4/Readme/:__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">create_new_tree_bitwise</span><span class="p">(</span><span class="n">new_nodes</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_4/Readme/:__codelineno-0-25" id="chapter_1/question_4/Readme/:__codelineno-0-25" name="__codelineno-0-25"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMI/KF2WK43UNFXW4IBV/" id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBV/:"><h2 id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBV/"><span class="pdf-order">2.6 </span>Question 5</h2><section class="md-typeset" data-url="/chapter_1/question_5/Readme/" id="chapter_1/question_5/Readme/:">
<h3 id="chapter_1/question_5/Readme/:questao-5"><span class="pdf-order">2.6.1 </span>Questão 5</h3>
<p>What happens if your pseudo-code in Exercise 1.3 or Exercise 1.4 is run when the number of cores is not a power of two (e.g., 3, 5, 6, 7) ? Can you modify the
pseudo-code so that it will work correctly regardless of the number of cores ?</p>
<h4 id="chapter_1/question_5/Readme/:entendendo-o-que-acontece-quanto-os-numero-de-nucleos-nao-e-da-potencia-de-2">Entendendo o que acontece quanto os número de núcleos não é da potencia de 2</h4>
<p>Se por exemplo, o número de cores, ou Nós for 3 por exemplo, existirá nós que serão  "esquecidos" no algoritmo, por tanto
o algoritmo não funcionará corretamente.
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_5/Readme/:__codelineno-0-1" id="chapter_1/question_5/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="c1">// size = 3</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-2" id="chapter_1/question_5/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-3" id="chapter_1/question_5/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="c1">// alteração.</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-4" id="chapter_1/question_5/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-5" id="chapter_1/question_5/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-6" id="chapter_1/question_5/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-7" id="chapter_1/question_5/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">    </span><span class="c1">// node[2] foi esquecido</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-8" id="chapter_1/question_5/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"> </span><span class="c1">// Left receive value from right</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-9" id="chapter_1/question_5/Readme/:__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">left</span><span class="p">};</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-0-10" id="chapter_1/question_5/Readme/:__codelineno-0-10" name="__codelineno-0-10"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>ou se o por exemplo o número de nós for 7, a última iteração do laço <strong><em>for</em></strong>, os indices  <strong><em>i</em></strong>, <strong><em>i+1</em></strong>, serão respectivamente
6 e 7, ou seja será acessado um endereço inválido <strong><em>7</em></strong>, uma vez que os indices vão de 0 até 6.
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_5/Readme/:__codelineno-1-1" id="chapter_1/question_5/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">new_nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="p">{};</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-2" id="chapter_1/question_5/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-3" id="chapter_1/question_5/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-4" id="chapter_1/question_5/Readme/:__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="p">{</span><span class="w"> </span>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-5" id="chapter_1/question_5/Readme/:__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"> </span>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-6" id="chapter_1/question_5/Readme/:__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-7" id="chapter_1/question_5/Readme/:__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"> </span><span class="c1">// Left receive value from right</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-8" id="chapter_1/question_5/Readme/:__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">        </span><span class="n">new_nodes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">left</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-9" id="chapter_1/question_5/Readme/:__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-10" id="chapter_1/question_5/Readme/:__codelineno-1-10" name="__codelineno-1-10"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-1-11" id="chapter_1/question_5/Readme/:__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">create_new_tree_bitwise</span><span class="p">(</span><span class="n">new_nodes</span><span class="p">);</span><span class="w"></span>
</code></pre></div></p>
<p>Para isso foram feitas as seguintes modificações:<br/>
 - adicionado condicionamento para verificar se o tamanho é igual 3 
 - alterado o bitwise para apenas um comparador <strong><em>size ==2</em></strong>
 - verificado se o tamanho dos nós é par, caso nãos seja adicionado uma logica extra.</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_5/Readme/:__codelineno-2-1" id="chapter_1/question_5/Readme/:__codelineno-2-1" name="__codelineno-2-1"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">create_new_tree_bitwise</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="w"> </span><span class="n">nodes</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-2" id="chapter_1/question_5/Readme/:__codelineno-2-2" name="__codelineno-2-2"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-3" id="chapter_1/question_5/Readme/:__codelineno-2-3" name="__codelineno-2-3"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-4" id="chapter_1/question_5/Readme/:__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-5" id="chapter_1/question_5/Readme/:__codelineno-2-5" name="__codelineno-2-5"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-6" id="chapter_1/question_5/Readme/:__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-7" id="chapter_1/question_5/Readme/:__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-8" id="chapter_1/question_5/Readme/:__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-9" id="chapter_1/question_5/Readme/:__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-10" id="chapter_1/question_5/Readme/:__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-11" id="chapter_1/question_5/Readme/:__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">left</span><span class="p">};</span><span class="w"> </span><span class="c1">// Construtor C++ Moderno.</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-12" id="chapter_1/question_5/Readme/:__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-13" id="chapter_1/question_5/Readme/:__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-14" id="chapter_1/question_5/Readme/:__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-15" id="chapter_1/question_5/Readme/:__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-16" id="chapter_1/question_5/Readme/:__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">middle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-17" id="chapter_1/question_5/Readme/:__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-18" id="chapter_1/question_5/Readme/:__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">middle</span><span class="p">);</span><span class="w"> </span><span class="c1">// Left receive value from middle</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-19" id="chapter_1/question_5/Readme/:__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w">  </span><span class="c1">// Left receive value from right</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-20" id="chapter_1/question_5/Readme/:__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">left</span><span class="p">};</span><span class="w">               </span><span class="c1">// Construtor C++ Moderno.</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-21" id="chapter_1/question_5/Readme/:__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-22" id="chapter_1/question_5/Readme/:__codelineno-2-22" name="__codelineno-2-22"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-23" id="chapter_1/question_5/Readme/:__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">new_nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="w"> </span><span class="o">*&gt;</span><span class="p">{};</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-24" id="chapter_1/question_5/Readme/:__codelineno-2-24" name="__codelineno-2-24"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-25" id="chapter_1/question_5/Readme/:__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// lógica extra.</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-26" id="chapter_1/question_5/Readme/:__codelineno-2-26" name="__codelineno-2-26"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-27" id="chapter_1/question_5/Readme/:__codelineno-2-27" name="__codelineno-2-27"></a><span class="w">        </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-28" id="chapter_1/question_5/Readme/:__codelineno-2-28" name="__codelineno-2-28"></a><span class="w">        </span><span class="n">new_nodes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">size</span><span class="p">]);</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-29" id="chapter_1/question_5/Readme/:__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-30" id="chapter_1/question_5/Readme/:__codelineno-2-30" name="__codelineno-2-30"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-31" id="chapter_1/question_5/Readme/:__codelineno-2-31" name="__codelineno-2-31"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-32" id="chapter_1/question_5/Readme/:__codelineno-2-32" name="__codelineno-2-32"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-33" id="chapter_1/question_5/Readme/:__codelineno-2-33" name="__codelineno-2-33"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-34" id="chapter_1/question_5/Readme/:__codelineno-2-34" name="__codelineno-2-34"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-35" id="chapter_1/question_5/Readme/:__codelineno-2-35" name="__codelineno-2-35"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"> </span><span class="c1">// Left receive value from right</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-36" id="chapter_1/question_5/Readme/:__codelineno-2-36" name="__codelineno-2-36"></a><span class="w">        </span><span class="n">new_nodes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">left</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-37" id="chapter_1/question_5/Readme/:__codelineno-2-37" name="__codelineno-2-37"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-38" id="chapter_1/question_5/Readme/:__codelineno-2-38" name="__codelineno-2-38"></a>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-39" id="chapter_1/question_5/Readme/:__codelineno-2-39" name="__codelineno-2-39"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">create_new_tree_bitwise</span><span class="p">(</span><span class="n">new_nodes</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-2-40" id="chapter_1/question_5/Readme/:__codelineno-2-40" name="__codelineno-2-40"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="chapter_1/question_5/Readme/:explicando-a-logica-extra">Explicando a lógica extra</h4>
<p>Além de adicionar uma verificação para saber se o tamanho é par,
foi adicionado dois comandos extras, o primeiro é alterar o tamanho (size), para um valor menor, uma vez que estávamos acessando um índice
maior que o permitido. Segundo foi adicionar o nó que não será percorrido
pelo laço para o vetor <strong><em>new_nodes</em></strong> que será a entrada da próxima função recursiva</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_5/Readme/:__codelineno-3-1" id="chapter_1/question_5/Readme/:__codelineno-3-1" name="__codelineno-3-1"></a><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="c1">// verificação se é par.</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-3-2" id="chapter_1/question_5/Readme/:__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-3-3" id="chapter_1/question_5/Readme/:__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">        </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">//1</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-3-4" id="chapter_1/question_5/Readme/:__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">        </span><span class="n">new_nodes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">nodes</span><span class="p">[</span><span class="n">size</span><span class="p">]);</span><span class="w"> </span><span class="c1">// 2</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-3-5" id="chapter_1/question_5/Readme/:__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="chapter_1/question_5/Readme/:explicando-o-novo-caso-base">Explicando o novo caso base</h4>
<p>Percebemos que além do 2/2 == 1, a divisão inteira de 3/2 também é igual 1. Por tanto além do caso base de quando o tamanho do vetor de nós ser igual a 2, temos que tratar também quando o número de nós ser igual a 3.</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_1/question_5/Readme/:__codelineno-4-1" id="chapter_1/question_5/Readme/:__codelineno-4-1" name="__codelineno-4-1"></a><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-2" id="chapter_1/question_5/Readme/:__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-3" id="chapter_1/question_5/Readme/:__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-4" id="chapter_1/question_5/Readme/:__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-5" id="chapter_1/question_5/Readme/:__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-6" id="chapter_1/question_5/Readme/:__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">left</span><span class="p">};</span><span class="w"> </span><span class="c1">// Construtor C++ Moderno.</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-7" id="chapter_1/question_5/Readme/:__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-8" id="chapter_1/question_5/Readme/:__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-9" id="chapter_1/question_5/Readme/:__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-10" id="chapter_1/question_5/Readme/:__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-11" id="chapter_1/question_5/Readme/:__codelineno-4-11" name="__codelineno-4-11"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">middle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-12" id="chapter_1/question_5/Readme/:__codelineno-4-12" name="__codelineno-4-12"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-13" id="chapter_1/question_5/Readme/:__codelineno-4-13" name="__codelineno-4-13"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">middle</span><span class="p">);</span><span class="w"> </span><span class="c1">// Left receive value from middle</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-14" id="chapter_1/question_5/Readme/:__codelineno-4-14" name="__codelineno-4-14"></a><span class="w">        </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w">  </span><span class="c1">// Left receive value from right</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-15" id="chapter_1/question_5/Readme/:__codelineno-4-15" name="__codelineno-4-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="p">{</span><span class="n">left</span><span class="p">};</span><span class="w">               </span><span class="c1">// Construtor C++ Moderno.</span>
<a href="#chapter_1/question_5/Readme/:__codelineno-4-16" id="chapter_1/question_5/Readme/:__codelineno-4-16" name="__codelineno-4-16"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Como no exemplo abaixo, onde a segunda iteração do algoritmo o número de nós é 3.</p>
<p><img alt="" src="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/chapter_1/question_5/caso_3.jpg" style=""/></p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMI/KF2WK43UNFXW4IBW/" id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBW/:"><h2 id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBW/"><span class="pdf-order">2.7 </span>Question 6</h2><section class="md-typeset" data-url="/chapter_1/question_6/Readme/" id="chapter_1/question_6/Readme/:">
<h3 id="chapter_1/question_6/Readme/:questao-6"><span class="pdf-order">2.7.1 </span>Questão 6</h3>
<p>Derive formulas for the number of receives and additions that core 0 carries out using:<br/>
   a. the original pseudo-code for a global sum<br/>
   b. the tree-structured global sum.<br/>
Make a table showing the numbers of receives and additions carried out by core
0 when the two sums are used with 2, 4, 8, . . . , 1024 cores.</p>
<h4 id="chapter_1/question_6/Readme/:tabela-mostrando-o-numero-de-receives-ou-joins-que-o-core-0-tera">Tabela mostrando o número de receives, ou joins que o core 0 terá</h4>
<ul>
<li>A coluna Cores representa o número de núcleos, que estão em potência de 2.</li>
<li>A coluna Naive, é o número de receives que o core 0 terá caso utilizado
a abordagem ingenua do core 0 esperar todos os outros e somar todo de uma vez.</li>
<li>A coluna Tree é o número de receives que o core 0 terá utilizando a abordagem em árvore.</li>
</ul>
<table>
<thead>
<tr>
<th>Cores</th>
<th>Naive</th>
<th>Tree</th>
</tr>
</thead>
<tbody>
<tr>
<td>2</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>8</td>
<td>7</td>
<td>3</td>
</tr>
<tr>
<td>16</td>
<td>15</td>
<td>4</td>
</tr>
<tr>
<td>32</td>
<td>31</td>
<td>5</td>
</tr>
<tr>
<td>64</td>
<td>63</td>
<td>6</td>
</tr>
<tr>
<td>128</td>
<td>127</td>
<td>7</td>
</tr>
<tr>
<td>256</td>
<td>255</td>
<td>8</td>
</tr>
<tr>
<td>512</td>
<td>512</td>
<td>9</td>
</tr>
<tr>
<td>1024</td>
<td>1023</td>
<td>10</td>
</tr>
</tbody>
</table>
<p>Podemos observar claramente que a abordagem ingênua segue a formula,
<strong><em>p -1</em></strong> e quando usamos a árvore, percebemos que a cada 2 núcleos,
o número de ligações amentar em 1, ou seja, <strong><em>log(p)</em></strong> de base 2.
Podemos ver o número de ligações crescendo linearmente com cada dois núcleos na imagem abaixo
<img alt="Global Sum" src="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/chapter_1/question_6/global_sum.png" style=""/></p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMI/KF2WK43UNFXW4IBZ/" id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBZ/:"><h2 id="INUGC4DUMVZCAMI/KF2WK43UNFXW4IBZ/"><span class="pdf-order">2.8 </span>Question 9</h2><section class="md-typeset" data-url="/chapter_1/question_9/Readme/" id="chapter_1/question_9/Readme/:">
<h3 id="chapter_1/question_9/Readme/:questao-9"><span class="pdf-order">2.8.1 </span>Questão 9</h3>
<p>Write an essay describing a research problem in your major that would benefit from the use of parallel computing. Provide a rough outline of how parallelism would be used. Would you use task- or data-parallelism ?</p>
<h4 id="chapter_1/question_9/Readme/:tinyml-in-context-of-web-browser">TinyML in Context of web browser</h4>
<p>Em contexto de aplicações web, especificamente a camada front-end, vem se popularizando frameworks que utilizam o WebAssembly (Wasm). O WebAssembly é um novo tipo de código que pode ser executado em browsers modernos — se trata de uma linguagem de baixo nível como assembly, com um formato binário compacto que executa com performance quase nativa e que fornece um novo alvo de compilação para linguagens como C/C++, para que possam ser executadas na web <a href="https://developer.mozilla.org/pt-BR/docs/WebAssembly">developer.mozilla.org</a>. Através do Wasm é possível
implementar algoritmos de Tiny machine learning (TinyML) para classificação, analise de dados sem a necessidade de comunicação com backend. TinyML é amplamente definido como uma rápida e crescente área de aprendizado de máquina e suas aplicações que inclui hardware, algoritmos e software capazes de performar analise de dados em dispositivos de baixo consumo de energia, tipicamente em milliwatts, assim habilitado variados casos de uso e dispositivos que possuem bateria. Em um navegador, ou durante a navegação o usuário está a
todo momento produzindo dados que muitas vezes estão sendo enviados
de forma bruta ou quase bruta para a camada de aplicação ou back-end, onde nela é gasto processamento e memória para a primeira etapa de classificação ou analise dos dados. Uma vez analisado desempenho de técnicas e algoritmos de TinyML utilizando WebAssembly, pode ser possível transferir a responsabilidade da analise dos dados para o front-end. Em contexto de navegador quase tudo é paralelo ou distribuído,
uma aba ou <em>tab</em> em inglês é um processo diferente. Criar um uma extensão, que faça aquisição e analise dos dados de diferentes abas, seria criar um sistema que se comunica com diferentes processos por meio de mensagens e o algoritmo de aprendizado pode fazer uso de idealmente uma ou duas threads para realizar a analise rapidamente. Por tanto é um
sistema que é task-and-data parallel.</p>
</section></section></article><article class="md-content__inner md-typeset" data-url="/INUGC4DUMVZCAMQ/" id="INUGC4DUMVZCAMQ/:"><h1 id="INUGC4DUMVZCAMQ/"><span class="pdf-order">3. </span>Chapter 2</h1><section class="md-typeset" data-url="/chapter_2/Readme/" id="chapter_2/Readme/:">
<h2 id="chapter_2/Readme/:capitulo-2"><span class="pdf-order">3.1 </span>Capítulo 2</h2>
<p>Capítulo 2: 1-3, 5, 7, 10, 15-17, 19-21, 24; (13 questões)</p>
<ol>
<li>
<p>When we were discussing floating point addition, we made the simplifying assumption that each of the functional units took the same amount of time. Suppose that fetch and store each take 2 nanoseconds and the remaining operations each take 1 nanosecond.</p>
<ol>
<li>
<p>How long does a floating point addition take with these assumptions ?  </p>
</li>
<li>
<p>How long will an unpipelined addition of 1000 pairs of floats take with these assumptions ?  </p>
</li>
<li>
<p>How long will a pipelined addition of 1000 pairs of floats take with these assumptions ?  </p>
</li>
<li>
<p>The time required for fetch and store may vary considerably if the operands/results are stored in different levels of the memory hierarchy. Suppose that a fetch from a level 1 cache takes two nanoseconds, while a fetch from a level 2 cache takes five nanoseconds, and a fetch from main memory takes fifty nanoseconds. What happens to the pipeline when there is a level 1 cache miss on a fetch of one of the operands? What happens when there is a level 2 miss ?  </p>
<ul>
<li><a href="#chapter_2/question_01/Readme/:">Resposta questão 1</a> </li>
</ul>
</li>
</ol>
</li>
<li>
<p>Explain how a queue, implemented in hardware in the CPU, could be used to improve the performance of a write-through cache.</p>
<ul>
<li><a href="#chapter_2/question_02/Readme/:">Resposta questão 2</a> </li>
</ul>
</li>
<li>
<p>Recall the example involving cache reads of a two-dimensional array (page 22). How does a larger matrix and a larger cache affect the performance of the two pairs of nested loops? What happens if MAX = 8 and the cache can store four lines ? How many misses occur in the reads of A in the first pair of nested loops ? How many misses occur in the second pair ?</p>
<ul>
<li><a href="#chapter_2/question_03/Readme/:">Resposta questão 3</a> </li>
</ul>
</li>
<li></li>
<li>
<p>Does the addition of cache and virtual memory to a von Neumann system change its designation as an SISD system ? What about the addition of
pipelining? Multiple issue? Hardware multithreading ? </p>
<ul>
<li><a href="#chapter_2/question_05/Readme/:">Resposta questão 5</a> </li>
</ul>
</li>
<li></li>
<li>
<p>Discuss the differences in how a GPU and a vector processor might execute the following code:<br/>
<div class="highlight"><pre><span></span><code><a href="#chapter_2/Readme/:__codelineno-0-1" id="chapter_2/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="w">   </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w">  </span>
<a href="#chapter_2/Readme/:__codelineno-0-2" id="chapter_2/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<a href="#chapter_2/Readme/:__codelineno-0-3" id="chapter_2/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">      </span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">a</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w">  </span>
<a href="#chapter_2/Readme/:__codelineno-0-4" id="chapter_2/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">      </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w">  </span>
<a href="#chapter_2/Readme/:__codelineno-0-5" id="chapter_2/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">   </span><span class="p">}</span><span class="w">  </span>
</code></pre></div></p>
<ul>
<li><a href="#chapter_2/question_07/Readme/:">Resposta questão 7</a></li>
</ul>
</li>
<li></li>
<li></li>
<li>
<p>Suppose a program must execute 10¹² instructions in order to solve a particular problem. Suppose further that a single processor system can solve the problem in 10⁶ seconds (about 11.6 days). So, on average, the single processor system executes 10⁶ or a million instructions per second. Now suppose that the program has been parallelized for execution on a distributed-memory system. Suppose also that if the parallel program uses p processors, each processor will execute 10¹²  /p instructions and each processor must send 10⁹ ( p − 1) messages. Finally, suppose that there is no additional overhead in executing the
parallel program. That is, the program will complete after each processor has executed all of its instructions and sent all of its messages, and there won’t be any delays due to things such as waiting for messages.</p>
<ol>
<li>
<p>Suppose it takes 10⁻⁹ seconds to send a message. How long will it take the program to run with 1000 processors, if each processor is as fast as the single processor on which the serial program was run ?  </p>
</li>
<li>
<p>Suppose it takes 10⁻³ seconds to send a message. How long will it take the program to run with 1000 processors ?
     <a href="#chapter_2/question_10/Readme/:">Resposta questão 10</a> </p>
</li>
</ol>
</li>
<li></li>
<li></li>
<li></li>
<li></li>
<li>
<ol>
<li>
<p>Suppose a shared-memory system uses snooping cache coherence and
write-back caches. Also suppose that core 0 has the variable x in its cache, and it executes the assignment x = 5. Finally suppose that core 1 doesn’t have x in its cache, and after core 0’s update to x, core 1 tries to execute y = x. What value will be assigned to y ? Why ?  </p>
</li>
<li>
<p>Suppose that the shared-memory system in the previous part uses a
directory-based protocol. What value will be assigned to y ? Why ?</p>
</li>
<li>Can you suggest how any problems you found in the first two parts might be solved ?<ul>
<li><a href="#chapter_2/question_15/Readme/:">Resposta questão 15</a> </li>
</ul>
</li>
</ol>
</li>
<li>
<ol>
<li>Suppose the run-time of a serial program is given by <span class="arithmatex">\(T_{serial} = n^{2}\)</span> , where the units of the run-time are in microseconds. Suppose that a parallelization of this program has run-time <span class="arithmatex">\(T_{parallel} = \frac{n^2}{p} + log_2(p)\)</span>. Write a program that finds the speedups and efficiencies of this program for various values of n and p. Run your program with <span class="arithmatex">\(n = 10, 20, 40, . . . , 320\)</span>, and <span class="arithmatex">\(p = 1, 2, 4, . . . , 128\)</span>. What happens to the speedups and efficiencies as p is increased and n is held fixed? What happens when p is fixed and n is increased ? </li>
<li>Suppose that <span class="arithmatex">\(T_{parallel} = \frac{T_{serial}}{p} + T_{overhead}\)</span> . Also suppose that we fix <span class="arithmatex">\(p\)</span> and increase the problem size. <br/>
        - Show that if <span class="arithmatex">\(T_{overhead}\)</span> grows more slowly than <span class="arithmatex">\(T_{serial}\)</span> , the parallel
         efficiency will increase as we increase the problem size.
        - Show that if, on the other hand, <span class="arithmatex">\(T_{overhead}\)</span> grows faster than <span class="arithmatex">\(T_{serial}\)</span>, the parallel efficiency will decrease as we increase the problem size.<ul>
<li><a href="#chapter_2/question_16/Readme/:">Resposta questão 16</a></li>
</ul>
</li>
</ol>
</li>
<li>
<p>A parallel program that obtains a speedup greater than p—the number of processes or threads—is sometimes said to have <strong>superlinear speedup</strong>. However, many authors don’t count programs that overcome “resource limitations” as having superlinear speedup. For example, a program that must use secondary storage for its data when it’s run on a single processor system might be able to fit all its data into main memory when run on a large distributed-memory system. Give another example of how a program might overcome a resource limitation and obtain speedups greater than p</p>
<ul>
<li><a href="#chapter_2/question_17/Readme/:">Resposta questão 17</a> </li>
</ul>
</li>
<li></li>
<li>
<p>Suppose <span class="arithmatex">\(T_{serial} = n\)</span>  and <span class="arithmatex">\(T_{parallel} = \frac{n}{p} + log_2 (p)\)</span>, where times are in microseconds. If we increase <span class="arithmatex">\(p\)</span> by a factor of <span class="arithmatex">\(k\)</span>, find a formula for how much we’ll need to increase n in order to maintain constant efficiency. How much should we increase <span class="arithmatex">\(n\)</span> by if we double the number of processes from 8 to 16 ? Is the parallel program scalable ?</p>
<ul>
<li><a href="#chapter_2/question_19/Readme/:">Resposta questão 19</a> </li>
</ul>
</li>
<li>
<p>Is a program that obtains linear speedup strongly scalable ? Explain your answer.</p>
<ul>
<li><a href="#chapter_2/question_20/Readme/:">Resposta questão 20</a> </li>
</ul>
</li>
<li>
<p>Bob has a program that he wants to time with two sets of data, <em>input_data1</em> and <em>input_data2</em>. To get some idea of what to expect before adding timing functions to the code he’s interested in, he runs the program with two sets of data and the Unix shell command <em>time</em>:
      <div class="highlight"><pre><span></span><code><a href="#chapter_2/Readme/:__codelineno-1-1" id="chapter_2/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a>   $ <span class="nb">time</span> ./bobs prog &lt; input data1
<a href="#chapter_2/Readme/:__codelineno-1-2" id="chapter_2/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a>   real 0m0.001s
<a href="#chapter_2/Readme/:__codelineno-1-3" id="chapter_2/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a>   user 0m0.001s
<a href="#chapter_2/Readme/:__codelineno-1-4" id="chapter_2/Readme/:__codelineno-1-4" name="__codelineno-1-4"></a>   sys 0m0.000s
<a href="#chapter_2/Readme/:__codelineno-1-5" id="chapter_2/Readme/:__codelineno-1-5" name="__codelineno-1-5"></a>   $ <span class="nb">time</span> ./bobs prog &lt; input data2
<a href="#chapter_2/Readme/:__codelineno-1-6" id="chapter_2/Readme/:__codelineno-1-6" name="__codelineno-1-6"></a>   real 1m1.234s
<a href="#chapter_2/Readme/:__codelineno-1-7" id="chapter_2/Readme/:__codelineno-1-7" name="__codelineno-1-7"></a>   user 1m0.001s
<a href="#chapter_2/Readme/:__codelineno-1-8" id="chapter_2/Readme/:__codelineno-1-8" name="__codelineno-1-8"></a>   sys 0m0.111s
</code></pre></div>
      The timer function Bob is using has millisecond resolution. Should Bob use it to time his program with the first set of data ? What about the second set of data ? Why or why not ?</p>
<ul>
<li><a href="#chapter_2/question_21/Readme/:">Resposta questão 21</a> </li>
</ul>
</li>
<li></li>
<li></li>
<li>If you haven’t already done so in Chapter 1, try to write pseudo-code for our tree-structured global sum, which sums the elements of <em>loc_bin_cts</em>. First consider how this might be done in a shared-memory setting. Then consider how this might be done in a distributed-memory setting. In the shared-memory setting, which variables are shared and which are private ?<ul>
<li><a href="#chapter_2/question_24/Readme/:">Resposta questão 24</a> </li>
</ul>
</li>
</ol>
</section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGE/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGE/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGE/"><span class="pdf-order">3.2 </span>Question 01</h2><section class="md-typeset" data-url="/chapter_2/question_01/Readme/" id="chapter_2/question_01/Readme/:">
<h3 id="chapter_2/question_01/Readme/:questao-1"><span class="pdf-order">3.2.1 </span>Questão 1</h3>
<p>When we were discussing floating point addition, we made the simplifying assumption that each of the functional units took the same amount of time. Suppose that fetch and store each take 2 nanoseconds and the remaining operations each take 1 nanosecond.<br/>
   a. How long does a floating point addition take with these assumptions ?  </p>
<p>b. How long will an unpipelined addition of 1000 pairs of floats take with these assumptions ?  </p>
<p>c. How long will a pipelined addition of 1000 pairs of floats take with these assumptions ?  </p>
<p>d. The time required for fetch and store may vary considerably if the operands/results are stored in different levels of the memory hierarchy. Suppose that a fetch from a level 1 cache takes two nanoseconds, while a fetch from a level 2 cache takes five nanoseconds, and a fetch from main memory takes fifty nanoseconds. What happens to the pipeline when there is a level 1 cache miss on a fetch of one of the operands? What happens when there is a level 2 miss ?</p>
<h4 id="chapter_2/question_01/Readme/:1a">1.a</h4>
<table>
<thead>
<tr>
<th>Instructions</th>
<th>Time in nanosecond</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fetch</td>
<td>2</td>
</tr>
<tr>
<td>Store</td>
<td>2</td>
</tr>
<tr>
<td>Functional  OP</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>"As an alternative, suppose we divide our floating point adder into seven separate pieces of hardware or functional units. The first unit will fetch two operands,
the second will compare exponents, and so on." (Página 26)</p>
<p>O Author do livro considera que existe sete operações, considerando que duas delas são fetch e store custa 2 nanosegundos e o restante 1 nanosegundo.</p>
<div class="highlight"><pre><span></span><code>    1*5 +2*2 = 9 nanosegundos
</code></pre></div>
<h4 id="chapter_2/question_01/Readme/:1b">1.b</h4>
<p>Considerando que exitem 1000 pares de valores vão serem somados:</p>
<div class="highlight"><pre><span></span><code>    1000*9 = 9000 nanosegundos
</code></pre></div>
<h4 id="chapter_2/question_01/Readme/:1c">1.c</h4>
<p>foi pensado o seguinte: Nó memento que o dado passa pelo fetch, e vai para a próxima operação já
é realizado o fetch da segunda operação. Executando o pipeline:</p>
<table>
<thead>
<tr>
<th>Tempo em nanosegundos</th>
<th>Fetch</th>
<th>OP1</th>
<th>OP2</th>
<th>OP3</th>
<th>OP4</th>
<th>OP5</th>
<th>Store</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
</tr>
<tr>
<td>2</td>
<td>2</td>
<td>1</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>wait</td>
<td>1</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
</tr>
<tr>
<td>4</td>
<td>3</td>
<td>2</td>
<td>wait</td>
<td>1</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
</tr>
<tr>
<td>5</td>
<td>3</td>
<td>wait</td>
<td>2</td>
<td>wait</td>
<td>1</td>
<td>wait</td>
<td>wait</td>
</tr>
<tr>
<td>6</td>
<td>4</td>
<td>3</td>
<td>wait</td>
<td>2</td>
<td>wait</td>
<td>1</td>
<td>wait</td>
</tr>
<tr>
<td>7</td>
<td>4</td>
<td>wait</td>
<td>3</td>
<td>wait</td>
<td>2</td>
<td>wait</td>
<td>1</td>
</tr>
<tr>
<td>8</td>
<td>5</td>
<td>4</td>
<td>wait</td>
<td>3</td>
<td>wait</td>
<td>2</td>
<td>wait</td>
</tr>
<tr>
<td>9</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
<td>wait</td>
<td>2</td>
</tr>
<tr>
<td>10</td>
<td>6</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>11</td>
<td>6</td>
<td>wait</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>Percebe-se que a primeira instrução irá ser finalizada ou sumir na tabela quanto for 9 segundos
ou seja,a primeira instrução dura 9 segundos, no entanto, no momento em que a primeira instrução
é finalizada,a segunda já começa a ser finalizada ou seja, demora apenas 2 nanosegundos até segunda operação ser finalizada e mais 2 nanosegundos para a terceira ser finalizada e assim por diante. Por tanto para executar todos os 1000 dados, o custo total fica:</p>
<div class="highlight"><pre><span></span><code>    9 + 999*2 = 2007
</code></pre></div>
<h4 id="chapter_2/question_01/Readme/:1d">1.d</h4>
<p>No caso, considerando que a cache nível não falhe a tabela continua mesma,
pois o fetch e store custam o mesmo 2 nanosegundos: </p>
<table>
<thead>
<tr>
<th>Tempo em nanosegundos</th>
<th>Fetch</th>
<th>OP1</th>
<th>OP2</th>
<th>OP3</th>
<th>OP4</th>
<th>OP5</th>
<th>Store</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>6</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>11</td>
<td>6</td>
<td>wait</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>mas se imaginarmos que na 12 iteração o Fetch e Store passa a custar 5 nanosegundos:</p>
<table>
<thead>
<tr>
<th>Tempo em nanosegundos</th>
<th>Fetch</th>
<th>OP1</th>
<th>OP2</th>
<th>OP3</th>
<th>OP4</th>
<th>OP5</th>
<th>Store</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>6</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>11</td>
<td>6</td>
<td>wait</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
</tr>
<tr>
<td>12</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>13</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>14</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>15</td>
<td>7</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>16</td>
<td>7</td>
<td>wait</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>Quando mais lento fica a transferência para a memória principal, mais nítido fica o gargalo de Von Neumann, ou seja, percebe-se que a performance do processador fica limitado a taxa  de transferência de dados com a memória principal.  </p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGI/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGI/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGI/"><span class="pdf-order">3.3 </span>Question 02</h2><section class="md-typeset" data-url="/chapter_2/question_02/Readme/" id="chapter_2/question_02/Readme/:">
<h3 id="chapter_2/question_02/Readme/:questao-2"><span class="pdf-order">3.3.1 </span>Questão 2</h3>
<p>Explain how a queue, implemented in hardware in the CPU, could be used to improve the performance of a write-through cache.</p>
<p>Como observado na <a href="#chapter_2/question_01/Readme/:">questão 1</a> cada momento que a escrita é debilitada, fica nítido o gargalo de Von Neuman se considerarmos que uma escrita na cache é uma escrita na memória principal, então cada Store iria demorar <strong><em>50</em></strong> nano segundos. Colocando uma fila e supondo que ela nunca fique cheia, a CPU não irá gastar tanto tempo no Store, mas uma vez a fila
cheia, a CPU terá que aguardar uma escrita na memória principal. </p>
<h4 id="chapter_2/question_02/Readme/:tabela-com-cache-miss-questao-1">Tabela com cache miss questão 1</h4>
<table>
<thead>
<tr>
<th>Tempo em nanosegundos</th>
<th>Fetch</th>
<th>OP1</th>
<th>OP2</th>
<th>OP3</th>
<th>OP4</th>
<th>OP5</th>
<th>Store</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>6</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
<td>2</td>
</tr>
<tr>
<td>11</td>
<td>6</td>
<td>wait</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>wait</td>
<td>3</td>
</tr>
<tr>
<td>12</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>wait</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>13</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>14</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>15</td>
<td>7</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>4</td>
<td>3</td>
</tr>
<tr>
<td>16</td>
<td>7</td>
<td>wait</td>
<td>6</td>
<td>wait</td>
<td>wait</td>
<td>5</td>
<td>4</td>
</tr>
</tbody>
</table>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGM/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGM/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGM/"><span class="pdf-order">3.4 </span>Question 03</h2><section class="md-typeset" data-url="/chapter_2/question_03/Readme/" id="chapter_2/question_03/Readme/:">
<h3 id="chapter_2/question_03/Readme/:questao-3"><span class="pdf-order">3.4.1 </span>Questão 3</h3>
<p>Recall the example involving cache reads of a two-dimensional array (page 22). How does a larger matrix and a larger cache affect the performance of the two pairs of nested loops? What happens if MAX = 8 and the cache can store four lines ? How many misses occur in the reads of A in the first pair of nested loops ? How many misses occur in the second pair ?</p>
<h4 id="chapter_2/question_03/Readme/:exemplo-envolvendo-leituras-na-cache-em-um-array-bidimensional">Exemplo envolvendo leituras na cache em um array bidimensional</h4>
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_03/Readme/:__codelineno-0-1" id="chapter_2/question_03/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="kt">double</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">MAX</span><span class="p">][</span><span class="n">MAX</span><span class="p">],</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">MAX</span><span class="p">],</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="n">MAX</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-2" id="chapter_2/question_03/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-3" id="chapter_2/question_03/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="c1">//. . .</span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-4" id="chapter_2/question_03/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1">// Initialize A and x, assign y = 0 ∗/</span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-5" id="chapter_2/question_03/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a><span class="c1">//. . .</span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-6" id="chapter_2/question_03/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-7" id="chapter_2/question_03/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-8" id="chapter_2/question_03/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a><span class="o">/</span><span class="err">∗</span><span class="w"> </span><span class="n">First</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="err">∗</span><span class="o">/</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-9" id="chapter_2/question_03/Readme/:__codelineno-0-9" name="__codelineno-0-9"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MAX</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-10" id="chapter_2/question_03/Readme/:__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MAX</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-11" id="chapter_2/question_03/Readme/:__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">        </span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-12" id="chapter_2/question_03/Readme/:__codelineno-0-12" name="__codelineno-0-12"></a>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-13" id="chapter_2/question_03/Readme/:__codelineno-0-13" name="__codelineno-0-13"></a><span class="c1">//. . .</span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-14" id="chapter_2/question_03/Readme/:__codelineno-0-14" name="__codelineno-0-14"></a><span class="c1">// Assign y = 0 ∗/</span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-15" id="chapter_2/question_03/Readme/:__codelineno-0-15" name="__codelineno-0-15"></a><span class="c1">//. . .</span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-16" id="chapter_2/question_03/Readme/:__codelineno-0-16" name="__codelineno-0-16"></a>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-17" id="chapter_2/question_03/Readme/:__codelineno-0-17" name="__codelineno-0-17"></a><span class="o">/</span><span class="err">∗</span><span class="w"> </span><span class="n">Second</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="err">∗</span><span class="o">/</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-18" id="chapter_2/question_03/Readme/:__codelineno-0-18" name="__codelineno-0-18"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MAX</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-19" id="chapter_2/question_03/Readme/:__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MAX</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-0-20" id="chapter_2/question_03/Readme/:__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">        </span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">];</span><span class="w"></span>
</code></pre></div>
<table>
<thead>
<tr>
<th>Cache line</th>
<th>Elements of A</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>A[0][0] A[0][1] A[0][2] A[0][3]</td>
</tr>
<tr>
<td>1</td>
<td>A[1][0] A[1][1] A[1][2] A[1][3]</td>
</tr>
<tr>
<td>2</td>
<td>A[2][0] A[2][1] A[2][2] A[2][3]</td>
</tr>
<tr>
<td>3</td>
<td>A[3][0] A[3][1] A[3][2] A[3][3]</td>
</tr>
</tbody>
</table>
<h4 id="chapter_2/question_03/Readme/:how-does-a-larger-matrix-and-a-larger-cache-affect-the-performance-of-the-two-pairs-of-nested-loops">How does a larger matrix and a larger cache affect the performance of the two pairs of nested loops ?</h4>
<p>Supondo que a cache tenha a mesma proporção do que a Matrix, o número de cache miss seria igual ao número de linhas da matriz, como apontado no exemplo dado no livro, quando o processador Pede o valor A[0][0], baseado na ideia de vizinhança, a cache carrega todas as outras colunas da linha 0, portanto é plausível pensar que o número de miss é igual ao número de linhas, ou seja,
o número miss é igual a <strong><em>MAX</em></strong>, pois a cache tem o mesmo número de linhas que a matrix A, suponto que não preciso me preocupar com <strong><em>x</em></strong> e <strong><em>y</em></strong>.</p>
<h4 id="chapter_2/question_03/Readme/:if-max-8-and-the-cache-can-store-four-lines-how-many-misses-occur-in-the-reads-of-a-in-the-first-pair-of-nested-loops-how-many-misses-occur-in-the-second-pair">if MAX = 8 and the cache can store four lines ? How many misses occur in the reads of A in the first pair of nested loops ? How many misses occur in the second pair ?</h4>
<h5 id="chapter_2/question_03/Readme/:first-pair-of-loops">First pair of loops</h5>
<p>Tendo a a cache armazenando metade dos valores de uma linha da Matriz A, então
para cada linha da Matriz, vai haver duas cache miss, a primeira np A[i][0] e a segunda no A[i][4]. Outro ponto é que como a cache só possui 4 linhas, então
após ocorrer os cache misses A[0][0] ,A[0][4] e A[1][0], A[1][4] toda a cache
terá sindo preenchida, ou seja, Tento a matriz 8 linhas e para cada linha tem 2 cache miss por tanto:</p>
<div class="highlight"><pre><span></span><code>    8*2 =16 cache miss
</code></pre></div>
<p>como tanto a primeira parte quando na segunda parte, percorre-se todas as linhas
irá haver 16 cache miss, suponto que não preciso me preocupar com <strong><em>x</em></strong> e <strong><em>y</em></strong>.</p>
<table>
<thead>
<tr>
<th>Cache line</th>
<th>Elements of A</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>A[0][0] A[0][1] A[0][2] A[0][3]</td>
</tr>
<tr>
<td>1</td>
<td>A[0][4] A[0][5] A[0][6] A[0][7]</td>
</tr>
<tr>
<td>2</td>
<td>A[1][0] A[1][1] A[1][2] A[1][3]</td>
</tr>
<tr>
<td>3</td>
<td>A[1][4] A[1][5] A[1][6] A[1][7]</td>
</tr>
</tbody>
</table>
<h5 id="chapter_2/question_03/Readme/:second-pair-of-loops">Second pair of loops</h5>
<p>No segundo par de loops, vemos que o segundo laço for, percorre os valores:
A[0][0], A[1][0], A[2][0] ... A[7][0], para quando j =0. Isso faz com que
todo hit seja miss, ou seja iremos ter miss para cada acesso em A, portanto:</p>
<div class="highlight"><pre><span></span><code>    8*8 = 64 cache miss
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_03/Readme/:__codelineno-1-1" id="chapter_2/question_03/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a><span class="o">/</span><span class="err">∗</span><span class="w"> </span><span class="n">Second</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">loops</span><span class="w"> </span><span class="err">∗</span><span class="o">/</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-1-2" id="chapter_2/question_03/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MAX</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-1-3" id="chapter_2/question_03/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">MAX</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_2/question_03/Readme/:__codelineno-1-4" id="chapter_2/question_03/Readme/:__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">        </span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">A</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">];</span><span class="w"> </span><span class="c1">// cada acesso um miss.</span>
</code></pre></div>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGU/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGU/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQGU/"><span class="pdf-order">3.5 </span>Question 05</h2><section class="md-typeset" data-url="/chapter_2/question_05/Readme/" id="chapter_2/question_05/Readme/:">
<h3 id="chapter_2/question_05/Readme/:questao-5"><span class="pdf-order">3.5.1 </span>Questão 5</h3>
<p>Does the addition of cache and virtual memory to a von Neumann system change its designation as an SISD system ? What about the addition of
pipelining? Multiple issue? Hardware multithreading ? </p>
<p>Um SISD system ou Single Instruction Single Data system, são sistemas que executam uma única instrução por vez e sua taxa de transferência de dados é
de um item por vez também. </p>
<h4 id="chapter_2/question_05/Readme/:the-addition-of-cache-and-virtual-memory">the addition of cache and virtual memory</h4>
<p>Adicionar um cache e memória virtual, pode ajudar a reduzir o tempo que <strong>única</strong> instrução é lida da memória principal, mas não aumenta o número de
instruções buscadas na operação Fetch ou na Operação Store, por tanto o sistema
continua sendo Single Instruction Single Data.</p>
<h4 id="chapter_2/question_05/Readme/:the-addition-of-pipelining">the addition of pipelining</h4>
<p>Como demostrado na <a href="#chapter_2/question_01/Readme/:">questão 1</a>, ao adicionar um pipeline, podemos realizar a mesma instrução complexa em múltiplos dados,
ou seja, Single Instruction Multiple Data System, portanto sim.</p>
<h4 id="chapter_2/question_05/Readme/:the-addition-of-multiple-issue-and-hardware-multithreading">the addition of Multiple issue and Hardware multithreading</h4>
<p>No momento em que possibilitamos uma máquina executar antecipadamente uma instrução ou possibilitamos a execução de múltiplas threads, nesse momento então a máquina está executando várias instruções em vários dados ao mesmo tempo, por tanto o sistema se torna Multiple Instruction Multiple Data system, ou seja, a designação muda.</p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQG4/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQG4/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBQG4/"><span class="pdf-order">3.6 </span>Question 07</h2><section class="md-typeset" data-url="/chapter_2/question_07/Readme/" id="chapter_2/question_07/Readme/:">
<h3 id="chapter_2/question_07/Readme/:questao-7"><span class="pdf-order">3.6.1 </span>Questão 7</h3>
<p>Discuss the differences in how a GPU and a vector processor might execute the following code:
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_07/Readme/:__codelineno-0-1" id="chapter_2/question_07/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-0-2" id="chapter_2/question_07/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-0-3" id="chapter_2/question_07/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">   </span><span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">a</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-0-4" id="chapter_2/question_07/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">   </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-0-5" id="chapter_2/question_07/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<h4 id="chapter_2/question_07/Readme/:cpu-com-vetorizacao">CPU com vetorização</h4>
<p>Um processo de vetorização em cima desse laço for dividiria as entradas
em chucks ou blocos de dados e executaria em paralelo a instrução complexa.
Algo como:</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_07/Readme/:__codelineno-1-1" id="chapter_2/question_07/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1">//executando o bloco paralelamente.</span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-2" id="chapter_2/question_07/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">a</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-3" id="chapter_2/question_07/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">a</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-4" id="chapter_2/question_07/Readme/:__codelineno-1-4" name="__codelineno-1-4"></a><span class="n">y</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">a</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-5" id="chapter_2/question_07/Readme/:__codelineno-1-5" name="__codelineno-1-5"></a><span class="n">y</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">a</span><span class="err">∗</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-6" id="chapter_2/question_07/Readme/:__codelineno-1-6" name="__codelineno-1-6"></a>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-7" id="chapter_2/question_07/Readme/:__codelineno-1-7" name="__codelineno-1-7"></a><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="c1">// executando em paralelo</span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-8" id="chapter_2/question_07/Readme/:__codelineno-1-8" name="__codelineno-1-8"></a><span class="n">z</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="c1">// executando em paralelo</span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-9" id="chapter_2/question_07/Readme/:__codelineno-1-9" name="__codelineno-1-9"></a><span class="n">z</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="c1">// executando em paralelo</span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-10" id="chapter_2/question_07/Readme/:__codelineno-1-10" name="__codelineno-1-10"></a><span class="n">z</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="c1">// executando em paralelo</span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-11" id="chapter_2/question_07/Readme/:__codelineno-1-11" name="__codelineno-1-11"></a><span class="c1">// somando tudo depois</span>
<a href="#chapter_2/question_07/Readme/:__codelineno-1-12" id="chapter_2/question_07/Readme/:__codelineno-1-12" name="__codelineno-1-12"></a><span class="n">sum</span><span class="o">+=</span><span class="w">  </span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">z</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">z</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">z</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="err">∗</span><span class="n">z</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span><span class="w"> </span>
</code></pre></div>
<h4 id="chapter_2/question_07/Readme/:gpu">GPU</h4>
<p>Atualmente essa operação em GPU é muito mais interessante, pois hoje podemos
compilar ou gerar instruções complexas que podem ser executas em GPU. A primeira vantagem seria separar o calculo do sum:</p>
<div class="highlight"><pre><span></span><code>    sum += z[i]∗z[i];
</code></pre></div>
<p>do calculo do  <strong><em>y</em></strong></p>
<div class="highlight"><pre><span></span><code>      y[i] += a∗x[i];
</code></pre></div>
<p>ficando assim:</p>
<h5 id="chapter_2/question_07/Readme/:shaders-glsl-equivalente-suponto-que-n-4">Shaders glsl equivalente suponto que n = 4</h5>
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_07/Readme/:__codelineno-2-1" id="chapter_2/question_07/Readme/:__codelineno-2-1" name="__codelineno-2-1"></a><span class="cp"># version 330</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-2" id="chapter_2/question_07/Readme/:__codelineno-2-2" name="__codelineno-2-2"></a>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-3" id="chapter_2/question_07/Readme/:__codelineno-2-3" name="__codelineno-2-3"></a><span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-4" id="chapter_2/question_07/Readme/:__codelineno-2-4" name="__codelineno-2-4"></a><span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">mat4</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-5" id="chapter_2/question_07/Readme/:__codelineno-2-5" name="__codelineno-2-5"></a><span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"> </span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-6" id="chapter_2/question_07/Readme/:__codelineno-2-6" name="__codelineno-2-6"></a>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-7" id="chapter_2/question_07/Readme/:__codelineno-2-7" name="__codelineno-2-7"></a><span class="cm">/* o buffer gl_Position é ré-inserido no y */</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-8" id="chapter_2/question_07/Readme/:__codelineno-2-8" name="__codelineno-2-8"></a><span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-9" id="chapter_2/question_07/Readme/:__codelineno-2-9" name="__codelineno-2-9"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-10" id="chapter_2/question_07/Readme/:__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">    </span><span class="nb">gl_Position</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">a</span><span class="o">*</span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">y</span><span class="p">;</span><span class="w"> </span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-11" id="chapter_2/question_07/Readme/:__codelineno-2-11" name="__codelineno-2-11"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-2-12" id="chapter_2/question_07/Readme/:__codelineno-2-12" name="__codelineno-2-12"></a><span class="c1">//</span><span class="w"></span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><a href="#chapter_2/question_07/Readme/:__codelineno-3-1" id="chapter_2/question_07/Readme/:__codelineno-3-1" name="__codelineno-3-1"></a><span class="cp"># version 330</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-2" id="chapter_2/question_07/Readme/:__codelineno-3-2" name="__codelineno-3-2"></a>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-3" id="chapter_2/question_07/Readme/:__codelineno-3-3" name="__codelineno-3-3"></a><span class="k">layout</span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">mat4</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w"> </span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-4" id="chapter_2/question_07/Readme/:__codelineno-3-4" name="__codelineno-3-4"></a><span class="k">uniform</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">sum</span><span class="p">;</span><span class="w"> </span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-5" id="chapter_2/question_07/Readme/:__codelineno-3-5" name="__codelineno-3-5"></a>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-6" id="chapter_2/question_07/Readme/:__codelineno-3-6" name="__codelineno-3-6"></a><span class="cm">/* transpose é uma função que calcula a transposta já existem no Glsl */</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-7" id="chapter_2/question_07/Readme/:__codelineno-3-7" name="__codelineno-3-7"></a><span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-8" id="chapter_2/question_07/Readme/:__codelineno-3-8" name="__codelineno-3-8"></a><span class="p">{</span><span class="w">   </span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-9" id="chapter_2/question_07/Readme/:__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="kt">mat4</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">transpose</span><span class="p">(</span><span class="n">z</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">z</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-10" id="chapter_2/question_07/Readme/:__codelineno-3-10" name="__codelineno-3-10"></a>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-11" id="chapter_2/question_07/Readme/:__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">;</span><span class="w"> </span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-12" id="chapter_2/question_07/Readme/:__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">     </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-13" id="chapter_2/question_07/Readme/:__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">     </span><span class="c1">// desde que o laço for seja baseado em constantes ou variáveis uniforms</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-14" id="chapter_2/question_07/Readme/:__codelineno-3-14" name="__codelineno-3-14"></a><span class="w">     </span><span class="c1">// esse laço for é possível.</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-15" id="chapter_2/question_07/Readme/:__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-16" id="chapter_2/question_07/Readme/:__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">        </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">temp</span><span class="p">[</span><span class="n">i</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-17" id="chapter_2/question_07/Readme/:__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-18" id="chapter_2/question_07/Readme/:__codelineno-3-18" name="__codelineno-3-18"></a>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-19" id="chapter_2/question_07/Readme/:__codelineno-3-19" name="__codelineno-3-19"></a><span class="w">    </span><span class="c1">// recupera o valor no index 0</span><span class="w"></span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-20" id="chapter_2/question_07/Readme/:__codelineno-3-20" name="__codelineno-3-20"></a><span class="w">    </span><span class="nb">gl_Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span><span class="w"> </span>
<a href="#chapter_2/question_07/Readme/:__codelineno-3-21" id="chapter_2/question_07/Readme/:__codelineno-3-21" name="__codelineno-3-21"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
A grande vantagem de usar os shaders seria dependendo do tamanho do vetor de dados,  executar as instruções de uma só vez em todos os dados, na prática
assim como a vetorização envia em blocos, na GPU você  também enviaria em blocos, comumente chamados de buffers, a grande diferença seria justamente no fato que um bloco na GPU possui um tamanho muito maior que o bloco da vetorização.</p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGA/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGA/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGA/"><span class="pdf-order">3.7 </span>Question 10</h2><section class="md-typeset" data-url="/chapter_2/question_10/Readme/" id="chapter_2/question_10/Readme/:">
<h3 id="chapter_2/question_10/Readme/:questao-10"><span class="pdf-order">3.7.1 </span>Questão 10</h3>
<p>Suppose a program must execute <span class="arithmatex">\(10^{12}\)</span> instructions in order to solve a particular problem. Suppose further that a single processor system can solve the problem in <span class="arithmatex">\(10^6\)</span> seconds (about 11.6 days). So, on average, the single processor system executes <span class="arithmatex">\(10^6\)</span> or a million instructions per second. Now suppose that the program has been parallelized for execution on a distributed-memory system. Suppose also that if the parallel program uses <span class="arithmatex">\(p\)</span> processors, each processor will execute <span class="arithmatex">\(\frac{10^{12}}{p}\)</span> instructions and each processor must send <span class="arithmatex">\(10^9( p − 1)\)</span> messages. Finally, suppose that there is no additional overhead in executing the parallel program. That is, the program will complete after each processor has executed all of its instructions and sent all of its messages, and there won’t be any delays due to things such as waiting for messages.</p>
<ol>
<li>
<p>Suppose it takes <span class="arithmatex">\(10^{-9}\)</span> seconds to send a message. How long will it take the program to run with 1000 processors, if each processor is as fast as the single processor on which the serial program was run ?  </p>
</li>
<li>
<p>Suppose it takes <span class="arithmatex">\(10^3\)</span> seconds to send a message. How long will it take the program to run with 1000 processors ?</p>
</li>
</ol>
<h4 id="chapter_2/question_10/Readme/:mainpy">main.py</h4>
<p><div class="highlight"><pre><span></span><code><a href="#chapter_2/question_10/Readme/:__codelineno-0-1" id="chapter_2/question_10/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">datetime</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-2" id="chapter_2/question_10/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-3" id="chapter_2/question_10/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="n">NUMBER_OF_INSTRUCTIONS</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">12</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-4" id="chapter_2/question_10/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="n">NUMBER_OF_MESSAGES</span> <span class="o">=</span> <span class="mi">10</span><span class="o">**</span><span class="mi">9</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-5" id="chapter_2/question_10/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a><span class="n">AVERANGE_SECOND_PER_INSTRUCTIONS</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span> <span class="o">/</span> <span class="n">NUMBER_OF_INSTRUCTIONS</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-6" id="chapter_2/question_10/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-7" id="chapter_2/question_10/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-8" id="chapter_2/question_10/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a><span class="k">def</span> <span class="nf">cost_time_per_instruction</span><span class="p">(</span><span class="n">instructions</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-9" id="chapter_2/question_10/Readme/:__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="k">return</span> <span class="n">AVERANGE_SECOND_PER_INSTRUCTIONS</span> <span class="o">*</span> <span class="n">instructions</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-10" id="chapter_2/question_10/Readme/:__codelineno-0-10" name="__codelineno-0-10"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-11" id="chapter_2/question_10/Readme/:__codelineno-0-11" name="__codelineno-0-11"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-12" id="chapter_2/question_10/Readme/:__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">def</span> <span class="nf">number_of_instructions_per_processor</span><span class="p">(</span><span class="n">p</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-13" id="chapter_2/question_10/Readme/:__codelineno-0-13" name="__codelineno-0-13"></a>    <span class="k">return</span> <span class="n">NUMBER_OF_INSTRUCTIONS</span><span class="o">/</span><span class="n">p</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-14" id="chapter_2/question_10/Readme/:__codelineno-0-14" name="__codelineno-0-14"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-15" id="chapter_2/question_10/Readme/:__codelineno-0-15" name="__codelineno-0-15"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-16" id="chapter_2/question_10/Readme/:__codelineno-0-16" name="__codelineno-0-16"></a><span class="k">def</span> <span class="nf">number_of_messagens_per_processor</span><span class="p">(</span><span class="n">p</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-17" id="chapter_2/question_10/Readme/:__codelineno-0-17" name="__codelineno-0-17"></a>    <span class="k">return</span> <span class="n">NUMBER_OF_MESSAGES</span> <span class="o">*</span> <span class="p">(</span><span class="n">p</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-18" id="chapter_2/question_10/Readme/:__codelineno-0-18" name="__codelineno-0-18"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-19" id="chapter_2/question_10/Readme/:__codelineno-0-19" name="__codelineno-0-19"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-20" id="chapter_2/question_10/Readme/:__codelineno-0-20" name="__codelineno-0-20"></a><span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="n">time_per_message_in_seconds</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">processors</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-21" id="chapter_2/question_10/Readme/:__codelineno-0-21" name="__codelineno-0-21"></a>    <span class="nb">print</span><span class="p">(</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-22" id="chapter_2/question_10/Readme/:__codelineno-0-22" name="__codelineno-0-22"></a>        <span class="sa">f</span><span class="s1">'time to send a message: </span><span class="si">{</span><span class="n">time_per_message_in_seconds</span><span class="si">}</span><span class="s1"> processors: </span><span class="si">{</span><span class="n">processors</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-23" id="chapter_2/question_10/Readme/:__codelineno-0-23" name="__codelineno-0-23"></a>    <span class="n">instructions</span> <span class="o">=</span> <span class="n">number_of_instructions_per_processor</span><span class="p">(</span><span class="n">processors</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-24" id="chapter_2/question_10/Readme/:__codelineno-0-24" name="__codelineno-0-24"></a>    <span class="n">number_of_messages</span> <span class="o">=</span> <span class="n">number_of_messagens_per_processor</span><span class="p">(</span><span class="n">processors</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-25" id="chapter_2/question_10/Readme/:__codelineno-0-25" name="__codelineno-0-25"></a>    <span class="n">each_process_cost_in_seconds</span> <span class="o">=</span> <span class="n">cost_time_per_instruction</span><span class="p">(</span><span class="n">instructions</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-26" id="chapter_2/question_10/Readme/:__codelineno-0-26" name="__codelineno-0-26"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-27" id="chapter_2/question_10/Readme/:__codelineno-0-27" name="__codelineno-0-27"></a>    <span class="n">total_messages_in_seconds</span> <span class="o">=</span> <span class="n">time_per_message_in_seconds</span> <span class="o">*</span> <span class="n">number_of_messages</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-28" id="chapter_2/question_10/Readme/:__codelineno-0-28" name="__codelineno-0-28"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-29" id="chapter_2/question_10/Readme/:__codelineno-0-29" name="__codelineno-0-29"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">total_messages_in_seconds</span> <span class="o">+</span> <span class="n">each_process_cost_in_seconds</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-30" id="chapter_2/question_10/Readme/:__codelineno-0-30" name="__codelineno-0-30"></a>    <span class="n">result_date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">result</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-31" id="chapter_2/question_10/Readme/:__codelineno-0-31" name="__codelineno-0-31"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-32" id="chapter_2/question_10/Readme/:__codelineno-0-32" name="__codelineno-0-32"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'executing instructions is </span><span class="si">{</span><span class="n">instructions</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-33" id="chapter_2/question_10/Readme/:__codelineno-0-33" name="__codelineno-0-33"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'spend sending messages is </span><span class="si">{</span><span class="n">total_messages_in_seconds</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-34" id="chapter_2/question_10/Readme/:__codelineno-0-34" name="__codelineno-0-34"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-35" id="chapter_2/question_10/Readme/:__codelineno-0-35" name="__codelineno-0-35"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'total time in seconds: </span><span class="si">{</span><span class="n">result</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-36" id="chapter_2/question_10/Readme/:__codelineno-0-36" name="__codelineno-0-36"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">'total time in HH:MM:SS </span><span class="si">{</span><span class="n">result_date</span><span class="si">}</span><span class="s1">'</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-37" id="chapter_2/question_10/Readme/:__codelineno-0-37" name="__codelineno-0-37"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-38" id="chapter_2/question_10/Readme/:__codelineno-0-38" name="__codelineno-0-38"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-39" id="chapter_2/question_10/Readme/:__codelineno-0-39" name="__codelineno-0-39"></a><span class="k">def</span> <span class="nf">a</span><span class="p">():</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-40" id="chapter_2/question_10/Readme/:__codelineno-0-40" name="__codelineno-0-40"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-41" id="chapter_2/question_10/Readme/:__codelineno-0-41" name="__codelineno-0-41"></a>    <span class="n">time_per_message_in_seconds</span> <span class="o">=</span> <span class="mf">1e-9</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-42" id="chapter_2/question_10/Readme/:__codelineno-0-42" name="__codelineno-0-42"></a>    <span class="n">processors</span> <span class="o">=</span> <span class="mf">1e3</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-43" id="chapter_2/question_10/Readme/:__codelineno-0-43" name="__codelineno-0-43"></a>    <span class="n">simulate</span><span class="p">(</span><span class="n">time_per_message_in_seconds</span><span class="p">,</span> <span class="n">processors</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-44" id="chapter_2/question_10/Readme/:__codelineno-0-44" name="__codelineno-0-44"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-45" id="chapter_2/question_10/Readme/:__codelineno-0-45" name="__codelineno-0-45"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-46" id="chapter_2/question_10/Readme/:__codelineno-0-46" name="__codelineno-0-46"></a><span class="k">def</span> <span class="nf">b</span><span class="p">():</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-47" id="chapter_2/question_10/Readme/:__codelineno-0-47" name="__codelineno-0-47"></a>    <span class="n">time_per_message_in_seconds</span> <span class="o">=</span> <span class="mf">1e-3</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-48" id="chapter_2/question_10/Readme/:__codelineno-0-48" name="__codelineno-0-48"></a>    <span class="n">processors</span> <span class="o">=</span> <span class="mf">1e3</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-49" id="chapter_2/question_10/Readme/:__codelineno-0-49" name="__codelineno-0-49"></a>    <span class="n">simulate</span><span class="p">(</span><span class="n">time_per_message_in_seconds</span><span class="p">,</span> <span class="n">processors</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-50" id="chapter_2/question_10/Readme/:__codelineno-0-50" name="__codelineno-0-50"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-51" id="chapter_2/question_10/Readme/:__codelineno-0-51" name="__codelineno-0-51"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-52" id="chapter_2/question_10/Readme/:__codelineno-0-52" name="__codelineno-0-52"></a><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-53" id="chapter_2/question_10/Readme/:__codelineno-0-53" name="__codelineno-0-53"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">'A:'</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-54" id="chapter_2/question_10/Readme/:__codelineno-0-54" name="__codelineno-0-54"></a>    <span class="n">a</span><span class="p">()</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-55" id="chapter_2/question_10/Readme/:__codelineno-0-55" name="__codelineno-0-55"></a>    <span class="nb">print</span><span class="p">(</span><span class="s1">'B:'</span><span class="p">)</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-56" id="chapter_2/question_10/Readme/:__codelineno-0-56" name="__codelineno-0-56"></a>    <span class="n">b</span><span class="p">()</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-57" id="chapter_2/question_10/Readme/:__codelineno-0-57" name="__codelineno-0-57"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-58" id="chapter_2/question_10/Readme/:__codelineno-0-58" name="__codelineno-0-58"></a>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-59" id="chapter_2/question_10/Readme/:__codelineno-0-59" name="__codelineno-0-59"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
<a href="#chapter_2/question_10/Readme/:__codelineno-0-60" id="chapter_2/question_10/Readme/:__codelineno-0-60" name="__codelineno-0-60"></a>    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
Executando:
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_10/Readme/:__codelineno-1-1" id="chapter_2/question_10/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a>python chapter_2/question_10/main.py
<a href="#chapter_2/question_10/Readme/:__codelineno-1-2" id="chapter_2/question_10/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a>A:
<a href="#chapter_2/question_10/Readme/:__codelineno-1-3" id="chapter_2/question_10/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a><span class="nb">time</span> to send a message: 1e-09 processors: <span class="m">1000</span>.0
<a href="#chapter_2/question_10/Readme/:__codelineno-1-4" id="chapter_2/question_10/Readme/:__codelineno-1-4" name="__codelineno-1-4"></a>executing instructions is <span class="m">1000000000</span>.0
<a href="#chapter_2/question_10/Readme/:__codelineno-1-5" id="chapter_2/question_10/Readme/:__codelineno-1-5" name="__codelineno-1-5"></a>spend sending messages is <span class="m">999</span>.0000000000001
<a href="#chapter_2/question_10/Readme/:__codelineno-1-6" id="chapter_2/question_10/Readme/:__codelineno-1-6" name="__codelineno-1-6"></a>total <span class="nb">time</span> <span class="k">in</span> seconds: <span class="m">1999</span>.0
<a href="#chapter_2/question_10/Readme/:__codelineno-1-7" id="chapter_2/question_10/Readme/:__codelineno-1-7" name="__codelineno-1-7"></a>total <span class="nb">time</span> <span class="k">in</span> HH:MM:SS <span class="m">0</span>:33:19
<a href="#chapter_2/question_10/Readme/:__codelineno-1-8" id="chapter_2/question_10/Readme/:__codelineno-1-8" name="__codelineno-1-8"></a>B:
<a href="#chapter_2/question_10/Readme/:__codelineno-1-9" id="chapter_2/question_10/Readme/:__codelineno-1-9" name="__codelineno-1-9"></a><span class="nb">time</span> to send a message: <span class="m">0</span>.001 processors: <span class="m">1000</span>.0
<a href="#chapter_2/question_10/Readme/:__codelineno-1-10" id="chapter_2/question_10/Readme/:__codelineno-1-10" name="__codelineno-1-10"></a>executing instructions is <span class="m">1000000000</span>.0
<a href="#chapter_2/question_10/Readme/:__codelineno-1-11" id="chapter_2/question_10/Readme/:__codelineno-1-11" name="__codelineno-1-11"></a>spend sending messages is <span class="m">999000000</span>.0
<a href="#chapter_2/question_10/Readme/:__codelineno-1-12" id="chapter_2/question_10/Readme/:__codelineno-1-12" name="__codelineno-1-12"></a>total <span class="nb">time</span> <span class="k">in</span> seconds: <span class="m">999001000</span>.0
<a href="#chapter_2/question_10/Readme/:__codelineno-1-13" id="chapter_2/question_10/Readme/:__codelineno-1-13" name="__codelineno-1-13"></a>total <span class="nb">time</span> <span class="k">in</span> HH:MM:SS <span class="m">11562</span> days, <span class="m">12</span>:16:40
</code></pre></div>
11562 dias são 32 anos.</p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGU/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGU/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGU/"><span class="pdf-order">3.8 </span>Question 15</h2><section class="md-typeset" data-url="/chapter_2/question_15/Readme/" id="chapter_2/question_15/Readme/:">
<h3 id="chapter_2/question_15/Readme/:questao-15"><span class="pdf-order">3.8.1 </span>Questão 15</h3>
<ol>
<li>
<p>Suppose a shared-memory system uses snooping cache coherence and
write-back caches. Also suppose that core 0 has the variable x in its cache, and it executes the assignment x = 5. Finally suppose that core 1 doesn’t have x in its cache, and after core 0’s update to x, core 1 tries to execute y = x. What value will be assigned to y ? Why ?  </p>
</li>
<li>
<p>Suppose that the shared-memory system in the previous part uses a
directory-based protocol. What value will be assigned to y ? Why ?</p>
</li>
<li>
<p>Can you suggest how any problems you found in the first two parts might be solved ?</p>
</li>
</ol>
<h4 id="chapter_2/question_15/Readme/:1-what-value-will-be-assigned-to-y-why">1 What value will be assigned to y ? Why ?</h4>
<p>Não é possível determinar qual valor será atribuído ao y independentemente se for write-back ou write-through, uma vez que não
houve uma sincronização entre os cores sobre o valor de x. A atribuição
de y = x do core 1 pode ocorrer antes ou depois das operações no core 0.</p>
<h4 id="chapter_2/question_15/Readme/:shared-memory-system-in-the-previous-part-uses-a-directory-based-protocol-what-value-will-be-assigned-to-y-why">shared-memory system in the previous part uses a directory-based protocol What value will be assigned to y ? Why ?</h4>
<p>Com o sistema de arquivos, ao core 0 irá notificar o a memória principal que a consistência dos dados foi comprometida, no entanto, ainda não dá
para saber qual o valor de y, uma vez que a atribuição de y = x do core 1 pode ocorrer antes ou depois das operações no core 0.</p>
<h4 id="chapter_2/question_15/Readme/:can-you-suggest-how-any-problems-you-found-in-the-first-two-parts-might-be-solved">Can you suggest how any problems you found in the first two parts might be solved ?</h4>
<p>Existe dois problemas, o problema da consistência do dados, temos que garantir que ambos os cores façam alterações que ambas sejam capaz de
ler e o segundo é um mecanismo de sincronização, onde por exemplo, o core 1 espera o core 0 finalizar o seu processamento com a variável x para ai sim começar o seu. Podemos utilizar por exemplo um mutex, onde
inicialmente o core 0 faria o lock e ao finalizar ele entrega a chave a qual, o core 1 pegaria.</p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGY/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGY/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRGY/"><span class="pdf-order">3.9 </span>Question 16</h2><section class="md-typeset" data-url="/chapter_2/question_16/Readme/" id="chapter_2/question_16/Readme/:">
<h3 id="chapter_2/question_16/Readme/:questao-16"><span class="pdf-order">3.9.1 </span>Questão 16</h3>
<p>a. Suppose the run-time of a serial program is given by <span class="arithmatex">\(T_{serial} = n^2\)</span> , where the units of the run-time are in microseconds. Suppose that a parallelization of this program has run-time <span class="arithmatex">\(T_{parallel} = \frac{n^2}{p} + log_2(p)\)</span>. Write a program that finds the speedups and efficiencies of this program for various values of n and p. Run your program with <span class="arithmatex">\(n = 10, 20, 40, . . . , 320\)</span>, and <span class="arithmatex">\(p = 1, 2, 4, . . . , 128\)</span>. What happens to the speedups and efficiencies as <span class="arithmatex">\(p\)</span> is increased and <span class="arithmatex">\(n\)</span> is held fixed? What happens when <span class="arithmatex">\(p\)</span> is fixed and <span class="arithmatex">\(n\)</span> is increased ?</p>
<p>b. Suppose that <span class="arithmatex">\(T_{parallel} = \frac{T_{serial}}{p} + T_{overhead}\)</span> . Also suppose that we fix <span class="arithmatex">\(p\)</span> and increase the problem size.   </p>
<ul>
<li>Show that if <span class="arithmatex">\(T_{overhead}\)</span> grows more slowly than <span class="arithmatex">\(T_{serial}\)</span> , the parallel
efficiency will increase as we increase the problem size.</li>
<li>Show that if, on the other hand, <span class="arithmatex">\(T_{overhead}\)</span> grows faster than <span class="arithmatex">\(T_{serial}\)</span>, the parallel efficiency will decrease as we increase the problem size.</li>
</ul>
<h4 id="chapter_2/question_16/Readme/:16-a">16 a</h4>
<h5 id="chapter_2/question_16/Readme/:what-happens-to-the-speedups-and-efficiencies-as-p-is-increased-and-n-is-held-fixed">What happens to the speedups and efficiencies as p is increased and n is held fixed ?</h5>
<p><img alt="Tempo de execução por número de cores" src="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/chapter_2/question_16/16_a_n_fixed.svg" style=""/></p>
<p>Podemos observar a Amadahl's law, "a lei de Amadahl diz: a menos que virtualmente todo o programa serial seja paralelizado, o possível speedup, ou  ganhado de performance  será muito limitado, independentemente dos números de cores disponíveis." Nó exemplo em questão, podemos observar que a partir de
32 cores, o tempo da aplicação fica estagnado por volta dos 1606 micro segundos.</p>
<h5 id="chapter_2/question_16/Readme/:what-happens-when-p-is-fixed-and-n-is">What happens when p is fixed and n is</h5>
<p><img alt="Tempo de execução por número de units" src="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/chapter_2/question_16/16_a_p_fixed.svg" style=""/></p>
<p>Mesmo com da lei de Amdahl, podemos observar que o aumento de performance é bastante significante, valendo a pena paralelizar a aplicação, também pelo fato que os hardwares atualmente possuem mais
de um core.</p>
<h4 id="chapter_2/question_16/Readme/:16-b">16 b</h4>
<h5 id="chapter_2/question_16/Readme/:show-that-if-t_overhead-grows-more-slowly-than-t_serial-the-parallel-efficiency-will-increase-as-we-increase-the-problem-size">Show that if <span class="arithmatex">\(T_{overhead}\)</span> grows more slowly than <span class="arithmatex">\(T_{serial}\)</span> , the parallel efficiency will increase as we increase the problem size.</h5>
<p><img alt="" src="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/chapter_2/question_16/16_b_soft_overhead.svg" style=""/></p>
<p>Sabendo que o tempo serial é o quadrático da entrada, considerei o
tempo de overhead sendo: <span class="arithmatex">\(T_{overhead} = 5n\)</span>, ou seja, uma função linear. Comparando com o gráfico da letra <strong><em>a</em></strong> dificilmente é notado uma diferença entre os gráficos, podendo até ser desconsiderado.</p>
<h5 id="chapter_2/question_16/Readme/:show-that-if-on-the-other-hand-t_overhead-grows-faster-than-t_serial-the-parallel-efficiency-will-decrease-as-we-increase-the-problem-size">Show that if, on the other hand, <span class="arithmatex">\(T_{overhead}\)</span> grows faster than <span class="arithmatex">\(T_{serial}\)</span>, the parallel efficiency will decrease as we increase the problem size.</h5>
<p><img alt="" src="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribu%C3%ADda/parallel_programming_ufrn/site/chapter_2/question_16/16_b_hard_overhead.svg" style=""/></p>
<p>Sabendo que o tempo serial é o quadrático da entrada, considerei o
tempo de overhead sendo: <span class="arithmatex">\(T_{overhead} = 3T_{serial} = 3n^2\)</span>, ou seja, o overhead cresce 3 vezes mais que o serial. Comparando com o gráfico da letra <strong><em>a</em></strong>  podemos observar que paralelizar não é uma boa opção, pois
nem com <span class="arithmatex">\(p =128\)</span> consegue ser melhor do que com <span class="arithmatex">\(p =1\)</span>, ou seja, não paralelizar, ou seja, a solução serial sem o overhead.</p>
<h4 id="chapter_2/question_16/Readme/:observacoes">Observações</h4>
<p>Para essa atividade foi utilizado Python na sua versão <strong><em>3.10.4</em></strong>
para instalar as dependências do script e criar os gráficos:</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_16/Readme/:__codelineno-0-1" id="chapter_2/question_16/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># para criar um ambiente virtual, suponto que tenha python 3.10.4 instalado</span>
<a href="#chapter_2/question_16/Readme/:__codelineno-0-2" id="chapter_2/question_16/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a>python -mnenv .env
<a href="#chapter_2/question_16/Readme/:__codelineno-0-3" id="chapter_2/question_16/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="nb">source</span> .env/bin/activate
<a href="#chapter_2/question_16/Readme/:__codelineno-0-4" id="chapter_2/question_16/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1"># instalando as dependências e executando a aplicação</span>
<a href="#chapter_2/question_16/Readme/:__codelineno-0-5" id="chapter_2/question_16/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a>pip install -r requirements.txt
<a href="#chapter_2/question_16/Readme/:__codelineno-0-6" id="chapter_2/question_16/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a>python main.py
</code></pre></div>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRG4/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRG4/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRG4/"><span class="pdf-order">3.10 </span>Question 17</h2><section class="md-typeset" data-url="/chapter_2/question_17/Readme/" id="chapter_2/question_17/Readme/:">
<h3 id="chapter_2/question_17/Readme/:questao-17"><span class="pdf-order">3.10.1 </span>Questão 17</h3>
<p>A parallel program that obtains a speedup greater than p—the number of processes or threads—is sometimes said to have <strong>superlinear speedup</strong>. However, many authors don’t count programs that overcome “resource limitations” as having superlinear speedup. For example, a program that must use secondary storage for its data when it’s run on a single processor system might be able to fit all its data into main memory when run on a large distributed-memory system. Give another example of how a program might overcome a resource limitation and obtain speedups greater than p</p>
<h4 id="chapter_2/question_17/Readme/:http-server-em-esp32">HTTP server em ESP32</h4>
<p>Sistemas embarcados com  CPUs multi-core. Atualmente já existem microcontroladores como <strong>ESP32</strong> que dependendo do modelo pode possuir
mais de um núcleo de processamento. Sabendo que todo o programa fica carregado na memória, então uma aplicação como um servidor HTTP, pode
ter mais que o dobro de performance, quando observado o seu requests por segundo.</p>
<p>Fazemos o seguinte cenário:</p>
<p>Temos um desenvolvedor que sabe que executar operações de escrita em hardware é uma operação insegura e utiliza estruturas de
dados para sincronização dessas operações, cada dispositivo tem seu tempo de sincronização. Temos que o dispositivo A custa 5 milissegundos,
e dispositivo B custa 4 milissegundos. Sabendo que se criarmos a aplicação em single core,  temos que esperar a sincronização de A e B e que
modificar o tempo de sincronização de um dispositivo custa 3 milissegundos. Dado que se tem 2 cores, 2 conversores AD, se delegarmos cada dispositivo
para um core, eliminaremos 3 milissegundos do processo de escrita no seu pior cenário. Supondo que o tempo de um request fique 30% na escrita de
um dispositivo e que ele gasta em outras operações <strong>8 milissegundos</strong> temos dois cenários,</p>
<h5 id="chapter_2/question_17/Readme/:cenario-1">Cenário 1</h5>
<p><span class="arithmatex">\(R_{e}=0.7(8) + 0.3(5+3)\)</span></p>
<p><span class="arithmatex">\(R_{e}=8\)</span>, ou seja uma Request de escrita custa 8 milissegundos</p>
<h5 id="chapter_2/question_17/Readme/:cenario-2">Cenário 2</h5>
<p><span class="arithmatex">\(R_{e}=0.7(8) + 0.3(5)\)</span></p>
<p><span class="arithmatex">\(R_{e}=7.1\)</span>, ou seja uma Request de escrita custa 7.1 milissegundos, além do fato do <strong>ESP32</strong> ser capaz de realizar o dobro de requests</p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRHE/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRHE/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBRHE/"><span class="pdf-order">3.11 </span>Question 19</h2><section class="md-typeset" data-url="/chapter_2/question_19/Readme/" id="chapter_2/question_19/Readme/:">
<h3 id="chapter_2/question_19/Readme/:questao-19"><span class="pdf-order">3.11.1 </span>Questão 19</h3>
<p>Suppose <span class="arithmatex">\(T_{serial} = n\)</span>  and <span class="arithmatex">\(T_{parallel} = \frac{n}{p} + log_2 (p)\)</span>, where times are in microseconds. If we increase <span class="arithmatex">\(p\)</span> by a factor of <span class="arithmatex">\(k\)</span>, find a formula for how much we’ll need to increase n in order to maintain constant efficiency. How much should we increase <span class="arithmatex">\(n\)</span> by if we double the number of processes from 8 to 16 ? Is the parallel program scalable ?</p>
<h4 id="chapter_2/question_19/Readme/:encontre-uma-formula-para-o-quanto-nos-teremos-que-aumentar-n-para-obter-uma-eficiencia-constante">Encontre uma formula para o quanto nós teremos que aumentar <span class="arithmatex">\(n\)</span> para obter uma eficiência constante.</h4>
<p><span class="arithmatex">\(E(p) = \frac{T_{serial}}{pT_{parallel}}\)</span></p>
<p><span class="arithmatex">\(E(p) = \frac{n}{p(\frac{n}{p} + log_2(p))}\)</span> </p>
<p><span class="arithmatex">\(E(p) = \frac{n}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(E(kp) = \frac{n}{n + kplog_2(kp)}\)</span></p>
<p>Se considerarmos a constante <span class="arithmatex">\(A\)</span> o número de vezes que temos que aumentar <span class="arithmatex">\(n\)</span> para
obter uma eficiência constante, logo:</p>
<p><span class="arithmatex">\(E_{a} (kp) = \frac{An}{An + kplog_2(kp)}\)</span></p>
<p><span class="arithmatex">\(E_{a}(kp) = E(p)\)</span></p>
<p><span class="arithmatex">\(\frac{An}{An + kplog_2(kp)} =  \frac{n}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(An =\frac{n(nA + kplog_2(kp))}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(A = \frac{nA + kplog_2(kp)}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(A =  \frac{nA}{n + plog_2(p)} +  \frac{ kplog_2(kp)}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(A - \frac{nA}{n + plog_2(p)}= \frac{ kplog_2(kp)}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(A[ 1 - \frac{n}{n + plog_2(p)}]= \frac{ kplog_2(kp)}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(A[\frac{n + plog_2(p)}{n + plog_2(p)} - \frac{n}{n + plog_2(p)}]= \frac{ kplog_2(kp)}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(A\frac{plog_2(p)}{n + plog_2(p)} = \frac{ kplog_2(kp)}{n + plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(Aplog_2(p) = kplog_2(kp)\)</span></p>
<p><span class="arithmatex">\(A = \frac{kplog_2(kp)}{plog_2(p)}\)</span></p>
<p><span class="arithmatex">\(A = \frac{klog_2(kp)}{log_2(p)}\)</span></p>
<h4 id="chapter_2/question_19/Readme/:quantas-vezes-nos-devemos-aumentar-n-se-nos-dobrarmos-o-numero-de-cores-de-8-para-16">Quantas vezes nós devemos aumentar <span class="arithmatex">\(n\)</span> se nós dobrarmos o número de cores de 8 para 16</h4>
<p><span class="arithmatex">\(A(k,p) =\frac{klog_2(kp)}{log_2(p)}\)</span>
se <span class="arithmatex">\(k = 2\)</span> e <span class="arithmatex">\(p=8\)</span> então:</p>
<p><span class="arithmatex">\(A = \frac{2log_{2}(16)}{log_{2}(8)}\)</span></p>
<p><span class="arithmatex">\(A = \frac{2(4)}{3}\)</span></p>
<p><span class="arithmatex">\(A = \frac{8}{3}\)</span></p>
<h4 id="chapter_2/question_19/Readme/:o-programa-paralelo-e-escalavel">O programa paralelo é escalável ?</h4>
<p>Dado a definição do autor sim. Para o autor escalável é quando a eficiência de um programa paralelo se mantém constante, ou seja, se existe uma taxa que relaciona o crescimento do tamanho do problema com o crescimento do número de threads/processos, então o programa paralelo é fracamente escalável (<strong><em>weakly scalable</em></strong>), .</p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGA/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGA/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGA/"><span class="pdf-order">3.12 </span>Question 20</h2><section class="md-typeset" data-url="/chapter_2/question_20/Readme/" id="chapter_2/question_20/Readme/:">
<h3 id="chapter_2/question_20/Readme/:questao-20"><span class="pdf-order">3.12.1 </span>Questão 20</h3>
<p>Is a program that obtains linear speedup <strong>strongly</strong> scalable ? Explain your answer.</p>
<p>Dado a definição do autor sim. Para o autor escalável é quando a eficiência de um programa paralelo se mantém constante. Linear speedup
pode ser escrito pela seguinte expressão:</p>
<p><span class="arithmatex">\(S = \frac{T_{serial}}{T_{parallel}} = p\)</span>, onde <span class="arithmatex">\(p\)</span> é número de cores e <span class="arithmatex">\(S\)</span> é o speedup.</p>
<p>Portanto dado que eficiência é dado pela seguinte expressão:</p>
<p><span class="arithmatex">\(E = \frac{T_{serial}}{pT_{parallel}}\)</span>, onde <span class="arithmatex">\(T_{serial}\)</span> é o tempo da aplicação em serial e <span class="arithmatex">\(T_{parallel}\)</span> o tempo da aplicação em paralelizada.</p>
<p>se o speedup for linear, ou seja, <span class="arithmatex">\(S=p\)</span>, temos que</p>
<p><span class="arithmatex">\(E = \frac{S}{p}\)</span>, portanto</p>
<p><span class="arithmatex">\(E = \frac{p}{p} = 1\)</span>, Como a eficiência é constante, logo, por definição a aplicação é fortemente escalável (<strong><em>strongly scalable</em></strong>).</p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGE/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGE/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGE/"><span class="pdf-order">3.13 </span>Question 21</h2><section class="md-typeset" data-url="/chapter_2/question_21/Readme/" id="chapter_2/question_21/Readme/:">
<h3 id="chapter_2/question_21/Readme/:questao-21"><span class="pdf-order">3.13.1 </span>Questão 21</h3>
<p>Bob has a program that he wants to time with two sets of data, <em>input_data1</em> and <em>input_data2</em>. To get some idea of what to expect before adding timing functions to the code he’s interested in, he runs the program with two sets of data and the Unix shell command <em>time</em>:
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_21/Readme/:__codelineno-0-1" id="chapter_2/question_21/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a>$ <span class="nb">time</span> ./bobs prog &lt; input data1
<a href="#chapter_2/question_21/Readme/:__codelineno-0-2" id="chapter_2/question_21/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a>real 0m0.001s
<a href="#chapter_2/question_21/Readme/:__codelineno-0-3" id="chapter_2/question_21/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a>user 0m0.001s
<a href="#chapter_2/question_21/Readme/:__codelineno-0-4" id="chapter_2/question_21/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a>sys 0m0.000s
<a href="#chapter_2/question_21/Readme/:__codelineno-0-5" id="chapter_2/question_21/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a>$ <span class="nb">time</span> ./bobs prog &lt; input data2
<a href="#chapter_2/question_21/Readme/:__codelineno-0-6" id="chapter_2/question_21/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a>real 1m1.234s
<a href="#chapter_2/question_21/Readme/:__codelineno-0-7" id="chapter_2/question_21/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a>user 1m0.001s
<a href="#chapter_2/question_21/Readme/:__codelineno-0-8" id="chapter_2/question_21/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a>sys 0m0.111s
</code></pre></div>
The timer function Bob is using has millisecond resolution. Should Bob use it to time his program with the first set of data ? What about the second set of data ? Why or why not ?</p>
<p>Segundo a referência o commando time, retorna três valores:  </p>
<ul>
<li>real, que o tempo total desde a inicialização até a terminação do programa</li>
<li>user, o total de cpu usado pelo programa em modo usuário, ou seja,o a quantidade de cpu usada, eliminando chamadas do sistema e o tempo que o sistema ficou bloqueado ou aguardando outros processos.</li>
<li>Sys, o tempo de cpu usado pelo kernel/ SO para esse processo em específico.</li>
</ul>
<h4 id="chapter_2/question_21/Readme/:primeiro-timer">Primeiro timer</h4>
<p>Na primeira chamada observamos que o tempo coletado é praticamente 0, ou seja, o tempo levado para executar o programa esta fora da resolução do relógio do sistema, por tanto não podemos concluir nada sobre a primeira chamada e se essa for a primeira chamada é bem provável que a próxima também dê praticamente 0, uma vez que a aplicação pode ter pouco tamanho
de entrada se comparado a máquina em questão. </p>
<h4 id="chapter_2/question_21/Readme/:segundo-timer">Segundo timer</h4>
<p>Já no segundo timer podemos observar informações sobre a aplicação, estão dentro da resolução do relógio e que maior parte da aplicação foi gasta em  em user mode. Bob pode fazer proveito dessas informações.</p>
</section></section><section class="md-typeset" data-url="/INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGQ/" id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGQ/:"><h2 id="INUGC4DUMVZCAMQ/KF2WK43UNFXW4IBSGQ/"><span class="pdf-order">3.14 </span>Question 24</h2><section class="md-typeset" data-url="/chapter_2/question_24/Readme/" id="chapter_2/question_24/Readme/:">
<h3 id="chapter_2/question_24/Readme/:questao-24"><span class="pdf-order">3.14.1 </span>Questão 24</h3>
<p>If you haven’t already done so in Chapter 1, try to write pseudo-code for our tree-structured global sum, which sums the elements of loc_bin_cts. First consider how this might be done in a shared-memory setting. Then consider how this might be done in a distributed-memory setting. In the shared-memory setting, which variables are shared and which are private ?</p>
<p>Um código em C++, mas sem o uso de estruturas de dados de programação paralela, pode ser observado na resposta da questão 5 <a href="#chapter_1/question_5/question_5.cpp/:">Question_5.cpp</a>. Também foi implementado o <strong>mesmo</strong> algoritmo em rust e nessa implementação foi utilizado threads, smart pointers e mutex para
resolver o problema. O código pode ser observado aqui: <a href="#chapter_2/question_24/src/main.rs/:">main.rs</a></p>
<h4 id="chapter_2/question_24/Readme/:mainrs">Main.rs</h4>
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_24/Readme/:__codelineno-0-1" id="chapter_2/question_24/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-2" id="chapter_2/question_24/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="n">sync</span>::<span class="p">{</span><span class="n">Arc</span><span class="p">,</span><span class="w"> </span><span class="n">Mutex</span><span class="p">},</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-3" id="chapter_2/question_24/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="n">thread</span>::<span class="n">JoinHandle</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-4" id="chapter_2/question_24/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="p">};</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-5" id="chapter_2/question_24/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-6" id="chapter_2/question_24/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a><span class="cp">#[derive(Debug)]</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-7" id="chapter_2/question_24/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a><span class="k">struct</span> <span class="nc">Node</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-8" id="chapter_2/question_24/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">    </span><span class="n">data</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-9" id="chapter_2/question_24/Readme/:__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">    </span><span class="n">neighborhoods</span>: <span class="nc">Mutex</span><span class="o">&lt;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="n">JoinHandle</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-10" id="chapter_2/question_24/Readme/:__codelineno-0-10" name="__codelineno-0-10"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-11" id="chapter_2/question_24/Readme/:__codelineno-0-11" name="__codelineno-0-11"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-12" id="chapter_2/question_24/Readme/:__codelineno-0-12" name="__codelineno-0-12"></a><span class="k">impl</span><span class="w"> </span><span class="n">Node</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-13" id="chapter_2/question_24/Readme/:__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">    </span><span class="k">fn</span> <span class="nf">from_value</span><span class="p">(</span><span class="n">data</span>: <span class="kt">i32</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Node</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-14" id="chapter_2/question_24/Readme/:__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">        </span><span class="n">Node</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-15" id="chapter_2/question_24/Readme/:__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">            </span><span class="n">data</span>: <span class="nc">vec</span><span class="o">!</span><span class="p">[</span><span class="n">data</span><span class="p">],</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-16" id="chapter_2/question_24/Readme/:__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">            </span><span class="n">neighborhoods</span>: <span class="nc">Mutex</span>::<span class="n">new</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[]),</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-17" id="chapter_2/question_24/Readme/:__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-18" id="chapter_2/question_24/Readme/:__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-19" id="chapter_2/question_24/Readme/:__codelineno-0-19" name="__codelineno-0-19"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-20" id="chapter_2/question_24/Readme/:__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">    </span><span class="k">fn</span> <span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">i32</span> <span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-21" id="chapter_2/question_24/Readme/:__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">        </span><span class="cm">/*</span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-22" id="chapter_2/question_24/Readme/:__codelineno-0-22" name="__codelineno-0-22"></a><span class="cm">            Em termos de memória essa função desaloca toda memória</span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-23" id="chapter_2/question_24/Readme/:__codelineno-0-23" name="__codelineno-0-23"></a><span class="cm">            usada pela estrutura Node e retorna um inteiro de 32bits.</span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-24" id="chapter_2/question_24/Readme/:__codelineno-0-24" name="__codelineno-0-24"></a><span class="cm">            Dado que foi utilizado safe rust e o código compila, logo esse</span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-25" id="chapter_2/question_24/Readme/:__codelineno-0-25" name="__codelineno-0-25"></a><span class="cm">            código está livre data race e como não referências cíclicas</span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-26" id="chapter_2/question_24/Readme/:__codelineno-0-26" name="__codelineno-0-26"></a><span class="cm">            também está livre de memory leak.</span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-27" id="chapter_2/question_24/Readme/:__codelineno-0-27" name="__codelineno-0-27"></a><span class="cm">         */</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-28" id="chapter_2/question_24/Readme/:__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span>: <span class="kt">i32</span> <span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">sum</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-29" id="chapter_2/question_24/Readme/:__codelineno-0-29" name="__codelineno-0-29"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-30" id="chapter_2/question_24/Readme/:__codelineno-0-30" name="__codelineno-0-30"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">neighborhoods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">neighborhoods</span><span class="p">.</span><span class="n">into_inner</span><span class="p">().</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-31" id="chapter_2/question_24/Readme/:__codelineno-0-31" name="__codelineno-0-31"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-32" id="chapter_2/question_24/Readme/:__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">neighborhoods_sum</span>: <span class="kt">i32</span> <span class="o">=</span><span class="w"> </span><span class="n">neighborhoods</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-33" id="chapter_2/question_24/Readme/:__codelineno-0-33" name="__codelineno-0-33"></a><span class="w">            </span><span class="p">.</span><span class="n">into_iter</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-34" id="chapter_2/question_24/Readme/:__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">            </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">handle</span><span class="o">|</span><span class="w"> </span><span class="n">handle</span><span class="p">.</span><span class="n">join</span><span class="p">().</span><span class="n">expect</span><span class="p">(</span><span class="s">"Unable to lock neighborhood"</span><span class="p">))</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-35" id="chapter_2/question_24/Readme/:__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">            </span><span class="p">.</span><span class="n">sum</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-36" id="chapter_2/question_24/Readme/:__codelineno-0-36" name="__codelineno-0-36"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-37" id="chapter_2/question_24/Readme/:__codelineno-0-37" name="__codelineno-0-37"></a><span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">neighborhoods_sum</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-38" id="chapter_2/question_24/Readme/:__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-39" id="chapter_2/question_24/Readme/:__codelineno-0-39" name="__codelineno-0-39"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-40" id="chapter_2/question_24/Readme/:__codelineno-0-40" name="__codelineno-0-40"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-41" id="chapter_2/question_24/Readme/:__codelineno-0-41" name="__codelineno-0-41"></a><span class="k">fn</span> <span class="nf">start_to_compute_node</span><span class="p">(</span><span class="n">node</span>: <span class="nc">Node</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">JoinHandle</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-42" id="chapter_2/question_24/Readme/:__codelineno-0-42" name="__codelineno-0-42"></a><span class="w">    </span><span class="n">std</span>::<span class="n">thread</span>::<span class="n">spawn</span><span class="p">(</span><span class="k">move</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-43" id="chapter_2/question_24/Readme/:__codelineno-0-43" name="__codelineno-0-43"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="p">.</span><span class="n">compute</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-44" id="chapter_2/question_24/Readme/:__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">        </span><span class="n">std</span>::<span class="n">thread</span>::<span class="n">sleep</span><span class="p">(</span><span class="n">std</span>::<span class="n">time</span>::<span class="n">Duration</span>::<span class="n">from_micros</span><span class="p">(</span><span class="mi">500</span><span class="p">));</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-45" id="chapter_2/question_24/Readme/:__codelineno-0-45" name="__codelineno-0-45"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-46" id="chapter_2/question_24/Readme/:__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">        </span><span class="n">result</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-47" id="chapter_2/question_24/Readme/:__codelineno-0-47" name="__codelineno-0-47"></a><span class="w">    </span><span class="p">})</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-48" id="chapter_2/question_24/Readme/:__codelineno-0-48" name="__codelineno-0-48"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-49" id="chapter_2/question_24/Readme/:__codelineno-0-49" name="__codelineno-0-49"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-50" id="chapter_2/question_24/Readme/:__codelineno-0-50" name="__codelineno-0-50"></a><span class="k">fn</span> <span class="nf">receive_value</span><span class="p">(</span><span class="n">left</span>: <span class="nc">Arc</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">right</span>: <span class="nc">Arc</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-51" id="chapter_2/question_24/Readme/:__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span>::<span class="n">try_unwrap</span><span class="p">(</span><span class="n">right</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-52" id="chapter_2/question_24/Readme/:__codelineno-0-52" name="__codelineno-0-52"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-53" id="chapter_2/question_24/Readme/:__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">left_neighborhoods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">left</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-54" id="chapter_2/question_24/Readme/:__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">        </span><span class="p">.</span><span class="n">neighborhoods</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-55" id="chapter_2/question_24/Readme/:__codelineno-0-55" name="__codelineno-0-55"></a><span class="w">        </span><span class="p">.</span><span class="n">lock</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-56" id="chapter_2/question_24/Readme/:__codelineno-0-56" name="__codelineno-0-56"></a><span class="w">        </span><span class="p">.</span><span class="n">expect</span><span class="p">(</span><span class="s">"Unable to lock neighborhood"</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-57" id="chapter_2/question_24/Readme/:__codelineno-0-57" name="__codelineno-0-57"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-58" id="chapter_2/question_24/Readme/:__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">    </span><span class="n">left_neighborhoods</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">start_to_compute_node</span><span class="p">(</span><span class="n">right</span><span class="p">))</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-59" id="chapter_2/question_24/Readme/:__codelineno-0-59" name="__codelineno-0-59"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-60" id="chapter_2/question_24/Readme/:__codelineno-0-60" name="__codelineno-0-60"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-61" id="chapter_2/question_24/Readme/:__codelineno-0-61" name="__codelineno-0-61"></a><span class="k">fn</span> <span class="nf">create_new_tree_bitwise</span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="n">nodes</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-62" id="chapter_2/question_24/Readme/:__codelineno-0-62" name="__codelineno-0-62"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">len</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-63" id="chapter_2/question_24/Readme/:__codelineno-0-63" name="__codelineno-0-63"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-64" id="chapter_2/question_24/Readme/:__codelineno-0-64" name="__codelineno-0-64"></a><span class="w">    </span><span class="k">match</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-65" id="chapter_2/question_24/Readme/:__codelineno-0-65" name="__codelineno-0-65"></a><span class="w">        </span><span class="mi">2</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-66" id="chapter_2/question_24/Readme/:__codelineno-0-66" name="__codelineno-0-66"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-67" id="chapter_2/question_24/Readme/:__codelineno-0-67" name="__codelineno-0-67"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-68" id="chapter_2/question_24/Readme/:__codelineno-0-68" name="__codelineno-0-68"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-69" id="chapter_2/question_24/Readme/:__codelineno-0-69" name="__codelineno-0-69"></a><span class="w">            </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">.</span><span class="n">clone</span><span class="p">(),</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-70" id="chapter_2/question_24/Readme/:__codelineno-0-70" name="__codelineno-0-70"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-71" id="chapter_2/question_24/Readme/:__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">            </span><span class="fm">vec!</span><span class="p">[</span><span class="n">left</span><span class="p">]</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-72" id="chapter_2/question_24/Readme/:__codelineno-0-72" name="__codelineno-0-72"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-73" id="chapter_2/question_24/Readme/:__codelineno-0-73" name="__codelineno-0-73"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-74" id="chapter_2/question_24/Readme/:__codelineno-0-74" name="__codelineno-0-74"></a><span class="w">        </span><span class="mi">3</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-75" id="chapter_2/question_24/Readme/:__codelineno-0-75" name="__codelineno-0-75"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-76" id="chapter_2/question_24/Readme/:__codelineno-0-76" name="__codelineno-0-76"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">middle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-77" id="chapter_2/question_24/Readme/:__codelineno-0-77" name="__codelineno-0-77"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-78" id="chapter_2/question_24/Readme/:__codelineno-0-78" name="__codelineno-0-78"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-79" id="chapter_2/question_24/Readme/:__codelineno-0-79" name="__codelineno-0-79"></a><span class="w">            </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">.</span><span class="n">clone</span><span class="p">(),</span><span class="w"> </span><span class="n">middle</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-80" id="chapter_2/question_24/Readme/:__codelineno-0-80" name="__codelineno-0-80"></a><span class="w">            </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">.</span><span class="n">clone</span><span class="p">(),</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-81" id="chapter_2/question_24/Readme/:__codelineno-0-81" name="__codelineno-0-81"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-82" id="chapter_2/question_24/Readme/:__codelineno-0-82" name="__codelineno-0-82"></a><span class="w">            </span><span class="fm">vec!</span><span class="p">[</span><span class="n">left</span><span class="p">]</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-83" id="chapter_2/question_24/Readme/:__codelineno-0-83" name="__codelineno-0-83"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-84" id="chapter_2/question_24/Readme/:__codelineno-0-84" name="__codelineno-0-84"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-85" id="chapter_2/question_24/Readme/:__codelineno-0-85" name="__codelineno-0-85"></a><span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-86" id="chapter_2/question_24/Readme/:__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">new_nodes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[];</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-87" id="chapter_2/question_24/Readme/:__codelineno-0-87" name="__codelineno-0-87"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-88" id="chapter_2/question_24/Readme/:__codelineno-0-88" name="__codelineno-0-88"></a><span class="w">            </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">size</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-89" id="chapter_2/question_24/Readme/:__codelineno-0-89" name="__codelineno-0-89"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-90" id="chapter_2/question_24/Readme/:__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-91" id="chapter_2/question_24/Readme/:__codelineno-0-91" name="__codelineno-0-91"></a><span class="w">                </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-92" id="chapter_2/question_24/Readme/:__codelineno-0-92" name="__codelineno-0-92"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-93" id="chapter_2/question_24/Readme/:__codelineno-0-93" name="__codelineno-0-93"></a><span class="w">                </span><span class="n">new_nodes</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">nodes</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-94" id="chapter_2/question_24/Readme/:__codelineno-0-94" name="__codelineno-0-94"></a><span class="w">            </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-95" id="chapter_2/question_24/Readme/:__codelineno-0-95" name="__codelineno-0-95"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-96" id="chapter_2/question_24/Readme/:__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="o">..</span><span class="n">size</span><span class="p">).</span><span class="n">step_by</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-97" id="chapter_2/question_24/Readme/:__codelineno-0-97" name="__codelineno-0-97"></a><span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">left</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-98" id="chapter_2/question_24/Readme/:__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">                </span><span class="kd">let</span><span class="w"> </span><span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nodes</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-99" id="chapter_2/question_24/Readme/:__codelineno-0-99" name="__codelineno-0-99"></a><span class="w">                </span><span class="fm">println!</span><span class="p">(</span><span class="s">"i: {} left: {:?} right: {:?}"</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-100" id="chapter_2/question_24/Readme/:__codelineno-0-100" name="__codelineno-0-100"></a><span class="w">                </span><span class="n">receive_value</span><span class="p">(</span><span class="n">left</span><span class="p">.</span><span class="n">clone</span><span class="p">(),</span><span class="w"> </span><span class="n">right</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-101" id="chapter_2/question_24/Readme/:__codelineno-0-101" name="__codelineno-0-101"></a><span class="w">                </span><span class="n">new_nodes</span><span class="p">.</span><span class="n">push</span><span class="p">(</span><span class="n">left</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-102" id="chapter_2/question_24/Readme/:__codelineno-0-102" name="__codelineno-0-102"></a><span class="w">            </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-103" id="chapter_2/question_24/Readme/:__codelineno-0-103" name="__codelineno-0-103"></a><span class="w">            </span><span class="fm">println!</span><span class="p">(</span><span class="s">"Next iteration"</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-104" id="chapter_2/question_24/Readme/:__codelineno-0-104" name="__codelineno-0-104"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-105" id="chapter_2/question_24/Readme/:__codelineno-0-105" name="__codelineno-0-105"></a><span class="w">            </span><span class="n">create_new_tree_bitwise</span><span class="p">(</span><span class="n">new_nodes</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-106" id="chapter_2/question_24/Readme/:__codelineno-0-106" name="__codelineno-0-106"></a><span class="w">        </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-107" id="chapter_2/question_24/Readme/:__codelineno-0-107" name="__codelineno-0-107"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-108" id="chapter_2/question_24/Readme/:__codelineno-0-108" name="__codelineno-0-108"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-109" id="chapter_2/question_24/Readme/:__codelineno-0-109" name="__codelineno-0-109"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-110" id="chapter_2/question_24/Readme/:__codelineno-0-110" name="__codelineno-0-110"></a><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-111" id="chapter_2/question_24/Readme/:__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-112" id="chapter_2/question_24/Readme/:__codelineno-0-112" name="__codelineno-0-112"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-113" id="chapter_2/question_24/Readme/:__codelineno-0-113" name="__codelineno-0-113"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">nodes</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-114" id="chapter_2/question_24/Readme/:__codelineno-0-114" name="__codelineno-0-114"></a><span class="w">        </span><span class="p">.</span><span class="n">clone</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-115" id="chapter_2/question_24/Readme/:__codelineno-0-115" name="__codelineno-0-115"></a><span class="w">        </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-116" id="chapter_2/question_24/Readme/:__codelineno-0-116" name="__codelineno-0-116"></a><span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">v</span><span class="o">|</span><span class="w"> </span><span class="n">Node</span>::<span class="n">from_value</span><span class="p">(</span><span class="n">v</span><span class="p">))</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-117" id="chapter_2/question_24/Readme/:__codelineno-0-117" name="__codelineno-0-117"></a><span class="w">        </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">node</span><span class="o">|</span><span class="w"> </span><span class="n">Arc</span>::<span class="n">new</span><span class="p">(</span><span class="n">node</span><span class="p">))</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-118" id="chapter_2/question_24/Readme/:__codelineno-0-118" name="__codelineno-0-118"></a><span class="w">        </span><span class="p">.</span><span class="n">collect</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-119" id="chapter_2/question_24/Readme/:__codelineno-0-119" name="__codelineno-0-119"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-120" id="chapter_2/question_24/Readme/:__codelineno-0-120" name="__codelineno-0-120"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_new_tree_bitwise</span><span class="p">(</span><span class="n">nodes</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">clone</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-121" id="chapter_2/question_24/Readme/:__codelineno-0-121" name="__codelineno-0-121"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-122" id="chapter_2/question_24/Readme/:__codelineno-0-122" name="__codelineno-0-122"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span>::<span class="n">try_unwrap</span><span class="p">(</span><span class="n">root</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-123" id="chapter_2/question_24/Readme/:__codelineno-0-123" name="__codelineno-0-123"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-124" id="chapter_2/question_24/Readme/:__codelineno-0-124" name="__codelineno-0-124"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">root</span><span class="p">.</span><span class="n">compute</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-125" id="chapter_2/question_24/Readme/:__codelineno-0-125" name="__codelineno-0-125"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-126" id="chapter_2/question_24/Readme/:__codelineno-0-126" name="__codelineno-0-126"></a><span class="w">    </span><span class="fm">assert!</span><span class="p">(</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">==</span><span class="w">  </span><span class="n">data</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">sum</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">());</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-127" id="chapter_2/question_24/Readme/:__codelineno-0-127" name="__codelineno-0-127"></a><span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-128" id="chapter_2/question_24/Readme/:__codelineno-0-128" name="__codelineno-0-128"></a><span class="w">        </span><span class="s">"total: {} data sum {} "</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-129" id="chapter_2/question_24/Readme/:__codelineno-0-129" name="__codelineno-0-129"></a><span class="w">        </span><span class="n">total</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-130" id="chapter_2/question_24/Readme/:__codelineno-0-130" name="__codelineno-0-130"></a><span class="w">        </span><span class="n">data</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">sum</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-131" id="chapter_2/question_24/Readme/:__codelineno-0-131" name="__codelineno-0-131"></a><span class="w">    </span><span class="p">);</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-132" id="chapter_2/question_24/Readme/:__codelineno-0-132" name="__codelineno-0-132"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-133" id="chapter_2/question_24/Readme/:__codelineno-0-133" name="__codelineno-0-133"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-134" id="chapter_2/question_24/Readme/:__codelineno-0-134" name="__codelineno-0-134"></a><span class="cp">#[test]</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-135" id="chapter_2/question_24/Readme/:__codelineno-0-135" name="__codelineno-0-135"></a><span class="k">fn</span> <span class="nf">tree_sum</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-136" id="chapter_2/question_24/Readme/:__codelineno-0-136" name="__codelineno-0-136"></a><span class="w">    </span><span class="cm">/*</span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-137" id="chapter_2/question_24/Readme/:__codelineno-0-137" name="__codelineno-0-137"></a><span class="cm">        Teste com várias entradas</span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-138" id="chapter_2/question_24/Readme/:__codelineno-0-138" name="__codelineno-0-138"></a><span class="cm">    */</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-139" id="chapter_2/question_24/Readme/:__codelineno-0-139" name="__codelineno-0-139"></a><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">data_tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-140" id="chapter_2/question_24/Readme/:__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">        </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">],</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-141" id="chapter_2/question_24/Readme/:__codelineno-0-141" name="__codelineno-0-141"></a><span class="w">        </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">],</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-142" id="chapter_2/question_24/Readme/:__codelineno-0-142" name="__codelineno-0-142"></a><span class="w">        </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">],</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-143" id="chapter_2/question_24/Readme/:__codelineno-0-143" name="__codelineno-0-143"></a><span class="w">        </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">],</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-144" id="chapter_2/question_24/Readme/:__codelineno-0-144" name="__codelineno-0-144"></a><span class="w">        </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p">],</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-145" id="chapter_2/question_24/Readme/:__codelineno-0-145" name="__codelineno-0-145"></a><span class="w">        </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">],</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-146" id="chapter_2/question_24/Readme/:__codelineno-0-146" name="__codelineno-0-146"></a><span class="w">        </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">],</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-147" id="chapter_2/question_24/Readme/:__codelineno-0-147" name="__codelineno-0-147"></a><span class="w">    </span><span class="p">];</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-148" id="chapter_2/question_24/Readme/:__codelineno-0-148" name="__codelineno-0-148"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-149" id="chapter_2/question_24/Readme/:__codelineno-0-149" name="__codelineno-0-149"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">data_tests</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-150" id="chapter_2/question_24/Readme/:__codelineno-0-150" name="__codelineno-0-150"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">nodes</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="n">Arc</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-151" id="chapter_2/question_24/Readme/:__codelineno-0-151" name="__codelineno-0-151"></a><span class="w">            </span><span class="p">.</span><span class="n">clone</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-152" id="chapter_2/question_24/Readme/:__codelineno-0-152" name="__codelineno-0-152"></a><span class="w">            </span><span class="p">.</span><span class="n">iter</span><span class="p">()</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-153" id="chapter_2/question_24/Readme/:__codelineno-0-153" name="__codelineno-0-153"></a><span class="w">            </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|&amp;</span><span class="n">v</span><span class="o">|</span><span class="w"> </span><span class="n">Node</span>::<span class="n">from_value</span><span class="p">(</span><span class="n">v</span><span class="p">))</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-154" id="chapter_2/question_24/Readme/:__codelineno-0-154" name="__codelineno-0-154"></a><span class="w">            </span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="o">|</span><span class="n">node</span><span class="o">|</span><span class="w"> </span><span class="n">Arc</span>::<span class="n">new</span><span class="p">(</span><span class="n">node</span><span class="p">))</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-155" id="chapter_2/question_24/Readme/:__codelineno-0-155" name="__codelineno-0-155"></a><span class="w">            </span><span class="p">.</span><span class="n">collect</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-156" id="chapter_2/question_24/Readme/:__codelineno-0-156" name="__codelineno-0-156"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-157" id="chapter_2/question_24/Readme/:__codelineno-0-157" name="__codelineno-0-157"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">create_new_tree_bitwise</span><span class="p">(</span><span class="n">nodes</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">clone</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-158" id="chapter_2/question_24/Readme/:__codelineno-0-158" name="__codelineno-0-158"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-159" id="chapter_2/question_24/Readme/:__codelineno-0-159" name="__codelineno-0-159"></a><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arc</span>::<span class="n">try_unwrap</span><span class="p">(</span><span class="n">root</span><span class="p">).</span><span class="n">unwrap</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-160" id="chapter_2/question_24/Readme/:__codelineno-0-160" name="__codelineno-0-160"></a>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-161" id="chapter_2/question_24/Readme/:__codelineno-0-161" name="__codelineno-0-161"></a><span class="w">        </span><span class="fm">assert_eq!</span><span class="p">(</span><span class="n">root</span><span class="p">.</span><span class="n">compute</span><span class="p">(),</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="n">iter</span><span class="p">().</span><span class="n">sum</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">());</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-162" id="chapter_2/question_24/Readme/:__codelineno-0-162" name="__codelineno-0-162"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_2/question_24/Readme/:__codelineno-0-163" id="chapter_2/question_24/Readme/:__codelineno-0-163" name="__codelineno-0-163"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="chapter_2/question_24/Readme/:observacao">Observação</h4>
<p>caso tenha o rust instalado você pode observar a execução do caso de teste
com o comando <strong>cargo</strong>.</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_2/question_24/Readme/:__codelineno-1-1" id="chapter_2/question_24/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a>cargo <span class="nb">test</span>
</code></pre></div>
<p>O teste é mesmo teste feito em c++.</p>
</section></section></article><article class="md-content__inner md-typeset" data-url="/INUGC4DUMVZCAMY/" id="INUGC4DUMVZCAMY/:"><h1 id="INUGC4DUMVZCAMY/"><span class="pdf-order">4. </span>Chapter 3</h1><section class="md-typeset" data-url="/chapter_3/Readme/" id="chapter_3/Readme/:">
<h2 id="chapter_3/Readme/:capitulo-3"><span class="pdf-order">4.1 </span>Capítulo 3</h2>
<p>Capítulo 3: 2, 4, 6, 9, 11, 12, 13, 16, 17, 19, 20, 22, 23, 27 e 28 (16 questões);</p>
<ol>
<li></li>
<li>Modify the trapezoidal rule so that it will correctly estimate the integral even if <em>comm_sz</em> doesn’t evenly divide n. (You can still assume that n <span class="arithmatex">\(\geq\)</span> <em>comm_sz</em>.).<ul>
<li><a href="#chapter_3/question_02/Readme/:">Resposta questão 2</a> </li>
</ul>
</li>
<li></li>
<li>
<p>Modify the program that just prints a line of output from each process (<em>mpi_output.c</em>) so that the output is printed in process rank order: process 0s output first, then process 1s, and so on.</p>
</li>
<li></li>
<li>
<p>Suppose <em>comm_sz</em> = 4 and suppose that <strong>x</strong> is a vector with <span class="arithmatex">\(n = 14\)</span> components.  </p>
<ol>
<li>How would the components of <strong>x</strong> be distributed among the processes in program that used a block distribution ?</li>
<li>How would the components of <strong>x</strong> be distributed among the processes in a program that used a cyclic distribution ?</li>
<li>How would the components of x be distributed among the processes in a program that used a block-cyclic distribution with blocksize <span class="arithmatex">\(b =2\)</span> ?</li>
</ol>
</li>
<li></li>
<li></li>
<li>Write an MPI program that implements multiplication of a vector by a scalar and dot product. The user should enter two vectors and a scalar, all of which are read in by process 0 and distributed among the processes. The results are calculated and collected onto process 0, which prints them. You can assume that <span class="arithmatex">\(n\)</span>, the order of the vectors, is evenly divisible by <em>comm_sz</em></li>
<li></li>
<li>
<p>Finding <strong>prefix sums</strong> is a generalization of global sum. Rather than simply finding the sum of <span class="arithmatex">\(n\)</span> values,<br/>
<span class="arithmatex">\(x_0 + x_1 + \cdot \cdot \cdot + x_{n-1}\)</span><br/>
the prefix sums are the n partial sums<br/>
<span class="arithmatex">\(x_0, x_0 + x_1, x_0 + x_1 + x_2,   \cdot \cdot \cdot, x_0 + x_1 \cdot \cdot \cdot + x_{n-1}\)</span> </p>
<ol>
<li>Devise a serial algorithm for computing the <span class="arithmatex">\(n\)</span> prefix sums of an array with <span class="arithmatex">\(n\)</span> elements.</li>
<li>Parallelize your serial algorithm for a system with <span class="arithmatex">\(n\)</span> processes, each of which is storing one of the <em>x_is</em>.</li>
<li>Suppose <span class="arithmatex">\(n = 2^k\)</span> for some positive integer <span class="arithmatex">\(k\)</span>. Can you devise a serial algorithm and a parallelization of the serial algorithm so that the parallel algorithm requires only <span class="arithmatex">\(k\)</span> communication phases ?</li>
<li>MPI provides a collective communication function, MPI Scan, that can be used to compute prefix sums:
   <div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-0-1" id="chapter_3/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="kt">int</span><span class="w"> </span><span class="n">MPI</span><span class="w"> </span><span class="nf">Scan</span><span class="p">(</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-0-2" id="chapter_3/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="kt">void</span><span class="o">*</span><span class="w">        </span><span class="n">sendbuf_p</span><span class="w"> </span><span class="cm">/* in  */</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-0-3" id="chapter_3/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">    </span><span class="kt">void</span><span class="o">*</span><span class="w">        </span><span class="n">recvbuf_p</span><span class="w"> </span><span class="cm">/* out */</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-0-4" id="chapter_3/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="kt">int</span><span class="w">          </span><span class="n">count</span><span class="w">     </span><span class="cm">/* in  */</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-0-5" id="chapter_3/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="n">MPI_Datatype</span><span class="w"> </span><span class="n">datatype</span><span class="w">  </span><span class="cm">/* in  */</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-0-6" id="chapter_3/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">    </span><span class="n">MPI_Op</span><span class="w">       </span><span class="n">op</span><span class="w">        </span><span class="cm">/* in  */</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-0-7" id="chapter_3/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">    </span><span class="n">MPI_Comm</span><span class="w">     </span><span class="n">comm</span><span class="w">      </span><span class="cm">/* in  */</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
   It operates on arrays with <em>count</em> elements; both <em>sendbuf_p</em> and <em>recvbuf_p</em> should refer to blocks of <em>count</em> elements of type <em>datatype</em>. The <em>op</em> argument
   is the same as op for <em>MPI_Reduce</em>. Write an MPI program
   that generates a random array of <em>count</em> elements on each
   MPI process, finds the prefix sums, and print the results.</li>
</ol>
</li>
<li>
<p>An alternative to a butterfly-structured allreduce is a <strong>ring-pass</strong> structure. In a ring-pass, if there are <span class="arithmatex">\(p\)</span> processes, each process <span class="arithmatex">\(q\)</span> sends data to process <span class="arithmatex">\(q + 1\)</span>, except that process <span class="arithmatex">\(p − 1\)</span> sends data to process <span class="arithmatex">\(0\)</span>. This is repeated until each process has the desired result. Thus, we can implement allreduce with the following code:
    <div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-1-1" id="chapter_3/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">my</span><span class="w"> </span><span class="n">val</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-1-2" id="chapter_3/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a>
<a href="#chapter_3/Readme/:__codelineno-1-3" id="chapter_3/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-1-4" id="chapter_3/Readme/:__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="n">MPI</span><span class="w"> </span><span class="n">Sendrecv</span><span class="w"> </span><span class="n">replace</span><span class="p">(</span><span class="o">&amp;</span><span class="n">temp</span><span class="w"> </span><span class="n">val</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">MPI</span><span class="w"> </span><span class="n">INT</span><span class="p">,</span><span class="w"> </span><span class="n">dest</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-1-5" id="chapter_3/Readme/:__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">    </span><span class="n">sendtag</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">recvtag</span><span class="p">,</span><span class="w"> </span><span class="n">comm</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">status</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-1-6" id="chapter_3/Readme/:__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">    </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="n">val</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-1-7" id="chapter_3/Readme/:__codelineno-1-7" name="__codelineno-1-7"></a><span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<ol>
<li>Write an MPI program that implements this algorithm for allreduce. How does its performance compare to the butterfly-structured allreduce ?</li>
<li>Modify the MPI program you wrote in the first part so that it implements prefix sums.</li>
</ol>
</li>
<li>
<p>MPI Scatter and MPI Gather have the limitation that each process must send or receive the same number of data items. When this is not the case, we must use the MPI functions MPI Gatherv and MPI Scatterv. Look at the man pages for these functions, and modify your vector sum, dot product program so that it can correctly handle the case when n isn’t evenly divisible by
<em>comm_sz</em>.</p>
</li>
<li></li>
<li></li>
<li>
<p>Suppose <em>comm_sz</em> <span class="arithmatex">\(= 8\)</span> and the vector <strong>x</strong> <span class="arithmatex">\(= (0, 1, 2, . . . , 15)\)</span> has been distributed among the processes using a block distribution. Draw a diagram illustrating the steps in a butterfly implementation of allgather of <strong>x</strong></p>
</li>
<li>
<p><em>MPI_Type_contiguous</em> can be used to build a derived datatype from a collection of contiguous elements in an array. Its syntax is
    <div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-2-1" id="chapter_3/Readme/:__codelineno-2-1" name="__codelineno-2-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Type_contiguous</span><span class="p">(</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-2-2" id="chapter_3/Readme/:__codelineno-2-2" name="__codelineno-2-2"></a><span class="w">                        </span><span class="kt">int</span><span class="w">           </span><span class="n">count</span><span class="p">,</span><span class="w">        </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-2-3" id="chapter_3/Readme/:__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">                        </span><span class="n">MPI_Datatype</span><span class="w">  </span><span class="n">old_mpi_t</span><span class="p">,</span><span class="w">    </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-2-4" id="chapter_3/Readme/:__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">                        </span><span class="n">MPI_Datatype</span><span class="err">∗</span><span class="w"> </span><span class="n">new_mpi_t_p</span><span class="w">  </span><span class="cm">/* out */</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
    Modify the <em>Read_vector</em> and <em>Print_vector</em> functions so that they use an MPI datatype created by a call to <em>MPI_Type_contiguous</em> and a <em>count</em> argument of 1 in the calls to <em>MPI_Scatter</em> and <em>MPI_Gather</em>.</p>
</li>
<li></li>
<li>
<p><em>MPI_Type_indexed</em> can be used to build a derived datatype from arbitrary array elements. Its syntax is
    <div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-3-1" id="chapter_3/Readme/:__codelineno-3-1" name="__codelineno-3-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Type_indexed</span><span class="p">(</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-3-2" id="chapter_3/Readme/:__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">                        </span><span class="kt">int</span><span class="w">           </span><span class="n">count</span><span class="p">,</span><span class="w">                    </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-3-3" id="chapter_3/Readme/:__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">                        </span><span class="kt">int</span><span class="w">           </span><span class="n">array_of_blocklengths</span><span class="p">[],</span><span class="w">  </span><span class="cm">/* in  */</span><span class="p">,</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-3-4" id="chapter_3/Readme/:__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">                        </span><span class="kt">int</span><span class="w">           </span><span class="n">array_of_displacements</span><span class="p">[],</span><span class="w"> </span><span class="cm">/* in  */</span><span class="p">,</span><span class="w">  </span>
<a href="#chapter_3/Readme/:__codelineno-3-5" id="chapter_3/Readme/:__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">                        </span><span class="n">MPI_Datatype</span><span class="w">  </span><span class="n">old_mpi_t</span><span class="p">,</span><span class="w">                </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-3-6" id="chapter_3/Readme/:__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">                        </span><span class="n">MPI_Datatype</span><span class="err">∗</span><span class="w"> </span><span class="n">new_mpi_t_p</span><span class="w">               </span><span class="cm">/* out */</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
    Unlike <em>MPI_Type_create_struct</em>, the displacements are measured in units of
    <em>old_mpi_t</em> --not bytes. Use <em>MPI_Type_indexed</em> to create a derived datatype
    that corresponds to the upper triangular part of a square matrix. For example
    in the <span class="arithmatex">\(4 \times 4\)</span> matrix.</p>
<div class="arithmatex">\[
\begin{pmatrix}
    0 &amp; 1 &amp; 2 &amp; 3\\
    4 &amp; 5 &amp; 6 &amp; 7\\
    8 &amp; 9 &amp; 10 &amp; 11\\
    12 &amp; 13 &amp; 14 &amp; 15\\ 
\end{pmatrix}
\]</div>
<p>the upper triangular part is the elements 0, 1, 2, 3, 5, 6, 7, 10, 11, 15. Process
0 should read in an <span class="arithmatex">\(n \times n\)</span> matrix as a one-dimensional array, create the derived datatype, and send the upper triangular part with a single call to <em>MPI_Send</em>. Process 1 should receive the upper triangular part with a single call ot <em>MPI_Recv</em> and then print
the data it received.</p>
</li>
<li>
<p>The functions <em>MPI_Pack</em> and <em>MPI_Unpack</em> provide an alternative to derived datatypes for grouping data. <em>MPI_Pack</em> copies the data to be sent, one block at a time, into a user-provided buffer. The buffer can then be sent and received. After the data is received, <em>MPI_Unpack</em> can be used to unpack it from the receive buffer. The syntax of <em>MPI_Pack</em> is
    <div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-4-1" id="chapter_3/Readme/:__codelineno-4-1" name="__codelineno-4-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Pack</span><span class="p">(</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-4-2" id="chapter_3/Readme/:__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">                        </span><span class="kt">void</span><span class="o">*</span><span class="w">         </span><span class="n">in_buf</span><span class="p">,</span><span class="w">                    </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-4-3" id="chapter_3/Readme/:__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">                        </span><span class="kt">int</span><span class="w">           </span><span class="n">in_buf_count</span><span class="p">,</span><span class="w">              </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-4-4" id="chapter_3/Readme/:__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">                        </span><span class="n">MPI_Datatype</span><span class="w">  </span><span class="n">datatype</span><span class="p">,</span><span class="w">                  </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-4-5" id="chapter_3/Readme/:__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">                        </span><span class="kt">void</span><span class="o">*</span><span class="w">         </span><span class="n">pack_buf</span><span class="p">,</span><span class="w">                  </span><span class="cm">/* out */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-4-6" id="chapter_3/Readme/:__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">                        </span><span class="kt">int</span><span class="w">           </span><span class="n">pack_buf_sz</span><span class="p">,</span><span class="w">               </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-4-7" id="chapter_3/Readme/:__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">                        </span><span class="kt">int</span><span class="o">*</span><span class="w">          </span><span class="n">position_p</span><span class="p">,</span><span class="w">                </span><span class="cm">/* in/out */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-4-8" id="chapter_3/Readme/:__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">                        </span><span class="n">MPI_Comm</span><span class="w">      </span><span class="n">comm</span><span class="w">                       </span><span class="cm">/* in */</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
    We could therefore pack the input data to the trapezoidal rule program with the following code:
    <div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-5-1" id="chapter_3/Readme/:__codelineno-5-1" name="__codelineno-5-1"></a><span class="kt">char</span><span class="w"> </span><span class="n">pack</span><span class="w"> </span><span class="n">buf</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-5-2" id="chapter_3/Readme/:__codelineno-5-2" name="__codelineno-5-2"></a><span class="kt">int</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-5-3" id="chapter_3/Readme/:__codelineno-5-3" name="__codelineno-5-3"></a><span class="n">MPI_Pack</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_DOUBLE</span><span class="p">,</span><span class="w"> </span><span class="n">pack_buf</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="n">comm</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-5-4" id="chapter_3/Readme/:__codelineno-5-4" name="__codelineno-5-4"></a><span class="n">MPI_Pack</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_DOUBLE</span><span class="p">,</span><span class="w"> </span><span class="n">pack_buf</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="n">comm</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-5-5" id="chapter_3/Readme/:__codelineno-5-5" name="__codelineno-5-5"></a><span class="n">MPI_Pack</span><span class="p">(</span><span class="o">&amp;</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_INT</span><span class="p">,</span><span class="w"> </span><span class="n">pack_buf</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="n">comm</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
    The key is the position argument. When <em>MPI_Pack</em> is called, position should
    refer to the first available slot in <em>pack_buf</em>. When <em>MPI_Pack</em> returns, it refers
    to the first available slot after the data that was just packed, so after process 0
    executes this code, all the processes can call <em>MPI_Bcast</em>:
    <div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-6-1" id="chapter_3/Readme/:__codelineno-6-1" name="__codelineno-6-1"></a><span class="w">    </span><span class="n">MPI_Bcast</span><span class="p">(</span><span class="n">pack_buf</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_PACKED</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">comm</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
    Note that the MPI datatype for a packed buffer is MPI_PACKED. Now the other processes can unpack the data using: <em>MPI_Unpack</em>:
    <div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-7-1" id="chapter_3/Readme/:__codelineno-7-1" name="__codelineno-7-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">MPI_Unpack</span><span class="p">(</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-7-2" id="chapter_3/Readme/:__codelineno-7-2" name="__codelineno-7-2"></a><span class="w">                        </span><span class="kt">void</span><span class="o">*</span><span class="w">         </span><span class="n">pack_buf</span><span class="p">,</span><span class="w">                  </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-7-3" id="chapter_3/Readme/:__codelineno-7-3" name="__codelineno-7-3"></a><span class="w">                        </span><span class="kt">int</span><span class="w">           </span><span class="n">pack_buf_sz</span><span class="p">,</span><span class="w">               </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-7-4" id="chapter_3/Readme/:__codelineno-7-4" name="__codelineno-7-4"></a><span class="w">                        </span><span class="kt">int</span><span class="o">*</span><span class="w">          </span><span class="n">position_p</span><span class="p">,</span><span class="w">                </span><span class="cm">/* in/out */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-7-5" id="chapter_3/Readme/:__codelineno-7-5" name="__codelineno-7-5"></a><span class="w">                        </span><span class="kt">void</span><span class="o">*</span><span class="w">         </span><span class="n">out_buf</span><span class="p">,</span><span class="w">                   </span><span class="cm">/* out */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-7-6" id="chapter_3/Readme/:__codelineno-7-6" name="__codelineno-7-6"></a><span class="w">                        </span><span class="kt">int</span><span class="w">           </span><span class="n">out_buf_count</span><span class="p">,</span><span class="w">             </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-7-7" id="chapter_3/Readme/:__codelineno-7-7" name="__codelineno-7-7"></a><span class="w">                        </span><span class="n">MPI_Datatype</span><span class="w">  </span><span class="n">datatype</span><span class="p">,</span><span class="w">                  </span><span class="cm">/* in  */</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-7-8" id="chapter_3/Readme/:__codelineno-7-8" name="__codelineno-7-8"></a><span class="w">                        </span><span class="n">MPI_Comm</span><span class="w">      </span><span class="n">comm</span><span class="w">                       </span><span class="cm">/* in */</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
    This can be used by “reversing” the steps in <em>MPI_Pack</em>, that is, the data is
    unpacked one block at a time starting with position = 0.
    Write another Get input function for the trapezoidal rule program. This one should use
    <em>MPI_Pack</em> on process 0 and <em>MPI_Unpack</em>  on the other processes.</p>
</li>
<li></li>
<li>
<p>Time our implementation of the trapezoidal rule that uses <em>MPI_Reduce</em>. How will
    you choose n, the number of trapezoids ? How do the minimum times compare to the mean and median times ? What are the speedups ? What are the efficiencies ? On the basis of the data you collected, would you say that the trapezoidal rule is scalable ?</p>
</li>
<li>
<p>Although we don’t know the internals of the implementation of <em>MPI_Reduce</em>, we might guess that it uses a structure similar to the binary tree we discussed. If this is the case, we would expect that its run-time would grow roughly at the rate of <span class="arithmatex">\(log_2(p)\)</span>, since there are roughly <span class="arithmatex">\(log_2(p)\)</span> levels in the tree. (Here, <span class="arithmatex">\(p =\)</span><em>comm_sz</em>.) Since the run-time of the serial trapezoidal rule is roughly proportional to <span class="arithmatex">\(n\)</span>, the number of trapezoids, and the parallel trapezoidal rule simply applies the serial rule to <span class="arithmatex">\(\frac{n}{p}\)</span> trapezoids on each process, with our assumption about <em>MPI_Reduce</em>, we get a formula for the overall run-time of the parallel trapezoidal rule that looks like<br/>
<span class="arithmatex">\(T_{parallel}(n,p) \approx a \times \frac{n}{p} + blog_2(p)\)</span><br/>
    for some constants <span class="arithmatex">\(a\)</span> and <span class="arithmatex">\(b\)</span>.  </p>
<ol>
<li>Use the formula, the times you’ve taken in Exercise 3.22, and your favorite program for doing mathematical calculations to get a least-squares estimate of the values of <span class="arithmatex">\(a\)</span> and <span class="arithmatex">\(b\)</span>.</li>
<li>Comment on the quality of the predicted run-times using the formula and the values for <span class="arithmatex">\(a\)</span> and <span class="arithmatex">\(b\)</span> computed in part (a).</li>
</ol>
</li>
<li></li>
<li></li>
<li></li>
<li>
<p>Find the speedups and efficiencies of the parallel odd-even sort. Does the program obtain linear speedups? Is it scalable ? Is it strongly scalable ? Is it weakly scalable ?</p>
</li>
<li>
<p>Modify the parallel odd-even transposition sort so that the Merge functions simply swap array pointers after finding the smallest or largest elements. What effect does this change have on the overall run-time ?</p>
</li>
</ol>
<h3 id="chapter_3/Readme/:questao-16"><span class="pdf-order">4.1.1 </span>Questão 16</h3>
<p>Quando o compilador não é capaz de vetorizar automaticamente, ou vetoriza de forma ineficiente, o OpenMP provê a diretiva<strong> omp simd</strong>, com a qual o programador pode indicar um laço explicitamente para o compilador vetorizar. No código abaixo, a inclusão da cláusula reduction funciona de forma similar a flag <strong>-ffast-math</strong>, indicando que a redução na variável soma é segura e deve ser feita.
<div class="highlight"><pre><span></span><code><a href="#chapter_3/Readme/:__codelineno-8-1" id="chapter_3/Readme/:__codelineno-8-1" name="__codelineno-8-1"></a><span class="cp">#pragma omp simd reduction(+:soma)</span>
<a href="#chapter_3/Readme/:__codelineno-8-2" id="chapter_3/Readme/:__codelineno-8-2" name="__codelineno-8-2"></a><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-8-3" id="chapter_3/Readme/:__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">   </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="n">h</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-8-4" id="chapter_3/Readme/:__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">   </span><span class="n">soma</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mf">4.0</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/Readme/:__codelineno-8-5" id="chapter_3/Readme/:__codelineno-8-5" name="__codelineno-8-5"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
Por que não é necessário usar a cláusula <strong>private(x)</strong> neste caso mas seria caso a diretiva <strong>omp simd</strong> fosse combinada com a diretiva <strong>omp parallel for</strong> ?</p>
</section><section class="md-typeset" data-url="/INUGC4DUMVZCAMY/KF2WK43UNFXW4IBQGI/" id="INUGC4DUMVZCAMY/KF2WK43UNFXW4IBQGI/:"><h2 id="INUGC4DUMVZCAMY/KF2WK43UNFXW4IBQGI/"><span class="pdf-order">4.2 </span>Question 02</h2><section class="md-typeset" data-url="/chapter_3/question_02/Readme/" id="chapter_3/question_02/Readme/:">
<h3 id="chapter_3/question_02/Readme/:questao-2"><span class="pdf-order">4.2.1 </span>Questão 2</h3>
<p>Modify the trapezoidal rule so that it will correctly estimate the integral even if <em>comm_sz</em> doesn’t evenly divide n. (You can still assume that n <span class="arithmatex">\(\geq\)</span> <em>comm_sz</em>.).</p>
<h4 id="chapter_3/question_02/Readme/:codigo-antes-da-alteracao">Código antes da alteração</h4>
<p><div class="highlight"><pre><span></span><code><a href="#chapter_3/question_02/Readme/:__codelineno-0-1" id="chapter_3/question_02/Readme/:__codelineno-0-1" name="__codelineno-0-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mpi.h&gt;</span><span class="cp"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-2" id="chapter_3/question_02/Readme/:__codelineno-0-2" name="__codelineno-0-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-3" id="chapter_3/question_02/Readme/:__codelineno-0-3" name="__codelineno-0-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-4" id="chapter_3/question_02/Readme/:__codelineno-0-4" name="__codelineno-0-4"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-5" id="chapter_3/question_02/Readme/:__codelineno-0-5" name="__codelineno-0-5"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-6" id="chapter_3/question_02/Readme/:__codelineno-0-6" name="__codelineno-0-6"></a><span class="kt">double</span><span class="w"> </span><span class="nf">trap</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-7" id="chapter_3/question_02/Readme/:__codelineno-0-7" name="__codelineno-0-7"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-8" id="chapter_3/question_02/Readme/:__codelineno-0-8" name="__codelineno-0-8"></a><span class="kt">double</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-9" id="chapter_3/question_02/Readme/:__codelineno-0-9" name="__codelineno-0-9"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-10" id="chapter_3/question_02/Readme/:__codelineno-0-10" name="__codelineno-0-10"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-11" id="chapter_3/question_02/Readme/:__codelineno-0-11" name="__codelineno-0-11"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-12" id="chapter_3/question_02/Readme/:__codelineno-0-12" name="__codelineno-0-12"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-13" id="chapter_3/question_02/Readme/:__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">my_rank</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-14" id="chapter_3/question_02/Readme/:__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">comm_sz</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-15" id="chapter_3/question_02/Readme/:__codelineno-0-15" name="__codelineno-0-15"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-16" id="chapter_3/question_02/Readme/:__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">message_tag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-17" id="chapter_3/question_02/Readme/:__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">  </span><span class="c1">// resceber argumentos globais via linha de commando</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-18" id="chapter_3/question_02/Readme/:__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">  </span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-19" id="chapter_3/question_02/Readme/:__codelineno-0-19" name="__codelineno-0-19"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-20" id="chapter_3/question_02/Readme/:__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atof</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-21" id="chapter_3/question_02/Readme/:__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atof</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-22" id="chapter_3/question_02/Readme/:__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-23" id="chapter_3/question_02/Readme/:__codelineno-0-23" name="__codelineno-0-23"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-24" id="chapter_3/question_02/Readme/:__codelineno-0-24" name="__codelineno-0-24"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-25" id="chapter_3/question_02/Readme/:__codelineno-0-25" name="__codelineno-0-25"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-26" id="chapter_3/question_02/Readme/:__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">  </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">my_rank</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-27" id="chapter_3/question_02/Readme/:__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">  </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">comm_sz</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-28" id="chapter_3/question_02/Readme/:__codelineno-0-28" name="__codelineno-0-28"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-29" id="chapter_3/question_02/Readme/:__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">B</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">A</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-30" id="chapter_3/question_02/Readme/:__codelineno-0-30" name="__codelineno-0-30"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-31" id="chapter_3/question_02/Readme/:__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">local_n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">comm_sz</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-32" id="chapter_3/question_02/Readme/:__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">  </span><span class="cm">/*</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-33" id="chapter_3/question_02/Readme/:__codelineno-0-33" name="__codelineno-0-33"></a><span class="cm">    Como podemos observar que quando a divisão</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-34" id="chapter_3/question_02/Readme/:__codelineno-0-34" name="__codelineno-0-34"></a><span class="cm">    inteira N/comm_sz o n local, não corresponde</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-35" id="chapter_3/question_02/Readme/:__codelineno-0-35" name="__codelineno-0-35"></a><span class="cm">    ao número total de trapézios desejados.</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-36" id="chapter_3/question_02/Readme/:__codelineno-0-36" name="__codelineno-0-36"></a><span class="cm">    Ex: 1024/3 ==  341, sendo que 341*3 == 1023</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-37" id="chapter_3/question_02/Readme/:__codelineno-0-37" name="__codelineno-0-37"></a><span class="cm">   */</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-38" id="chapter_3/question_02/Readme/:__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">local_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">my_rank</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">local_n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="err">´</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-39" id="chapter_3/question_02/Readme/:__codelineno-0-39" name="__codelineno-0-39"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">local_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">local_a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">local_n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-40" id="chapter_3/question_02/Readme/:__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">result_integral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trap</span><span class="p">(</span><span class="n">local_a</span><span class="p">,</span><span class="w"> </span><span class="n">local_b</span><span class="p">,</span><span class="w"> </span><span class="n">local_n</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-41" id="chapter_3/question_02/Readme/:__codelineno-0-41" name="__codelineno-0-41"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-42" id="chapter_3/question_02/Readme/:__codelineno-0-42" name="__codelineno-0-42"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">my_rank</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-43" id="chapter_3/question_02/Readme/:__codelineno-0-43" name="__codelineno-0-43"></a><span class="w">  </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-44" id="chapter_3/question_02/Readme/:__codelineno-0-44" name="__codelineno-0-44"></a><span class="w">    </span><span class="n">MPI_Send</span><span class="p">(</span><span class="o">&amp;</span><span class="n">result_integral</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_DOUBLE</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">message_tag</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-45" id="chapter_3/question_02/Readme/:__codelineno-0-45" name="__codelineno-0-45"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-46" id="chapter_3/question_02/Readme/:__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="c1">// my_rank ==0</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-47" id="chapter_3/question_02/Readme/:__codelineno-0-47" name="__codelineno-0-47"></a><span class="w">  </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-48" id="chapter_3/question_02/Readme/:__codelineno-0-48" name="__codelineno-0-48"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-49" id="chapter_3/question_02/Readme/:__codelineno-0-49" name="__codelineno-0-49"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">comm_sz</span><span class="p">;</span><span class="w"> </span><span class="n">source</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-50" id="chapter_3/question_02/Readme/:__codelineno-0-50" name="__codelineno-0-50"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-51" id="chapter_3/question_02/Readme/:__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">      </span><span class="kt">double</span><span class="w"> </span><span class="n">result_integral_source</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-52" id="chapter_3/question_02/Readme/:__codelineno-0-52" name="__codelineno-0-52"></a><span class="w">      </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="o">&amp;</span><span class="n">result_integral_source</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_DOUBLE</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">message_tag</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_STATUS_IGNORE</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-53" id="chapter_3/question_02/Readme/:__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">      </span><span class="n">result_integral</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">result_integral_source</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-54" id="chapter_3/question_02/Readme/:__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-55" id="chapter_3/question_02/Readme/:__codelineno-0-55" name="__codelineno-0-55"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"with n = %d trapezoids, our estimate</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-56" id="chapter_3/question_02/Readme/:__codelineno-0-56" name="__codelineno-0-56"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"of the integral from %f to %f = %.15e</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">result_integral</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-57" id="chapter_3/question_02/Readme/:__codelineno-0-57" name="__codelineno-0-57"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-58" id="chapter_3/question_02/Readme/:__codelineno-0-58" name="__codelineno-0-58"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-59" id="chapter_3/question_02/Readme/:__codelineno-0-59" name="__codelineno-0-59"></a><span class="w">  </span><span class="n">MPI_Finalize</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-60" id="chapter_3/question_02/Readme/:__codelineno-0-60" name="__codelineno-0-60"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-61" id="chapter_3/question_02/Readme/:__codelineno-0-61" name="__codelineno-0-61"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-62" id="chapter_3/question_02/Readme/:__codelineno-0-62" name="__codelineno-0-62"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-63" id="chapter_3/question_02/Readme/:__codelineno-0-63" name="__codelineno-0-63"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-64" id="chapter_3/question_02/Readme/:__codelineno-0-64" name="__codelineno-0-64"></a><span class="kt">double</span><span class="w"> </span><span class="nf">trap</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-65" id="chapter_3/question_02/Readme/:__codelineno-0-65" name="__codelineno-0-65"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-66" id="chapter_3/question_02/Readme/:__codelineno-0-66" name="__codelineno-0-66"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-67" id="chapter_3/question_02/Readme/:__codelineno-0-67" name="__codelineno-0-67"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-68" id="chapter_3/question_02/Readme/:__codelineno-0-68" name="__codelineno-0-68"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-69" id="chapter_3/question_02/Readme/:__codelineno-0-69" name="__codelineno-0-69"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">approx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">b</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-70" id="chapter_3/question_02/Readme/:__codelineno-0-70" name="__codelineno-0-70"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-71" id="chapter_3/question_02/Readme/:__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">  </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-72" id="chapter_3/question_02/Readme/:__codelineno-0-72" name="__codelineno-0-72"></a><span class="w">    </span><span class="c1">// printf("f_%i \n", i);</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-73" id="chapter_3/question_02/Readme/:__codelineno-0-73" name="__codelineno-0-73"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x_i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-74" id="chapter_3/question_02/Readme/:__codelineno-0-74" name="__codelineno-0-74"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-75" id="chapter_3/question_02/Readme/:__codelineno-0-75" name="__codelineno-0-75"></a><span class="w">    </span><span class="n">approx</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">x_i</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-76" id="chapter_3/question_02/Readme/:__codelineno-0-76" name="__codelineno-0-76"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-77" id="chapter_3/question_02/Readme/:__codelineno-0-77" name="__codelineno-0-77"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-78" id="chapter_3/question_02/Readme/:__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">approx</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-79" id="chapter_3/question_02/Readme/:__codelineno-0-79" name="__codelineno-0-79"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-80" id="chapter_3/question_02/Readme/:__codelineno-0-80" name="__codelineno-0-80"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-0-81" id="chapter_3/question_02/Readme/:__codelineno-0-81" name="__codelineno-0-81"></a><span class="kt">double</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
compilação e execução
<div class="highlight"><pre><span></span><code><a href="#chapter_3/question_02/Readme/:__codelineno-1-1" id="chapter_3/question_02/Readme/:__codelineno-1-1" name="__codelineno-1-1"></a>mpicc trap_rule.c -o <span class="nb">trap</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-1-2" id="chapter_3/question_02/Readme/:__codelineno-1-2" name="__codelineno-1-2"></a><span class="c1"># a =0, b =3, n = 1024</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-1-3" id="chapter_3/question_02/Readme/:__codelineno-1-3" name="__codelineno-1-3"></a>mpiexec -n <span class="m">4</span> ./trap <span class="m">0</span> <span class="m">3</span> <span class="m">1024</span>
</code></pre></div></p>
<h4 id="chapter_3/question_02/Readme/:alteracao-no-codigo">Alteração no código</h4>
<p>Sabendo que pode ocorrer divisões cujo o número não pertence aos números racionais, por tanto se faz necessário utilizar a seguinte
expressão:
$$
 \frac{N}{D} = a \times D   +\text{resto}
$$
exemplo:
$$
    \frac{1024}{3} = 341 \times 3 + 1
$$
Podemos resolver o problema simplesmente despejando os trapézios restantes em um processo ou podemos dividir a "carga" entre os processos. Dividir a carga entre os processos de forma mais igualitária possível, foi resolvido no <a href="#chapter_1/question_1/Readme/:">exercício 1 capítulo 1</a>.</p>
<div class="highlight"><pre><span></span><code><a href="#chapter_3/question_02/Readme/:__codelineno-2-1" id="chapter_3/question_02/Readme/:__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-2" id="chapter_3/question_02/Readme/:__codelineno-2-2" name="__codelineno-2-2"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-3" id="chapter_3/question_02/Readme/:__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-4" id="chapter_3/question_02/Readme/:__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">last</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-5" id="chapter_3/question_02/Readme/:__codelineno-2-5" name="__codelineno-2-5"></a><span class="p">};</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-6" id="chapter_3/question_02/Readme/:__codelineno-2-6" name="__codelineno-2-6"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-7" id="chapter_3/question_02/Readme/:__codelineno-2-7" name="__codelineno-2-7"></a><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">new_range_2</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">thread_index</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-8" id="chapter_3/question_02/Readme/:__codelineno-2-8" name="__codelineno-2-8"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-9" id="chapter_3/question_02/Readme/:__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-10" id="chapter_3/question_02/Readme/:__codelineno-2-10" name="__codelineno-2-10"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-11" id="chapter_3/question_02/Readme/:__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-12" id="chapter_3/question_02/Readme/:__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-13" id="chapter_3/question_02/Readme/:__codelineno-2-13" name="__codelineno-2-13"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-14" id="chapter_3/question_02/Readme/:__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">thread_index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-15" id="chapter_3/question_02/Readme/:__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-16" id="chapter_3/question_02/Readme/:__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-17" id="chapter_3/question_02/Readme/:__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-18" id="chapter_3/question_02/Readme/:__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-19" id="chapter_3/question_02/Readme/:__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">    </span><span class="k">else</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-20" id="chapter_3/question_02/Readme/:__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-21" id="chapter_3/question_02/Readme/:__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-22" id="chapter_3/question_02/Readme/:__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">        </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">division</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-23" id="chapter_3/question_02/Readme/:__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-24" id="chapter_3/question_02/Readme/:__codelineno-2-24" name="__codelineno-2-24"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-25" id="chapter_3/question_02/Readme/:__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-26" id="chapter_3/question_02/Readme/:__codelineno-2-26" name="__codelineno-2-26"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-27" id="chapter_3/question_02/Readme/:__codelineno-2-27" name="__codelineno-2-27"></a><span class="p">...</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-28" id="chapter_3/question_02/Readme/:__codelineno-2-28" name="__codelineno-2-28"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-29" id="chapter_3/question_02/Readme/:__codelineno-2-29" name="__codelineno-2-29"></a><span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-30" id="chapter_3/question_02/Readme/:__codelineno-2-30" name="__codelineno-2-30"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-31" id="chapter_3/question_02/Readme/:__codelineno-2-31" name="__codelineno-2-31"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-32" id="chapter_3/question_02/Readme/:__codelineno-2-32" name="__codelineno-2-32"></a><span class="w">    </span><span class="p">...</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-33" id="chapter_3/question_02/Readme/:__codelineno-2-33" name="__codelineno-2-33"></a><span class="w">    </span><span class="cm">/*</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-34" id="chapter_3/question_02/Readme/:__codelineno-2-34" name="__codelineno-2-34"></a><span class="cm">    onde thread_index é o rank,</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-35" id="chapter_3/question_02/Readme/:__codelineno-2-35" name="__codelineno-2-35"></a><span class="cm">    o número de cores é o número de processos,</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-36" id="chapter_3/question_02/Readme/:__codelineno-2-36" name="__codelineno-2-36"></a><span class="cm">    o tamanho do vetor é o número de trapézios</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-37" id="chapter_3/question_02/Readme/:__codelineno-2-37" name="__codelineno-2-37"></a><span class="cm">    */</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-38" id="chapter_3/question_02/Readme/:__codelineno-2-38" name="__codelineno-2-38"></a><span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_range_2</span><span class="p">(</span><span class="n">my_rank</span><span class="p">,</span><span class="n">comm_sz</span><span class="p">,</span><span class="n">N</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-39" id="chapter_3/question_02/Readme/:__codelineno-2-39" name="__codelineno-2-39"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-40" id="chapter_3/question_02/Readme/:__codelineno-2-40" name="__codelineno-2-40"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">B</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">A</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-41" id="chapter_3/question_02/Readme/:__codelineno-2-41" name="__codelineno-2-41"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-42" id="chapter_3/question_02/Readme/:__codelineno-2-42" name="__codelineno-2-42"></a><span class="w">    </span><span class="cm">/*</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-43" id="chapter_3/question_02/Readme/:__codelineno-2-43" name="__codelineno-2-43"></a><span class="cm">    perceba que o número local de trapézios é</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-44" id="chapter_3/question_02/Readme/:__codelineno-2-44" name="__codelineno-2-44"></a><span class="cm">    o tamanho do intervalo calculado  </span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-45" id="chapter_3/question_02/Readme/:__codelineno-2-45" name="__codelineno-2-45"></a><span class="cm">     */</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-46" id="chapter_3/question_02/Readme/:__codelineno-2-46" name="__codelineno-2-46"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">local_n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-47" id="chapter_3/question_02/Readme/:__codelineno-2-47" name="__codelineno-2-47"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">local_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-48" id="chapter_3/question_02/Readme/:__codelineno-2-48" name="__codelineno-2-48"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">local_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-49" id="chapter_3/question_02/Readme/:__codelineno-2-49" name="__codelineno-2-49"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">result_integral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trap</span><span class="p">(</span><span class="n">local_a</span><span class="p">,</span><span class="w"> </span><span class="n">local_b</span><span class="p">,</span><span class="w"> </span><span class="n">local_n</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-50" id="chapter_3/question_02/Readme/:__codelineno-2-50" name="__codelineno-2-50"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-51" id="chapter_3/question_02/Readme/:__codelineno-2-51" name="__codelineno-2-51"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"local n: %i local a: %f local b %f </span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">local_n</span><span class="p">,</span><span class="w"> </span><span class="n">local_a</span><span class="p">,</span><span class="w"> </span><span class="n">local_b</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-2-52" id="chapter_3/question_02/Readme/:__codelineno-2-52" name="__codelineno-2-52"></a><span class="p">}</span><span class="w"></span>
</code></pre></div>
<h4 id="chapter_3/question_02/Readme/:simulacoes-feitas-offline">Simulações feitas offline:</h4>
<div class="highlight"><pre><span></span><code><a href="#chapter_3/question_02/Readme/:__codelineno-3-1" id="chapter_3/question_02/Readme/:__codelineno-3-1" name="__codelineno-3-1"></a>mpicc trap_rule.c -o trap<span class="p">;</span> mpiexec -n <span class="m">3</span> ./trap <span class="m">1</span> <span class="m">3</span> <span class="m">1024</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-3-2" id="chapter_3/question_02/Readme/:__codelineno-3-2" name="__codelineno-3-2"></a><span class="nb">local</span> n: <span class="m">342</span> <span class="nb">local</span> a: <span class="m">1</span>.000000 <span class="nb">local</span> b <span class="m">1</span>.667969 
<a href="#chapter_3/question_02/Readme/:__codelineno-3-3" id="chapter_3/question_02/Readme/:__codelineno-3-3" name="__codelineno-3-3"></a><span class="nb">local</span> n: <span class="m">341</span> <span class="nb">local</span> a: <span class="m">1</span>.667969 <span class="nb">local</span> b <span class="m">2</span>.333984 
<a href="#chapter_3/question_02/Readme/:__codelineno-3-4" id="chapter_3/question_02/Readme/:__codelineno-3-4" name="__codelineno-3-4"></a><span class="nb">local</span> n: <span class="m">341</span> <span class="nb">local</span> a: <span class="m">2</span>.333984 <span class="nb">local</span> b <span class="m">3</span>.000000 
<a href="#chapter_3/question_02/Readme/:__codelineno-3-5" id="chapter_3/question_02/Readme/:__codelineno-3-5" name="__codelineno-3-5"></a>with <span class="nv">n</span> <span class="o">=</span> <span class="m">1024</span> trapezoids, our estimate
<a href="#chapter_3/question_02/Readme/:__codelineno-3-6" id="chapter_3/question_02/Readme/:__codelineno-3-6" name="__codelineno-3-6"></a>of the integral from <span class="m">1</span>.000000 to <span class="m">3</span>.000000 <span class="o">=</span> <span class="m">8</span>.633069768548012e+00
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#chapter_3/question_02/Readme/:__codelineno-4-1" id="chapter_3/question_02/Readme/:__codelineno-4-1" name="__codelineno-4-1"></a>mpicc trap_rule.c -o trap<span class="p">;</span> mpiexec -n <span class="m">4</span> ./trap <span class="m">1</span> <span class="m">3</span> <span class="m">2024</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-4-2" id="chapter_3/question_02/Readme/:__codelineno-4-2" name="__codelineno-4-2"></a><span class="nb">local</span> n: <span class="m">506</span> <span class="nb">local</span> a: <span class="m">1</span>.000000 <span class="nb">local</span> b <span class="m">1</span>.500000 
<a href="#chapter_3/question_02/Readme/:__codelineno-4-3" id="chapter_3/question_02/Readme/:__codelineno-4-3" name="__codelineno-4-3"></a><span class="nb">local</span> n: <span class="m">506</span> <span class="nb">local</span> a: <span class="m">1</span>.500000 <span class="nb">local</span> b <span class="m">2</span>.000000 
<a href="#chapter_3/question_02/Readme/:__codelineno-4-4" id="chapter_3/question_02/Readme/:__codelineno-4-4" name="__codelineno-4-4"></a><span class="nb">local</span> n: <span class="m">506</span> <span class="nb">local</span> a: <span class="m">2</span>.000000 <span class="nb">local</span> b <span class="m">2</span>.500000 
<a href="#chapter_3/question_02/Readme/:__codelineno-4-5" id="chapter_3/question_02/Readme/:__codelineno-4-5" name="__codelineno-4-5"></a><span class="nb">local</span> n: <span class="m">506</span> <span class="nb">local</span> a: <span class="m">2</span>.500000 <span class="nb">local</span> b <span class="m">3</span>.000000 
<a href="#chapter_3/question_02/Readme/:__codelineno-4-6" id="chapter_3/question_02/Readme/:__codelineno-4-6" name="__codelineno-4-6"></a>with <span class="nv">n</span> <span class="o">=</span> <span class="m">2024</span> trapezoids, our estimate
<a href="#chapter_3/question_02/Readme/:__codelineno-4-7" id="chapter_3/question_02/Readme/:__codelineno-4-7" name="__codelineno-4-7"></a>of the integral from <span class="m">1</span>.000000 to <span class="m">3</span>.000000 <span class="o">=</span> <span class="m">8</span>.645439504647232e+00
</code></pre></div>
<div class="highlight"><pre><span></span><code><a href="#chapter_3/question_02/Readme/:__codelineno-5-1" id="chapter_3/question_02/Readme/:__codelineno-5-1" name="__codelineno-5-1"></a>mpicc trap_rule.c -o trap<span class="p">;</span> mpiexec -n <span class="m">3</span> ./trap <span class="m">0</span> <span class="m">3</span> <span class="m">1024</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-5-2" id="chapter_3/question_02/Readme/:__codelineno-5-2" name="__codelineno-5-2"></a><span class="nb">local</span> n: <span class="m">342</span> <span class="nb">local</span> a: <span class="m">0</span>.000000 <span class="nb">local</span> b <span class="m">1</span>.001953 
<a href="#chapter_3/question_02/Readme/:__codelineno-5-3" id="chapter_3/question_02/Readme/:__codelineno-5-3" name="__codelineno-5-3"></a><span class="nb">local</span> n: <span class="m">341</span> <span class="nb">local</span> a: <span class="m">1</span>.001953 <span class="nb">local</span> b <span class="m">2</span>.000977 
<a href="#chapter_3/question_02/Readme/:__codelineno-5-4" id="chapter_3/question_02/Readme/:__codelineno-5-4" name="__codelineno-5-4"></a><span class="nb">local</span> n: <span class="m">341</span> <span class="nb">local</span> a: <span class="m">2</span>.000977 <span class="nb">local</span> b <span class="m">3</span>.000000 
<a href="#chapter_3/question_02/Readme/:__codelineno-5-5" id="chapter_3/question_02/Readme/:__codelineno-5-5" name="__codelineno-5-5"></a>with <span class="nv">n</span> <span class="o">=</span> <span class="m">1024</span> trapezoids, our estimate
<a href="#chapter_3/question_02/Readme/:__codelineno-5-6" id="chapter_3/question_02/Readme/:__codelineno-5-6" name="__codelineno-5-6"></a>of the integral from <span class="m">0</span>.000000 to <span class="m">3</span>.000000 <span class="o">=</span> <span class="m">8</span>.959068736061454e+00
</code></pre></div>
<h4 id="chapter_3/question_02/Readme/:codigo-final">código final</h4>
<div class="highlight"><pre><span></span><code><a href="#chapter_3/question_02/Readme/:__codelineno-6-1" id="chapter_3/question_02/Readme/:__codelineno-6-1" name="__codelineno-6-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;mpi.h&gt;</span><span class="cp"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-2" id="chapter_3/question_02/Readme/:__codelineno-6-2" name="__codelineno-6-2"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-3" id="chapter_3/question_02/Readme/:__codelineno-6-3" name="__codelineno-6-3"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-4" id="chapter_3/question_02/Readme/:__codelineno-6-4" name="__codelineno-6-4"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-5" id="chapter_3/question_02/Readme/:__codelineno-6-5" name="__codelineno-6-5"></a><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-6" id="chapter_3/question_02/Readme/:__codelineno-6-6" name="__codelineno-6-6"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-7" id="chapter_3/question_02/Readme/:__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-8" id="chapter_3/question_02/Readme/:__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">last</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-9" id="chapter_3/question_02/Readme/:__codelineno-6-9" name="__codelineno-6-9"></a><span class="p">};</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-10" id="chapter_3/question_02/Readme/:__codelineno-6-10" name="__codelineno-6-10"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-11" id="chapter_3/question_02/Readme/:__codelineno-6-11" name="__codelineno-6-11"></a><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">new_range_2</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">thread_index</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-12" id="chapter_3/question_02/Readme/:__codelineno-6-12" name="__codelineno-6-12"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-13" id="chapter_3/question_02/Readme/:__codelineno-6-13" name="__codelineno-6-13"></a><span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-14" id="chapter_3/question_02/Readme/:__codelineno-6-14" name="__codelineno-6-14"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-15" id="chapter_3/question_02/Readme/:__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-16" id="chapter_3/question_02/Readme/:__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">rest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-17" id="chapter_3/question_02/Readme/:__codelineno-6-17" name="__codelineno-6-17"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-18" id="chapter_3/question_02/Readme/:__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">thread_index</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">rest</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-19" id="chapter_3/question_02/Readme/:__codelineno-6-19" name="__codelineno-6-19"></a><span class="w">  </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-20" id="chapter_3/question_02/Readme/:__codelineno-6-20" name="__codelineno-6-20"></a><span class="w">    </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-21" id="chapter_3/question_02/Readme/:__codelineno-6-21" name="__codelineno-6-21"></a><span class="w">    </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-22" id="chapter_3/question_02/Readme/:__codelineno-6-22" name="__codelineno-6-22"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-23" id="chapter_3/question_02/Readme/:__codelineno-6-23" name="__codelineno-6-23"></a><span class="w">  </span><span class="k">else</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-24" id="chapter_3/question_02/Readme/:__codelineno-6-24" name="__codelineno-6-24"></a><span class="w">  </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-25" id="chapter_3/question_02/Readme/:__codelineno-6-25" name="__codelineno-6-25"></a><span class="w">    </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">thread_index</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">division</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-26" id="chapter_3/question_02/Readme/:__codelineno-6-26" name="__codelineno-6-26"></a><span class="w">    </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">division</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-27" id="chapter_3/question_02/Readme/:__codelineno-6-27" name="__codelineno-6-27"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-28" id="chapter_3/question_02/Readme/:__codelineno-6-28" name="__codelineno-6-28"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-29" id="chapter_3/question_02/Readme/:__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">r</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-30" id="chapter_3/question_02/Readme/:__codelineno-6-30" name="__codelineno-6-30"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-31" id="chapter_3/question_02/Readme/:__codelineno-6-31" name="__codelineno-6-31"></a><span class="err">``</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-32" id="chapter_3/question_02/Readme/:__codelineno-6-32" name="__codelineno-6-32"></a><span class="kt">double</span><span class="w"> </span><span class="n">trap</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-33" id="chapter_3/question_02/Readme/:__codelineno-6-33" name="__codelineno-6-33"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-34" id="chapter_3/question_02/Readme/:__codelineno-6-34" name="__codelineno-6-34"></a><span class="kt">double</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-35" id="chapter_3/question_02/Readme/:__codelineno-6-35" name="__codelineno-6-35"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-36" id="chapter_3/question_02/Readme/:__codelineno-6-36" name="__codelineno-6-36"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">argv</span><span class="p">[])</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-37" id="chapter_3/question_02/Readme/:__codelineno-6-37" name="__codelineno-6-37"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-38" id="chapter_3/question_02/Readme/:__codelineno-6-38" name="__codelineno-6-38"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-39" id="chapter_3/question_02/Readme/:__codelineno-6-39" name="__codelineno-6-39"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">my_rank</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-40" id="chapter_3/question_02/Readme/:__codelineno-6-40" name="__codelineno-6-40"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">comm_sz</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-41" id="chapter_3/question_02/Readme/:__codelineno-6-41" name="__codelineno-6-41"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-42" id="chapter_3/question_02/Readme/:__codelineno-6-42" name="__codelineno-6-42"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">message_tag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-43" id="chapter_3/question_02/Readme/:__codelineno-6-43" name="__codelineno-6-43"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-44" id="chapter_3/question_02/Readme/:__codelineno-6-44" name="__codelineno-6-44"></a><span class="w">  </span><span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-45" id="chapter_3/question_02/Readme/:__codelineno-6-45" name="__codelineno-6-45"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-46" id="chapter_3/question_02/Readme/:__codelineno-6-46" name="__codelineno-6-46"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atof</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-47" id="chapter_3/question_02/Readme/:__codelineno-6-47" name="__codelineno-6-47"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atof</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-48" id="chapter_3/question_02/Readme/:__codelineno-6-48" name="__codelineno-6-48"></a><span class="w">  </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">atoi</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-49" id="chapter_3/question_02/Readme/:__codelineno-6-49" name="__codelineno-6-49"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-50" id="chapter_3/question_02/Readme/:__codelineno-6-50" name="__codelineno-6-50"></a><span class="w">  </span><span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">my_rank</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-51" id="chapter_3/question_02/Readme/:__codelineno-6-51" name="__codelineno-6-51"></a><span class="w">  </span><span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">comm_sz</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-52" id="chapter_3/question_02/Readme/:__codelineno-6-52" name="__codelineno-6-52"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-53" id="chapter_3/question_02/Readme/:__codelineno-6-53" name="__codelineno-6-53"></a><span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">range</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_range_2</span><span class="p">(</span><span class="n">my_rank</span><span class="p">,</span><span class="w"> </span><span class="n">comm_sz</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-54" id="chapter_3/question_02/Readme/:__codelineno-6-54" name="__codelineno-6-54"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-55" id="chapter_3/question_02/Readme/:__codelineno-6-55" name="__codelineno-6-55"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">B</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">A</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-56" id="chapter_3/question_02/Readme/:__codelineno-6-56" name="__codelineno-6-56"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-57" id="chapter_3/question_02/Readme/:__codelineno-6-57" name="__codelineno-6-57"></a><span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">local_n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-58" id="chapter_3/question_02/Readme/:__codelineno-6-58" name="__codelineno-6-58"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">local_a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">first</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-59" id="chapter_3/question_02/Readme/:__codelineno-6-59" name="__codelineno-6-59"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">local_b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">r</span><span class="p">.</span><span class="n">last</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-60" id="chapter_3/question_02/Readme/:__codelineno-6-60" name="__codelineno-6-60"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">result_integral</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">trap</span><span class="p">(</span><span class="n">local_a</span><span class="p">,</span><span class="w"> </span><span class="n">local_b</span><span class="p">,</span><span class="w"> </span><span class="n">local_n</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-61" id="chapter_3/question_02/Readme/:__codelineno-6-61" name="__codelineno-6-61"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-62" id="chapter_3/question_02/Readme/:__codelineno-6-62" name="__codelineno-6-62"></a><span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">"local n: %i local a: %f local b %f </span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">local_n</span><span class="p">,</span><span class="w"> </span><span class="n">local_a</span><span class="p">,</span><span class="w"> </span><span class="n">local_b</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-63" id="chapter_3/question_02/Readme/:__codelineno-6-63" name="__codelineno-6-63"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-64" id="chapter_3/question_02/Readme/:__codelineno-6-64" name="__codelineno-6-64"></a><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">my_rank</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-65" id="chapter_3/question_02/Readme/:__codelineno-6-65" name="__codelineno-6-65"></a><span class="w">  </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-66" id="chapter_3/question_02/Readme/:__codelineno-6-66" name="__codelineno-6-66"></a><span class="w">    </span><span class="n">MPI_Send</span><span class="p">(</span><span class="o">&amp;</span><span class="n">result_integral</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_DOUBLE</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">message_tag</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-67" id="chapter_3/question_02/Readme/:__codelineno-6-67" name="__codelineno-6-67"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-68" id="chapter_3/question_02/Readme/:__codelineno-6-68" name="__codelineno-6-68"></a><span class="w">  </span><span class="k">else</span><span class="w"> </span><span class="c1">// my_rank ==0</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-69" id="chapter_3/question_02/Readme/:__codelineno-6-69" name="__codelineno-6-69"></a><span class="w">  </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-70" id="chapter_3/question_02/Readme/:__codelineno-6-70" name="__codelineno-6-70"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-71" id="chapter_3/question_02/Readme/:__codelineno-6-71" name="__codelineno-6-71"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">comm_sz</span><span class="p">;</span><span class="w"> </span><span class="n">source</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-72" id="chapter_3/question_02/Readme/:__codelineno-6-72" name="__codelineno-6-72"></a><span class="w">    </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-73" id="chapter_3/question_02/Readme/:__codelineno-6-73" name="__codelineno-6-73"></a><span class="w">      </span><span class="kt">double</span><span class="w"> </span><span class="n">result_integral_source</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-74" id="chapter_3/question_02/Readme/:__codelineno-6-74" name="__codelineno-6-74"></a><span class="w">      </span><span class="n">MPI_Recv</span><span class="p">(</span><span class="o">&amp;</span><span class="n">result_integral_source</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_DOUBLE</span><span class="p">,</span><span class="w"> </span><span class="n">source</span><span class="p">,</span><span class="w"> </span><span class="n">message_tag</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span><span class="w"> </span><span class="n">MPI_STATUS_IGNORE</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-75" id="chapter_3/question_02/Readme/:__codelineno-6-75" name="__codelineno-6-75"></a><span class="w">      </span><span class="n">result_integral</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">result_integral_source</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-76" id="chapter_3/question_02/Readme/:__codelineno-6-76" name="__codelineno-6-76"></a><span class="w">    </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-77" id="chapter_3/question_02/Readme/:__codelineno-6-77" name="__codelineno-6-77"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"with n = %d trapezoids, our estimate</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-78" id="chapter_3/question_02/Readme/:__codelineno-6-78" name="__codelineno-6-78"></a><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">"of the integral from %f to %f = %.15e</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="w"> </span><span class="n">result_integral</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-79" id="chapter_3/question_02/Readme/:__codelineno-6-79" name="__codelineno-6-79"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-80" id="chapter_3/question_02/Readme/:__codelineno-6-80" name="__codelineno-6-80"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-81" id="chapter_3/question_02/Readme/:__codelineno-6-81" name="__codelineno-6-81"></a><span class="w">  </span><span class="n">MPI_Finalize</span><span class="p">();</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-82" id="chapter_3/question_02/Readme/:__codelineno-6-82" name="__codelineno-6-82"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-83" id="chapter_3/question_02/Readme/:__codelineno-6-83" name="__codelineno-6-83"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-84" id="chapter_3/question_02/Readme/:__codelineno-6-84" name="__codelineno-6-84"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-85" id="chapter_3/question_02/Readme/:__codelineno-6-85" name="__codelineno-6-85"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-86" id="chapter_3/question_02/Readme/:__codelineno-6-86" name="__codelineno-6-86"></a><span class="kt">double</span><span class="w"> </span><span class="nf">trap</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-87" id="chapter_3/question_02/Readme/:__codelineno-6-87" name="__codelineno-6-87"></a><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-88" id="chapter_3/question_02/Readme/:__codelineno-6-88" name="__codelineno-6-88"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-89" id="chapter_3/question_02/Readme/:__codelineno-6-89" name="__codelineno-6-89"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-90" id="chapter_3/question_02/Readme/:__codelineno-6-90" name="__codelineno-6-90"></a><span class="w">  </span><span class="c1">// printf("H: %f\n",h);</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-91" id="chapter_3/question_02/Readme/:__codelineno-6-91" name="__codelineno-6-91"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-92" id="chapter_3/question_02/Readme/:__codelineno-6-92" name="__codelineno-6-92"></a><span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="n">approx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">function</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">b</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-93" id="chapter_3/question_02/Readme/:__codelineno-6-93" name="__codelineno-6-93"></a><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-94" id="chapter_3/question_02/Readme/:__codelineno-6-94" name="__codelineno-6-94"></a><span class="w">  </span><span class="p">{</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-95" id="chapter_3/question_02/Readme/:__codelineno-6-95" name="__codelineno-6-95"></a><span class="w">    </span><span class="c1">// printf("f_%i \n", i);</span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-96" id="chapter_3/question_02/Readme/:__codelineno-6-96" name="__codelineno-6-96"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x_i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">h</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-97" id="chapter_3/question_02/Readme/:__codelineno-6-97" name="__codelineno-6-97"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-98" id="chapter_3/question_02/Readme/:__codelineno-6-98" name="__codelineno-6-98"></a><span class="w">    </span><span class="n">approx</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">x_i</span><span class="p">);</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-99" id="chapter_3/question_02/Readme/:__codelineno-6-99" name="__codelineno-6-99"></a><span class="w">  </span><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-100" id="chapter_3/question_02/Readme/:__codelineno-6-100" name="__codelineno-6-100"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-101" id="chapter_3/question_02/Readme/:__codelineno-6-101" name="__codelineno-6-101"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">approx</span><span class="p">;</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-102" id="chapter_3/question_02/Readme/:__codelineno-6-102" name="__codelineno-6-102"></a><span class="p">}</span><span class="w"></span>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-103" id="chapter_3/question_02/Readme/:__codelineno-6-103" name="__codelineno-6-103"></a>
<a href="#chapter_3/question_02/Readme/:__codelineno-6-104" id="chapter_3/question_02/Readme/:__codelineno-6-104" name="__codelineno-6-104"></a><span class="kt">double</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
</section></section></article><script src="https://polyfill.io/v3/polyfill.min.js?features=es5"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>;var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": ".", "features": ["navigation.tabs"], "search": "assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}};var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key]);{"base": "../../..", "features": ["navigation.tabs"], "search": "../../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script><script src="file:///home/samuel/University/UFRN/programacao_concorrente_e_distribuída/parallel_programming_ufrn/.env/lib/python3.10/site-packages/mkdocs_with_pdf/themes/material-polyfills.js"></script></body></html>